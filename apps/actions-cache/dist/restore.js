const require = await import('module').then($=>$.createRequire(import.meta.url));
var iw=Object.create;var _s=Object.defineProperty;var aw=Object.getOwnPropertyDescriptor;var cw=Object.getOwnPropertyNames;var dw=Object.getPrototypeOf,lw=Object.prototype.hasOwnProperty;var I=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var be=(e,t)=>()=>(e&&(t=e(e=0)),t);var T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),wo=(e,t)=>{for(var r in t)_s(e,r,{get:t[r],enumerable:!0})},Cf=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of cw(t))!lw.call(e,o)&&o!==r&&_s(e,o,{get:()=>t[o],enumerable:!(n=aw(t,o))||n.enumerable});return e};var tr=(e,t,r)=>(r=e!=null?iw(dw(e)):{},Cf(t||!e||!e.__esModule?_s(r,"default",{value:e,enumerable:!0}):r,e)),Mn=e=>Cf(_s({},"__esModule",{value:!0}),e);var Rs=T(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.toCommandProperties=Ln.toCommandValue=void 0;function fw(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}Ln.toCommandValue=fw;function uw(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}Ln.toCommandProperties=uw});var Sf=T(lt=>{"use strict";var mw=lt&&lt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),hw=lt&&lt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),pw=lt&&lt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&mw(t,e,r);return hw(t,e),t};Object.defineProperty(lt,"__esModule",{value:!0});lt.issue=lt.issueCommand=void 0;var yw=pw(I("os")),wf=Rs();function bf(e,t,r){let n=new qa(e,t,r);process.stdout.write(n.toString()+yw.EOL)}lt.issueCommand=bf;function gw(e,t=""){bf(e,{},t)}lt.issue=gw;var xf="::",qa=class{constructor(t,r,n){t||(t="missing.command"),this.command=t,this.properties=r,this.message=n}toString(){let t=xf+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let o=this.properties[n];o&&(r?r=!1:t+=",",t+=`${n}=${Cw(o)}`)}}return t+=`${xf}${Ew(this.message)}`,t}};function Ew(e){return wf.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Cw(e){return wf.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});import xw from"crypto";function bo(){return vs>Ts.length-16&&(xw.randomFillSync(Ts),vs=0),Ts.slice(vs,vs+=16)}var Ts,vs,Ga=be(()=>{"use strict";Ts=new Uint8Array(256),vs=Ts.length});var Af,_f=be(()=>{"use strict";Af=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function ww(e){return typeof e=="string"&&Af.test(e)}var Sr,So=be(()=>{"use strict";_f();Sr=ww});function bw(e,t=0){let r=(ke[e[t+0]]+ke[e[t+1]]+ke[e[t+2]]+ke[e[t+3]]+"-"+ke[e[t+4]]+ke[e[t+5]]+"-"+ke[e[t+6]]+ke[e[t+7]]+"-"+ke[e[t+8]]+ke[e[t+9]]+"-"+ke[e[t+10]]+ke[e[t+11]]+ke[e[t+12]]+ke[e[t+13]]+ke[e[t+14]]+ke[e[t+15]]).toLowerCase();if(!Sr(r))throw TypeError("Stringified UUID is invalid");return r}var ke,Ar,Ao=be(()=>{"use strict";So();ke=[];for(let e=0;e<256;++e)ke.push((e+256).toString(16).substr(1));Ar=bw});function Sw(e,t,r){let n=t&&r||0,o=t||new Array(16);e=e||{};let s=e.node||Rf,i=e.clockseq!==void 0?e.clockseq:Ka;if(s==null||i==null){let u=e.random||(e.rng||bo)();s==null&&(s=Rf=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),i==null&&(i=Ka=(u[6]<<8|u[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:Va+1,d=a-Ha+(c-Va)/1e4;if(d<0&&e.clockseq===void 0&&(i=i+1&16383),(d<0||a>Ha)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ha=a,Va=c,Ka=i,a+=122192928e5;let l=((a&268435455)*1e4+c)%4294967296;o[n++]=l>>>24&255,o[n++]=l>>>16&255,o[n++]=l>>>8&255,o[n++]=l&255;let f=a/4294967296*1e4&268435455;o[n++]=f>>>8&255,o[n++]=f&255,o[n++]=f>>>24&15|16,o[n++]=f>>>16&255,o[n++]=i>>>8|128,o[n++]=i&255;for(let u=0;u<6;++u)o[n+u]=s[u];return t||Ar(o)}var Rf,Ka,Ha,Va,vf,Tf=be(()=>{"use strict";Ga();Ao();Ha=0,Va=0;vf=Sw});function Aw(e){if(!Sr(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var ks,Wa=be(()=>{"use strict";So();ks=Aw});function _w(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function Ns(e,t,r){function n(o,s,i,a){if(typeof o=="string"&&(o=_w(o)),typeof s=="string"&&(s=ks(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+o.length);if(c.set(s),c.set(o,s.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,i){a=a||0;for(let d=0;d<16;++d)i[a+d]=c[d];return i}return Ar(c)}try{n.name=e}catch{}return n.DNS=Rw,n.URL=vw,n}var Rw,vw,Ya=be(()=>{"use strict";Ao();Wa();Rw="6ba7b810-9dad-11d1-80b4-00c04fd430c8",vw="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});import Tw from"crypto";function kw(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Tw.createHash("md5").update(e).digest()}var kf,Nf=be(()=>{"use strict";kf=kw});var Nw,Pf,Of=be(()=>{"use strict";Ya();Nf();Nw=Ns("v3",48,kf),Pf=Nw});function Pw(e,t,r){e=e||{};let n=e.random||(e.rng||bo)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return Ar(n)}var Ps,If=be(()=>{"use strict";Ga();Ao();Ps=Pw});import Ow from"crypto";function Iw(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Ow.createHash("sha1").update(e).digest()}var Df,Bf=be(()=>{"use strict";Df=Iw});var Dw,Mf,Lf=be(()=>{"use strict";Ya();Bf();Dw=Ns("v5",80,Df),Mf=Dw});var Ff,zf=be(()=>{"use strict";Ff="00000000-0000-0000-0000-000000000000"});function Bw(e){if(!Sr(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var $f,Uf=be(()=>{"use strict";So();$f=Bw});var jf={};wo(jf,{NIL:()=>Ff,parse:()=>ks,stringify:()=>Ar,v1:()=>vf,v3:()=>Pf,v4:()=>Ps,v5:()=>Mf,validate:()=>Sr,version:()=>$f});var Xa=be(()=>{"use strict";Tf();Of();If();Lf();zf();Uf();So();Ao();Wa()});var Hf=T(ft=>{"use strict";var Mw=ft&&ft.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Lw=ft&&ft.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Gf=ft&&ft.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Mw(t,e,r);return Lw(t,e),t};Object.defineProperty(ft,"__esModule",{value:!0});ft.prepareKeyValueMessage=ft.issueFileCommand=void 0;var qf=Gf(I("fs")),Qa=Gf(I("os")),Fw=(Xa(),Mn(jf)),Kf=Rs();function zw(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!qf.existsSync(r))throw new Error(`Missing file at path: ${r}`);qf.appendFileSync(r,`${Kf.toCommandValue(t)}${Qa.EOL}`,{encoding:"utf8"})}ft.issueFileCommand=zw;function $w(e,t){let r=`ghadelimiter_${Fw.v4()}`,n=Kf.toCommandValue(t);if(e.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${e}<<${r}${Qa.EOL}${n}${Qa.EOL}${r}`}ft.prepareKeyValueMessage=$w});var Wf=T(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.checkBypass=Fn.getProxyUrl=void 0;function Uw(e){let t=e.protocol==="https:";if(Vf(e))return;let r=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)try{return new URL(r)}catch{if(!r.startsWith("http://")&&!r.startsWith("https://"))return new URL(`http://${r}`)}else return}Fn.getProxyUrl=Uw;function Vf(e){if(!e.hostname)return!1;let t=e.hostname;if(jw(t))return!0;let r=process.env.no_proxy||process.env.NO_PROXY||"";if(!r)return!1;let n;e.port?n=Number(e.port):e.protocol==="http:"?n=80:e.protocol==="https:"&&(n=443);let o=[e.hostname.toUpperCase()];typeof n=="number"&&o.push(`${o[0]}:${n}`);for(let s of r.split(",").map(i=>i.trim().toUpperCase()).filter(i=>i))if(s==="*"||o.some(i=>i===s||i.endsWith(`.${s}`)||s.startsWith(".")&&i.endsWith(`${s}`)))return!0;return!1}Fn.checkBypass=Vf;function jw(e){let t=e.toLowerCase();return t==="localhost"||t.startsWith("127.")||t.startsWith("[::1]")||t.startsWith("[0:0:0:0:0:0:0:1]")}});var Jf=T(zn=>{"use strict";var WO=I("net"),qw=I("tls"),Ja=I("http"),Yf=I("https"),Gw=I("events"),YO=I("assert"),Kw=I("util");zn.httpOverHttp=Hw;zn.httpsOverHttp=Vw;zn.httpOverHttps=Ww;zn.httpsOverHttps=Yw;function Hw(e){var t=new rr(e);return t.request=Ja.request,t}function Vw(e){var t=new rr(e);return t.request=Ja.request,t.createSocket=Xf,t.defaultPort=443,t}function Ww(e){var t=new rr(e);return t.request=Yf.request,t}function Yw(e){var t=new rr(e);return t.request=Yf.request,t.createSocket=Xf,t.defaultPort=443,t}function rr(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||Ja.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,o,s,i){for(var a=Qf(o,s,i),c=0,d=t.requests.length;c<d;++c){var l=t.requests[c];if(l.host===a.host&&l.port===a.port){t.requests.splice(c,1),l.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}Kw.inherits(rr,Gw.EventEmitter);rr.prototype.addRequest=function(t,r,n,o){var s=this,i=Za({request:t},s.options,Qf(r,n,o));if(s.sockets.length>=this.maxSockets){s.requests.push(i);return}s.createSocket(i,function(a){a.on("free",c),a.on("close",d),a.on("agentRemove",d),t.onSocket(a);function c(){s.emit("free",a,i)}function d(l){s.removeSocket(a),a.removeListener("free",c),a.removeListener("close",d),a.removeListener("agentRemove",d)}})};rr.prototype.createSocket=function(t,r){var n=this,o={};n.sockets.push(o);var s=Za({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(s.localAddress=t.localAddress),s.proxyAuth&&(s.headers=s.headers||{},s.headers["Proxy-Authorization"]="Basic "+new Buffer(s.proxyAuth).toString("base64")),_r("making CONNECT request");var i=n.request(s);i.useChunkedEncodingByDefault=!1,i.once("response",a),i.once("upgrade",c),i.once("connect",d),i.once("error",l),i.end();function a(f){f.upgrade=!0}function c(f,u,y){process.nextTick(function(){d(f,u,y)})}function d(f,u,y){if(i.removeAllListeners(),u.removeAllListeners(),f.statusCode!==200){_r("tunneling socket could not be established, statusCode=%d",f.statusCode),u.destroy();var x=new Error("tunneling socket could not be established, statusCode="+f.statusCode);x.code="ECONNRESET",t.request.emit("error",x),n.removeSocket(o);return}if(y.length>0){_r("got illegal response body from proxy"),u.destroy();var x=new Error("got illegal response body from proxy");x.code="ECONNRESET",t.request.emit("error",x),n.removeSocket(o);return}return _r("tunneling connection has established"),n.sockets[n.sockets.indexOf(o)]=u,r(u)}function l(f){i.removeAllListeners(),_r(`tunneling socket could not be established, cause=%s
`,f.message,f.stack);var u=new Error("tunneling socket could not be established, cause="+f.message);u.code="ECONNRESET",t.request.emit("error",u),n.removeSocket(o)}};rr.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(o){n.request.onSocket(o)})}};function Xf(e,t){var r=this;rr.prototype.createSocket.call(r,e,function(n){var o=e.request.getHeader("host"),s=Za({},r.options,{socket:n,servername:o?o.replace(/:.*$/,""):e.host}),i=qw.connect(0,s);r.sockets[r.sockets.indexOf(n)]=i,t(i)})}function Qf(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function Za(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n=="object")for(var o=Object.keys(n),s=0,i=o.length;s<i;++s){var a=o[s];n[a]!==void 0&&(e[a]=n[a])}}return e}var _r;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?_r=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:_r=function(){};zn.debug=_r});var eu=T((QO,Zf)=>{"use strict";Zf.exports=Jf()});var ru=T(re=>{"use strict";var Xw=re&&re.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Qw=re&&re.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ls=re&&re.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Xw(t,e,r);return Qw(t,e),t},pe=re&&re.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(re,"__esModule",{value:!0});re.HttpClient=re.isHttps=re.HttpClientResponse=re.HttpClientError=re.getProxyUrl=re.MediaTypes=re.Headers=re.HttpCodes=void 0;var Os=Ls(I("http")),ec=Ls(I("https")),tu=Ls(Wf()),Is=Ls(eu()),_t;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(_t=re.HttpCodes||(re.HttpCodes={}));var Ge;(function(e){e.Accept="accept",e.ContentType="content-type"})(Ge=re.Headers||(re.Headers={}));var Rr;(function(e){e.ApplicationJson="application/json"})(Rr=re.MediaTypes||(re.MediaTypes={}));function Jw(e){let t=tu.getProxyUrl(new URL(e));return t?t.href:""}re.getProxyUrl=Jw;var Zw=[_t.MovedPermanently,_t.ResourceMoved,_t.SeeOther,_t.TemporaryRedirect,_t.PermanentRedirect],eb=[_t.BadGateway,_t.ServiceUnavailable,_t.GatewayTimeout],tb=["OPTIONS","GET","DELETE","HEAD"],rb=10,nb=5,Bs=class e extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,e.prototype)}};re.HttpClientError=Bs;var Ms=class{constructor(t){this.message=t}readBody(){return pe(this,void 0,void 0,function*(){return new Promise(t=>pe(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{t(r.toString())})}))})}readBodyBuffer(){return pe(this,void 0,void 0,function*(){return new Promise(t=>pe(this,void 0,void 0,function*(){let r=[];this.message.on("data",n=>{r.push(n)}),this.message.on("end",()=>{t(Buffer.concat(r))})}))})}};re.HttpClientResponse=Ms;function ob(e){return new URL(e).protocol==="https:"}re.isHttps=ob;var tc=class{constructor(t,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,r){return pe(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,r||{})})}get(t,r){return pe(this,void 0,void 0,function*(){return this.request("GET",t,null,r||{})})}del(t,r){return pe(this,void 0,void 0,function*(){return this.request("DELETE",t,null,r||{})})}post(t,r,n){return pe(this,void 0,void 0,function*(){return this.request("POST",t,r,n||{})})}patch(t,r,n){return pe(this,void 0,void 0,function*(){return this.request("PATCH",t,r,n||{})})}put(t,r,n){return pe(this,void 0,void 0,function*(){return this.request("PUT",t,r,n||{})})}head(t,r){return pe(this,void 0,void 0,function*(){return this.request("HEAD",t,null,r||{})})}sendStream(t,r,n,o){return pe(this,void 0,void 0,function*(){return this.request(t,r,n,o)})}getJson(t,r={}){return pe(this,void 0,void 0,function*(){r[Ge.Accept]=this._getExistingOrDefaultHeader(r,Ge.Accept,Rr.ApplicationJson);let n=yield this.get(t,r);return this._processResponse(n,this.requestOptions)})}postJson(t,r,n={}){return pe(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Ge.Accept]=this._getExistingOrDefaultHeader(n,Ge.Accept,Rr.ApplicationJson),n[Ge.ContentType]=this._getExistingOrDefaultHeader(n,Ge.ContentType,Rr.ApplicationJson);let s=yield this.post(t,o,n);return this._processResponse(s,this.requestOptions)})}putJson(t,r,n={}){return pe(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Ge.Accept]=this._getExistingOrDefaultHeader(n,Ge.Accept,Rr.ApplicationJson),n[Ge.ContentType]=this._getExistingOrDefaultHeader(n,Ge.ContentType,Rr.ApplicationJson);let s=yield this.put(t,o,n);return this._processResponse(s,this.requestOptions)})}patchJson(t,r,n={}){return pe(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Ge.Accept]=this._getExistingOrDefaultHeader(n,Ge.Accept,Rr.ApplicationJson),n[Ge.ContentType]=this._getExistingOrDefaultHeader(n,Ge.ContentType,Rr.ApplicationJson);let s=yield this.patch(t,o,n);return this._processResponse(s,this.requestOptions)})}request(t,r,n,o){return pe(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let s=new URL(r),i=this._prepareRequest(t,s,o),a=this._allowRetries&&tb.includes(t)?this._maxRetries+1:1,c=0,d;do{if(d=yield this.requestRaw(i,n),d&&d.message&&d.message.statusCode===_t.Unauthorized){let f;for(let u of this.handlers)if(u.canHandleAuthentication(d)){f=u;break}return f?f.handleAuthentication(this,i,n):d}let l=this._maxRedirects;for(;d.message.statusCode&&Zw.includes(d.message.statusCode)&&this._allowRedirects&&l>0;){let f=d.message.headers.location;if(!f)break;let u=new URL(f);if(s.protocol==="https:"&&s.protocol!==u.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield d.readBody(),u.hostname!==s.hostname)for(let y in o)y.toLowerCase()==="authorization"&&delete o[y];i=this._prepareRequest(t,u,o),d=yield this.requestRaw(i,n),l--}if(!d.message.statusCode||!eb.includes(d.message.statusCode))return d;c+=1,c<a&&(yield d.readBody(),yield this._performExponentialBackoff(c))}while(c<a);return d})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return pe(this,void 0,void 0,function*(){return new Promise((n,o)=>{function s(i,a){i?o(i):a?n(a):o(new Error("Unknown error"))}this.requestRawWithCallback(t,r,s)})})}requestRawWithCallback(t,r,n){typeof r=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let o=!1;function s(c,d){o||(o=!0,n(c,d))}let i=t.httpModule.request(t.options,c=>{let d=new Ms(c);s(void 0,d)}),a;i.on("socket",c=>{a=c}),i.setTimeout(this._socketTimeout||3*6e4,()=>{a&&a.end(),s(new Error(`Request timeout: ${t.options.path}`))}),i.on("error",function(c){s(c)}),r&&typeof r=="string"&&i.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){i.end()}),r.pipe(i)):i.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){let o={};o.parsedUrl=r;let s=o.parsedUrl.protocol==="https:";o.httpModule=s?ec:Os;let i=s?443:80;if(o.options={},o.options.host=o.parsedUrl.hostname,o.options.port=o.parsedUrl.port?parseInt(o.parsedUrl.port):i,o.options.path=(o.parsedUrl.pathname||"")+(o.parsedUrl.search||""),o.options.method=t,o.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(o.options.headers["user-agent"]=this.userAgent),o.options.agent=this._getAgent(o.parsedUrl),this.handlers)for(let a of this.handlers)a.prepareRequest(o.options);return o}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Ds(this.requestOptions.headers),Ds(t||{})):Ds(t||{})}_getExistingOrDefaultHeader(t,r,n){let o;return this.requestOptions&&this.requestOptions.headers&&(o=Ds(this.requestOptions.headers)[r]),t[r]||o||n}_getAgent(t){let r,n=tu.getProxyUrl(t),o=n&&n.hostname;if(this._keepAlive&&o&&(r=this._proxyAgent),this._keepAlive&&!o&&(r=this._agent),r)return r;let s=t.protocol==="https:",i=100;if(this.requestOptions&&(i=this.requestOptions.maxSockets||Os.globalAgent.maxSockets),n&&n.hostname){let a={maxSockets:i,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},c,d=n.protocol==="https:";s?c=d?Is.httpsOverHttps:Is.httpsOverHttp:c=d?Is.httpOverHttps:Is.httpOverHttp,r=c(a),this._proxyAgent=r}if(this._keepAlive&&!r){let a={keepAlive:this._keepAlive,maxSockets:i};r=s?new ec.Agent(a):new Os.Agent(a),this._agent=r}return r||(r=s?ec.globalAgent:Os.globalAgent),s&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){return pe(this,void 0,void 0,function*(){t=Math.min(rb,t);let r=nb*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(t,r){return pe(this,void 0,void 0,function*(){return new Promise((n,o)=>pe(this,void 0,void 0,function*(){let s=t.message.statusCode||0,i={statusCode:s,result:null,headers:{}};s===_t.NotFound&&n(i);function a(l,f){if(typeof f=="string"){let u=new Date(f);if(!isNaN(u.valueOf()))return u}return f}let c,d;try{d=yield t.readBody(),d&&d.length>0&&(r&&r.deserializeDates?c=JSON.parse(d,a):c=JSON.parse(d),i.result=c),i.headers=t.message.headers}catch{}if(s>299){let l;c&&c.message?l=c.message:d&&d.length>0?l=d:l=`Failed request: (${s})`;let f=new Bs(l,s);f.result=i.result,o(f)}else n(i)}))})}};re.HttpClient=tc;var Ds=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{})});var nu=T(Ot=>{"use strict";var sc=Ot&&Ot.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.PersonalAccessTokenCredentialHandler=Ot.BearerCredentialHandler=Ot.BasicCredentialHandler=void 0;var rc=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return sc(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ot.BasicCredentialHandler=rc;var nc=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return sc(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ot.BearerCredentialHandler=nc;var oc=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return sc(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ot.PersonalAccessTokenCredentialHandler=oc});var iu=T($n=>{"use strict";var ou=$n&&$n.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty($n,"__esModule",{value:!0});$n.OidcClient=void 0;var sb=ru(),ib=nu(),su=Un(),ic=class e{static createHttpClient(t=!0,r=10){let n={allowRetries:t,maxRetries:r};return new sb.HttpClient("actions/oidc-client",[new ib.BearerCredentialHandler(e.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return ou(this,void 0,void 0,function*(){let s=(r=(yield e.createHttpClient().getJson(t).catch(i=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${i.statusCode}
 
        Error Message: ${i.result.message}`)})).result)===null||r===void 0?void 0:r.value;if(!s)throw new Error("Response json body do not have ID Token field");return s})}static getIDToken(t){return ou(this,void 0,void 0,function*(){try{let r=e.getIDTokenUrl();if(t){let o=encodeURIComponent(t);r=`${r}&audience=${o}`}su.debug(`ID token url is ${r}`);let n=yield e.getCall(r);return su.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};$n.OidcClient=ic});var lc=T(Ye=>{"use strict";var ac=Ye&&Ye.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.summary=Ye.markdownSummary=Ye.SUMMARY_DOCS_URL=Ye.SUMMARY_ENV_VAR=void 0;var ab=I("os"),cc=I("fs"),{access:cb,appendFile:db,writeFile:lb}=cc.promises;Ye.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";Ye.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var dc=class{constructor(){this._buffer=""}filePath(){return ac(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[Ye.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${Ye.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield cb(t,cc.constants.R_OK|cc.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,r,n={}){let o=Object.entries(n).map(([s,i])=>` ${s}="${i}"`).join("");return r?`<${t}${o}>${r}</${t}>`:`<${t}${o}>`}write(t){return ac(this,void 0,void 0,function*(){let r=!!t?.overwrite,n=yield this.filePath();return yield(r?lb:db)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return ac(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,r=!1){return this._buffer+=t,r?this.addEOL():this}addEOL(){return this.addRaw(ab.EOL)}addCodeBlock(t,r){let n=Object.assign({},r&&{lang:r}),o=this.wrap("pre",this.wrap("code",t),n);return this.addRaw(o).addEOL()}addList(t,r=!1){let n=r?"ol":"ul",o=t.map(i=>this.wrap("li",i)).join(""),s=this.wrap(n,o);return this.addRaw(s).addEOL()}addTable(t){let r=t.map(o=>{let s=o.map(i=>{if(typeof i=="string")return this.wrap("td",i);let{header:a,data:c,colspan:d,rowspan:l}=i,f=a?"th":"td",u=Object.assign(Object.assign({},d&&{colspan:d}),l&&{rowspan:l});return this.wrap(f,c,u)}).join("");return this.wrap("tr",s)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(t,r){let n=this.wrap("details",this.wrap("summary",t)+r);return this.addRaw(n).addEOL()}addImage(t,r,n){let{width:o,height:s}=n||{},i=Object.assign(Object.assign({},o&&{width:o}),s&&{height:s}),a=this.wrap("img",null,Object.assign({src:t,alt:r},i));return this.addRaw(a).addEOL()}addHeading(t,r){let n=`h${r}`,o=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",s=this.wrap(o,t);return this.addRaw(s).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,r){let n=Object.assign({},r&&{cite:r}),o=this.wrap("blockquote",t,n);return this.addRaw(o).addEOL()}addLink(t,r){let n=this.wrap("a",t,{href:r});return this.addRaw(n).addEOL()}},au=new dc;Ye.markdownSummary=au;Ye.summary=au});var cu=T(Xe=>{"use strict";var fb=Xe&&Xe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ub=Xe&&Xe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),mb=Xe&&Xe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&fb(t,e,r);return ub(t,e),t};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.toPlatformPath=Xe.toWin32Path=Xe.toPosixPath=void 0;var hb=mb(I("path"));function pb(e){return e.replace(/[\\]/g,"/")}Xe.toPosixPath=pb;function yb(e){return e.replace(/[/]/g,"\\")}Xe.toWin32Path=yb;function gb(e){return e.replace(/[/\\]/g,hb.sep)}Xe.toPlatformPath=gb});var Un=T(v=>{"use strict";var Eb=v&&v.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Cb=v&&v.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),du=v&&v.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Eb(t,e,r);return Cb(t,e),t},lu=v&&v.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.getIDToken=v.getState=v.saveState=v.group=v.endGroup=v.startGroup=v.info=v.notice=v.warning=v.error=v.debug=v.isDebug=v.setFailed=v.setCommandEcho=v.setOutput=v.getBooleanInput=v.getMultilineInput=v.getInput=v.addPath=v.setSecret=v.exportVariable=v.ExitCode=void 0;var ut=Sf(),wn=Hf(),jn=Rs(),fu=du(I("os")),xb=du(I("path")),wb=iu(),uu;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(uu=v.ExitCode||(v.ExitCode={}));function bb(e,t){let r=jn.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||"")return wn.issueFileCommand("ENV",wn.prepareKeyValueMessage(e,t));ut.issueCommand("set-env",{name:e},r)}v.exportVariable=bb;function Sb(e){ut.issueCommand("add-mask",{},e)}v.setSecret=Sb;function Ab(e){process.env.GITHUB_PATH||""?wn.issueFileCommand("PATH",e):ut.issueCommand("add-path",{},e),process.env.PATH=`${e}${xb.delimiter}${process.env.PATH}`}v.addPath=Ab;function fc(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}v.getInput=fc;function _b(e,t){let r=fc(e,t).split(`
`).filter(n=>n!=="");return t&&t.trimWhitespace===!1?r:r.map(n=>n.trim())}v.getMultilineInput=_b;function Rb(e,t){let r=["true","True","TRUE"],n=["false","False","FALSE"],o=fc(e,t);if(r.includes(o))return!0;if(n.includes(o))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}v.getBooleanInput=Rb;function vb(e,t){if(process.env.GITHUB_OUTPUT||"")return wn.issueFileCommand("OUTPUT",wn.prepareKeyValueMessage(e,t));process.stdout.write(fu.EOL),ut.issueCommand("set-output",{name:e},jn.toCommandValue(t))}v.setOutput=vb;function Tb(e){ut.issue("echo",e?"on":"off")}v.setCommandEcho=Tb;function kb(e){process.exitCode=uu.Failure,mu(e)}v.setFailed=kb;function Nb(){return process.env.RUNNER_DEBUG==="1"}v.isDebug=Nb;function Pb(e){ut.issueCommand("debug",{},e)}v.debug=Pb;function mu(e,t={}){ut.issueCommand("error",jn.toCommandProperties(t),e instanceof Error?e.toString():e)}v.error=mu;function Ob(e,t={}){ut.issueCommand("warning",jn.toCommandProperties(t),e instanceof Error?e.toString():e)}v.warning=Ob;function Ib(e,t={}){ut.issueCommand("notice",jn.toCommandProperties(t),e instanceof Error?e.toString():e)}v.notice=Ib;function Db(e){process.stdout.write(e+fu.EOL)}v.info=Db;function hu(e){ut.issue("group",e)}v.startGroup=hu;function pu(){ut.issue("endgroup")}v.endGroup=pu;function Bb(e,t){return lu(this,void 0,void 0,function*(){hu(e);let r;try{r=yield t()}finally{pu()}return r})}v.group=Bb;function Mb(e,t){if(process.env.GITHUB_STATE||"")return wn.issueFileCommand("STATE",wn.prepareKeyValueMessage(e,t));ut.issueCommand("save-state",{name:e},jn.toCommandValue(t))}v.saveState=Mb;function Lb(e){return process.env[`STATE_${e}`]||""}v.getState=Lb;function Fb(e){return lu(this,void 0,void 0,function*(){return yield wb.OidcClient.getIDToken(e)})}v.getIDToken=Fb;var zb=lc();Object.defineProperty(v,"summary",{enumerable:!0,get:function(){return zb.summary}});var $b=lc();Object.defineProperty(v,"markdownSummary",{enumerable:!0,get:function(){return $b.markdownSummary}});var uc=cu();Object.defineProperty(v,"toPosixPath",{enumerable:!0,get:function(){return uc.toPosixPath}});Object.defineProperty(v,"toWin32Path",{enumerable:!0,get:function(){return uc.toWin32Path}});Object.defineProperty(v,"toPlatformPath",{enumerable:!0,get:function(){return uc.toPlatformPath}})});var hc=T(R=>{"use strict";var Ub=R&&R.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),jb=R&&R.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),gu=R&&R.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Ub(t,e,r);return jb(t,e),t},mc=R&&R.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})},Qe;Object.defineProperty(R,"__esModule",{value:!0});R.getCmdPath=R.tryGetExecutablePath=R.isRooted=R.isDirectory=R.exists=R.READONLY=R.UV_FS_O_EXLOCK=R.IS_WINDOWS=R.unlink=R.symlink=R.stat=R.rmdir=R.rm=R.rename=R.readlink=R.readdir=R.open=R.mkdir=R.lstat=R.copyFile=R.chmod=void 0;var Eu=gu(I("fs")),Fs=gu(I("path"));Qe=Eu.promises,R.chmod=Qe.chmod,R.copyFile=Qe.copyFile,R.lstat=Qe.lstat,R.mkdir=Qe.mkdir,R.open=Qe.open,R.readdir=Qe.readdir,R.readlink=Qe.readlink,R.rename=Qe.rename,R.rm=Qe.rm,R.rmdir=Qe.rmdir,R.stat=Qe.stat,R.symlink=Qe.symlink,R.unlink=Qe.unlink;R.IS_WINDOWS=process.platform==="win32";R.UV_FS_O_EXLOCK=268435456;R.READONLY=Eu.constants.O_RDONLY;function qb(e){return mc(this,void 0,void 0,function*(){try{yield R.stat(e)}catch(t){if(t.code==="ENOENT")return!1;throw t}return!0})}R.exists=qb;function Gb(e,t=!1){return mc(this,void 0,void 0,function*(){return(t?yield R.stat(e):yield R.lstat(e)).isDirectory()})}R.isDirectory=Gb;function Kb(e){if(e=Vb(e),!e)throw new Error('isRooted() parameter "p" cannot be empty');return R.IS_WINDOWS?e.startsWith("\\")||/^[A-Z]:/i.test(e):e.startsWith("/")}R.isRooted=Kb;function Hb(e,t){return mc(this,void 0,void 0,function*(){let r;try{r=yield R.stat(e)}catch(o){o.code!=="ENOENT"&&console.log(`Unexpected error attempting to determine if executable file exists '${e}': ${o}`)}if(r&&r.isFile()){if(R.IS_WINDOWS){let o=Fs.extname(e).toUpperCase();if(t.some(s=>s.toUpperCase()===o))return e}else if(yu(r))return e}let n=e;for(let o of t){e=n+o,r=void 0;try{r=yield R.stat(e)}catch(s){s.code!=="ENOENT"&&console.log(`Unexpected error attempting to determine if executable file exists '${e}': ${s}`)}if(r&&r.isFile()){if(R.IS_WINDOWS){try{let s=Fs.dirname(e),i=Fs.basename(e).toUpperCase();for(let a of yield R.readdir(s))if(i===a.toUpperCase()){e=Fs.join(s,a);break}}catch(s){console.log(`Unexpected error attempting to determine the actual case of the file '${e}': ${s}`)}return e}else if(yu(r))return e}}return""})}R.tryGetExecutablePath=Hb;function Vb(e){return e=e||"",R.IS_WINDOWS?(e=e.replace(/\//g,"\\"),e.replace(/\\\\+/g,"\\")):e.replace(/\/\/+/g,"/")}function yu(e){return(e.mode&1)>0||(e.mode&8)>0&&e.gid===process.getgid()||(e.mode&64)>0&&e.uid===process.getuid()}function Wb(){var e;return(e=process.env.COMSPEC)!==null&&e!==void 0?e:"cmd.exe"}R.getCmdPath=Wb});var zs=T(ue=>{"use strict";var Yb=ue&&ue.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Xb=ue&&ue.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Cu=ue&&ue.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Yb(t,e,r);return Xb(t,e),t},vr=ue&&ue.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(ue,"__esModule",{value:!0});ue.findInPath=ue.which=ue.mkdirP=ue.rmRF=ue.mv=ue.cp=void 0;var Qb=I("assert"),It=Cu(I("path")),J=Cu(hc());function Jb(e,t,r={}){return vr(this,void 0,void 0,function*(){let{force:n,recursive:o,copySourceDirectory:s}=eS(r),i=(yield J.exists(t))?yield J.stat(t):null;if(i&&i.isFile()&&!n)return;let a=i&&i.isDirectory()&&s?It.join(t,It.basename(e)):t;if(!(yield J.exists(e)))throw new Error(`no such file or directory: ${e}`);if((yield J.stat(e)).isDirectory())if(o)yield Su(e,a,0,n);else throw new Error(`Failed to copy. ${e} is a directory, but tried to copy without recursive flag.`);else{if(It.relative(e,a)==="")throw new Error(`'${a}' and '${e}' are the same file`);yield Au(e,a,n)}})}ue.cp=Jb;function Zb(e,t,r={}){return vr(this,void 0,void 0,function*(){if(yield J.exists(t)){let n=!0;if((yield J.isDirectory(t))&&(t=It.join(t,It.basename(e)),n=yield J.exists(t)),n)if(r.force==null||r.force)yield xu(t);else throw new Error("Destination already exists")}yield pc(It.dirname(t)),yield J.rename(e,t)})}ue.mv=Zb;function xu(e){return vr(this,void 0,void 0,function*(){if(J.IS_WINDOWS&&/[*"<>|]/.test(e))throw new Error('File path must not contain `*`, `"`, `<`, `>` or `|` on Windows');try{yield J.rm(e,{force:!0,maxRetries:3,recursive:!0,retryDelay:300})}catch(t){throw new Error(`File was unable to be removed ${t}`)}})}ue.rmRF=xu;function pc(e){return vr(this,void 0,void 0,function*(){Qb.ok(e,"a path argument must be provided"),yield J.mkdir(e,{recursive:!0})})}ue.mkdirP=pc;function wu(e,t){return vr(this,void 0,void 0,function*(){if(!e)throw new Error("parameter 'tool' is required");if(t){let n=yield wu(e,!1);if(!n)throw J.IS_WINDOWS?new Error(`Unable to locate executable file: ${e}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`):new Error(`Unable to locate executable file: ${e}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`);return n}let r=yield bu(e);return r&&r.length>0?r[0]:""})}ue.which=wu;function bu(e){return vr(this,void 0,void 0,function*(){if(!e)throw new Error("parameter 'tool' is required");let t=[];if(J.IS_WINDOWS&&process.env.PATHEXT)for(let o of process.env.PATHEXT.split(It.delimiter))o&&t.push(o);if(J.isRooted(e)){let o=yield J.tryGetExecutablePath(e,t);return o?[o]:[]}if(e.includes(It.sep))return[];let r=[];if(process.env.PATH)for(let o of process.env.PATH.split(It.delimiter))o&&r.push(o);let n=[];for(let o of r){let s=yield J.tryGetExecutablePath(It.join(o,e),t);s&&n.push(s)}return n})}ue.findInPath=bu;function eS(e){let t=e.force==null?!0:e.force,r=!!e.recursive,n=e.copySourceDirectory==null?!0:!!e.copySourceDirectory;return{force:t,recursive:r,copySourceDirectory:n}}function Su(e,t,r,n){return vr(this,void 0,void 0,function*(){if(r>=255)return;r++,yield pc(t);let o=yield J.readdir(e);for(let s of o){let i=`${e}/${s}`,a=`${t}/${s}`;(yield J.lstat(i)).isDirectory()?yield Su(i,a,r,n):yield Au(i,a,n)}yield J.chmod(t,(yield J.stat(e)).mode)})}function Au(e,t,r){return vr(this,void 0,void 0,function*(){if((yield J.lstat(e)).isSymbolicLink()){try{yield J.lstat(t),yield J.unlink(t)}catch(o){o.code==="EPERM"&&(yield J.chmod(t,"0666"),yield J.unlink(t))}let n=yield J.readlink(e);yield J.symlink(n,t,J.IS_WINDOWS?"junction":null)}else(!(yield J.exists(t))||r)&&(yield J.copyFile(e,t))})}});var Tu=T(Je=>{"use strict";var tS=Je&&Je.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),rS=Je&&Je.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),qn=Je&&Je.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&tS(t,e,r);return rS(t,e),t},_u=Je&&Je.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Je,"__esModule",{value:!0});Je.argStringToArray=Je.ToolRunner=void 0;var $s=qn(I("os")),vu=qn(I("events")),nS=qn(I("child_process")),oS=qn(I("path")),sS=qn(zs()),Ru=qn(hc()),iS=I("timers"),Us=process.platform==="win32",yc=class extends vu.EventEmitter{constructor(t,r,n){if(super(),!t)throw new Error("Parameter 'toolPath' cannot be null or empty.");this.toolPath=t,this.args=r||[],this.options=n||{}}_debug(t){this.options.listeners&&this.options.listeners.debug&&this.options.listeners.debug(t)}_getCommandString(t,r){let n=this._getSpawnFileName(),o=this._getSpawnArgs(t),s=r?"":"[command]";if(Us)if(this._isCmdFile()){s+=n;for(let i of o)s+=` ${i}`}else if(t.windowsVerbatimArguments){s+=`"${n}"`;for(let i of o)s+=` ${i}`}else{s+=this._windowsQuoteCmdArg(n);for(let i of o)s+=` ${this._windowsQuoteCmdArg(i)}`}else{s+=n;for(let i of o)s+=` ${i}`}return s}_processLineBuffer(t,r,n){try{let o=r+t.toString(),s=o.indexOf($s.EOL);for(;s>-1;){let i=o.substring(0,s);n(i),o=o.substring(s+$s.EOL.length),s=o.indexOf($s.EOL)}return o}catch(o){return this._debug(`error processing line. Failed with error ${o}`),""}}_getSpawnFileName(){return Us&&this._isCmdFile()?process.env.COMSPEC||"cmd.exe":this.toolPath}_getSpawnArgs(t){if(Us&&this._isCmdFile()){let r=`/D /S /C "${this._windowsQuoteCmdArg(this.toolPath)}`;for(let n of this.args)r+=" ",r+=t.windowsVerbatimArguments?n:this._windowsQuoteCmdArg(n);return r+='"',[r]}return this.args}_endsWith(t,r){return t.endsWith(r)}_isCmdFile(){let t=this.toolPath.toUpperCase();return this._endsWith(t,".CMD")||this._endsWith(t,".BAT")}_windowsQuoteCmdArg(t){if(!this._isCmdFile())return this._uvQuoteCmdArg(t);if(!t)return'""';let r=[" ","	","&","(",")","[","]","{","}","^","=",";","!","'","+",",","`","~","|","<",">",'"'],n=!1;for(let i of t)if(r.some(a=>a===i)){n=!0;break}if(!n)return t;let o='"',s=!0;for(let i=t.length;i>0;i--)o+=t[i-1],s&&t[i-1]==="\\"?o+="\\":t[i-1]==='"'?(s=!0,o+='"'):s=!1;return o+='"',o.split("").reverse().join("")}_uvQuoteCmdArg(t){if(!t)return'""';if(!t.includes(" ")&&!t.includes("	")&&!t.includes('"'))return t;if(!t.includes('"')&&!t.includes("\\"))return`"${t}"`;let r='"',n=!0;for(let o=t.length;o>0;o--)r+=t[o-1],n&&t[o-1]==="\\"?r+="\\":t[o-1]==='"'?(n=!0,r+="\\"):n=!1;return r+='"',r.split("").reverse().join("")}_cloneExecOptions(t){t=t||{};let r={cwd:t.cwd||process.cwd(),env:t.env||process.env,silent:t.silent||!1,windowsVerbatimArguments:t.windowsVerbatimArguments||!1,failOnStdErr:t.failOnStdErr||!1,ignoreReturnCode:t.ignoreReturnCode||!1,delay:t.delay||1e4};return r.outStream=t.outStream||process.stdout,r.errStream=t.errStream||process.stderr,r}_getSpawnOptions(t,r){t=t||{};let n={};return n.cwd=t.cwd,n.env=t.env,n.windowsVerbatimArguments=t.windowsVerbatimArguments||this._isCmdFile(),t.windowsVerbatimArguments&&(n.argv0=`"${r}"`),n}exec(){return _u(this,void 0,void 0,function*(){return!Ru.isRooted(this.toolPath)&&(this.toolPath.includes("/")||Us&&this.toolPath.includes("\\"))&&(this.toolPath=oS.resolve(process.cwd(),this.options.cwd||process.cwd(),this.toolPath)),this.toolPath=yield sS.which(this.toolPath,!0),new Promise((t,r)=>_u(this,void 0,void 0,function*(){this._debug(`exec tool: ${this.toolPath}`),this._debug("arguments:");for(let d of this.args)this._debug(`   ${d}`);let n=this._cloneExecOptions(this.options);!n.silent&&n.outStream&&n.outStream.write(this._getCommandString(n)+$s.EOL);let o=new gc(n,this.toolPath);if(o.on("debug",d=>{this._debug(d)}),this.options.cwd&&!(yield Ru.exists(this.options.cwd)))return r(new Error(`The cwd: ${this.options.cwd} does not exist!`));let s=this._getSpawnFileName(),i=nS.spawn(s,this._getSpawnArgs(n),this._getSpawnOptions(this.options,s)),a="";i.stdout&&i.stdout.on("data",d=>{this.options.listeners&&this.options.listeners.stdout&&this.options.listeners.stdout(d),!n.silent&&n.outStream&&n.outStream.write(d),a=this._processLineBuffer(d,a,l=>{this.options.listeners&&this.options.listeners.stdline&&this.options.listeners.stdline(l)})});let c="";if(i.stderr&&i.stderr.on("data",d=>{o.processStderr=!0,this.options.listeners&&this.options.listeners.stderr&&this.options.listeners.stderr(d),!n.silent&&n.errStream&&n.outStream&&(n.failOnStdErr?n.errStream:n.outStream).write(d),c=this._processLineBuffer(d,c,l=>{this.options.listeners&&this.options.listeners.errline&&this.options.listeners.errline(l)})}),i.on("error",d=>{o.processError=d.message,o.processExited=!0,o.processClosed=!0,o.CheckComplete()}),i.on("exit",d=>{o.processExitCode=d,o.processExited=!0,this._debug(`Exit code ${d} received from tool '${this.toolPath}'`),o.CheckComplete()}),i.on("close",d=>{o.processExitCode=d,o.processExited=!0,o.processClosed=!0,this._debug(`STDIO streams have closed for tool '${this.toolPath}'`),o.CheckComplete()}),o.on("done",(d,l)=>{a.length>0&&this.emit("stdline",a),c.length>0&&this.emit("errline",c),i.removeAllListeners(),d?r(d):t(l)}),this.options.input){if(!i.stdin)throw new Error("child process missing stdin");i.stdin.end(this.options.input)}}))})}};Je.ToolRunner=yc;function aS(e){let t=[],r=!1,n=!1,o="";function s(i){n&&i!=='"'&&(o+="\\"),o+=i,n=!1}for(let i=0;i<e.length;i++){let a=e.charAt(i);if(a==='"'){n?s(a):r=!r;continue}if(a==="\\"&&n){s(a);continue}if(a==="\\"&&r){n=!0;continue}if(a===" "&&!r){o.length>0&&(t.push(o),o="");continue}s(a)}return o.length>0&&t.push(o.trim()),t}Je.argStringToArray=aS;var gc=class e extends vu.EventEmitter{constructor(t,r){if(super(),this.processClosed=!1,this.processError="",this.processExitCode=0,this.processExited=!1,this.processStderr=!1,this.delay=1e4,this.done=!1,this.timeout=null,!r)throw new Error("toolPath must not be empty");this.options=t,this.toolPath=r,t.delay&&(this.delay=t.delay)}CheckComplete(){this.done||(this.processClosed?this._setResult():this.processExited&&(this.timeout=iS.setTimeout(e.HandleTimeout,this.delay,this)))}_debug(t){this.emit("debug",t)}_setResult(){let t;this.processExited&&(this.processError?t=new Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`):this.processExitCode!==0&&!this.options.ignoreReturnCode?t=new Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`):this.processStderr&&this.options.failOnStdErr&&(t=new Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`))),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.done=!0,this.emit("done",t,this.processExitCode)}static HandleTimeout(t){if(!t.done){if(!t.processClosed&&t.processExited){let r=`The STDIO streams did not close within ${t.delay/1e3} seconds of the exit event from process '${t.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;t._debug(r)}t._setResult()}}}});var Ec=T(Ze=>{"use strict";var cS=Ze&&Ze.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),dS=Ze&&Ze.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),lS=Ze&&Ze.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&cS(t,e,r);return dS(t,e),t},Pu=Ze&&Ze.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.getExecOutput=Ze.exec=void 0;var ku=I("string_decoder"),Nu=lS(Tu());function Ou(e,t,r){return Pu(this,void 0,void 0,function*(){let n=Nu.argStringToArray(e);if(n.length===0)throw new Error("Parameter 'commandLine' cannot be null or empty.");let o=n[0];return t=n.slice(1).concat(t||[]),new Nu.ToolRunner(o,t,r).exec()})}Ze.exec=Ou;function fS(e,t,r){var n,o;return Pu(this,void 0,void 0,function*(){let s="",i="",a=new ku.StringDecoder("utf8"),c=new ku.StringDecoder("utf8"),d=(n=r?.listeners)===null||n===void 0?void 0:n.stdout,l=(o=r?.listeners)===null||o===void 0?void 0:o.stderr,f=w=>{i+=c.write(w),l&&l(w)},u=w=>{s+=a.write(w),d&&d(w)},y=Object.assign(Object.assign({},r?.listeners),{stdout:u,stderr:f}),x=yield Ou(e,t,Object.assign(Object.assign({},r),{listeners:y}));return s+=a.end(),i+=c.end(),{exitCode:x,stdout:s,stderr:i}})}Ze.getExecOutput=fS});var Iu=T(Dt=>{"use strict";var uS=Dt&&Dt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),mS=Dt&&Dt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),hS=Dt&&Dt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&uS(t,e,r);return mS(t,e),t};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.getOptions=void 0;var Cc=hS(Un());function pS(e){let t={followSymbolicLinks:!0,implicitDescendants:!0,omitBrokenSymbolicLinks:!0};return e&&(typeof e.followSymbolicLinks=="boolean"&&(t.followSymbolicLinks=e.followSymbolicLinks,Cc.debug(`followSymbolicLinks '${t.followSymbolicLinks}'`)),typeof e.implicitDescendants=="boolean"&&(t.implicitDescendants=e.implicitDescendants,Cc.debug(`implicitDescendants '${t.implicitDescendants}'`)),typeof e.omitBrokenSymbolicLinks=="boolean"&&(t.omitBrokenSymbolicLinks=e.omitBrokenSymbolicLinks,Cc.debug(`omitBrokenSymbolicLinks '${t.omitBrokenSymbolicLinks}'`))),t}Dt.getOptions=pS});var qs=T(me=>{"use strict";var yS=me&&me.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),gS=me&&me.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ES=me&&me.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&yS(t,e,r);return gS(t,e),t},CS=me&&me.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(me,"__esModule",{value:!0});me.safeTrimTrailingSeparator=me.normalizeSeparators=me.hasRoot=me.hasAbsoluteRoot=me.ensureAbsoluteRoot=me.dirname=void 0;var js=ES(I("path")),bn=CS(I("assert")),Tr=process.platform==="win32";function xS(e){if(e=wc(e),Tr&&/^\\\\[^\\]+(\\[^\\]+)?$/.test(e))return e;let t=js.dirname(e);return Tr&&/^\\\\[^\\]+\\[^\\]+\\$/.test(t)&&(t=wc(t)),t}me.dirname=xS;function wS(e,t){if(bn.default(e,"ensureAbsoluteRoot parameter 'root' must not be empty"),bn.default(t,"ensureAbsoluteRoot parameter 'itemPath' must not be empty"),xc(t))return t;if(Tr){if(t.match(/^[A-Z]:[^\\/]|^[A-Z]:$/i)){let r=process.cwd();return bn.default(r.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${r}'`),t[0].toUpperCase()===r[0].toUpperCase()?t.length===2?`${t[0]}:\\${r.substr(3)}`:(r.endsWith("\\")||(r+="\\"),`${t[0]}:\\${r.substr(3)}${t.substr(2)}`):`${t[0]}:\\${t.substr(2)}`}else if(_o(t).match(/^\\$|^\\[^\\]/)){let r=process.cwd();return bn.default(r.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${r}'`),`${r[0]}:\\${t.substr(1)}`}}return bn.default(xc(e),"ensureAbsoluteRoot parameter 'root' must have an absolute root"),e.endsWith("/")||Tr&&e.endsWith("\\")||(e+=js.sep),e+t}me.ensureAbsoluteRoot=wS;function xc(e){return bn.default(e,"hasAbsoluteRoot parameter 'itemPath' must not be empty"),e=_o(e),Tr?e.startsWith("\\\\")||/^[A-Z]:\\/i.test(e):e.startsWith("/")}me.hasAbsoluteRoot=xc;function bS(e){return bn.default(e,"isRooted parameter 'itemPath' must not be empty"),e=_o(e),Tr?e.startsWith("\\")||/^[A-Z]:/i.test(e):e.startsWith("/")}me.hasRoot=bS;function _o(e){return e=e||"",Tr?(e=e.replace(/\//g,"\\"),(/^\\\\+[^\\]/.test(e)?"\\":"")+e.replace(/\\\\+/g,"\\")):e.replace(/\/\/+/g,"/")}me.normalizeSeparators=_o;function wc(e){return e?(e=_o(e),!e.endsWith(js.sep)||e===js.sep||Tr&&/^[A-Z]:\\$/i.test(e)?e:e.substr(0,e.length-1)):""}me.safeTrimTrailingSeparator=wc});var Gs=T(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.MatchKind=void 0;var SS;(function(e){e[e.None=0]="None",e[e.Directory=1]="Directory",e[e.File=2]="File",e[e.All=3]="All"})(SS=Ro.MatchKind||(Ro.MatchKind={}))});var Mu=T(et=>{"use strict";var AS=et&&et.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),_S=et&&et.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),RS=et&&et.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&AS(t,e,r);return _S(t,e),t};Object.defineProperty(et,"__esModule",{value:!0});et.partialMatch=et.match=et.getSearchPaths=void 0;var Du=RS(qs()),vS=Gs(),Bu=process.platform==="win32";function TS(e){e=e.filter(n=>!n.negate);let t={};for(let n of e){let o=Bu?n.searchPath.toUpperCase():n.searchPath;t[o]="candidate"}let r=[];for(let n of e){let o=Bu?n.searchPath.toUpperCase():n.searchPath;if(t[o]==="included")continue;let s=!1,i=o,a=Du.dirname(i);for(;a!==i;){if(t[a]){s=!0;break}i=a,a=Du.dirname(i)}s||(r.push(n.searchPath),t[o]="included")}return r}et.getSearchPaths=TS;function kS(e,t){let r=vS.MatchKind.None;for(let n of e)n.negate?r&=~n.match(t):r|=n.match(t);return r}et.match=kS;function NS(e,t){return e.some(r=>!r.negate&&r.partialMatch(t))}et.partialMatch=NS});var Fu=T((uI,Lu)=>{"use strict";Lu.exports=function(e,t){for(var r=[],n=0;n<e.length;n++){var o=t(e[n],n);PS(o)?r.push.apply(r,o):r.push(o)}return r};var PS=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}});var qu=T((mI,ju)=>{"use strict";ju.exports=$u;function $u(e,t,r){e instanceof RegExp&&(e=zu(e,r)),t instanceof RegExp&&(t=zu(t,r));var n=Uu(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function zu(e,t){var r=t.match(e);return r?r[0]:null}$u.range=Uu;function Uu(e,t,r){var n,o,s,i,a,c=r.indexOf(e),d=r.indexOf(t,c+1),l=c;if(c>=0&&d>0){if(e===t)return[c,d];for(n=[],s=r.length;l>=0&&!a;)l==c?(n.push(l),c=r.indexOf(e,l+1)):n.length==1?a=[n.pop(),d]:(o=n.pop(),o<s&&(s=o,i=d),d=r.indexOf(t,l+1)),l=c<d&&c>=0?c:d;n.length&&(a=[s,i])}return a}});var Qu=T((hI,Xu)=>{"use strict";var OS=Fu(),Gu=qu();Xu.exports=BS;var Ku="\0SLASH"+Math.random()+"\0",Hu="\0OPEN"+Math.random()+"\0",Sc="\0CLOSE"+Math.random()+"\0",Vu="\0COMMA"+Math.random()+"\0",Wu="\0PERIOD"+Math.random()+"\0";function bc(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function IS(e){return e.split("\\\\").join(Ku).split("\\{").join(Hu).split("\\}").join(Sc).split("\\,").join(Vu).split("\\.").join(Wu)}function DS(e){return e.split(Ku).join("\\").split(Hu).join("{").split(Sc).join("}").split(Vu).join(",").split(Wu).join(".")}function Yu(e){if(!e)return[""];var t=[],r=Gu("{","}",e);if(!r)return e.split(",");var n=r.pre,o=r.body,s=r.post,i=n.split(",");i[i.length-1]+="{"+o+"}";var a=Yu(s);return s.length&&(i[i.length-1]+=a.shift(),i.push.apply(i,a)),t.push.apply(t,i),t}function BS(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),Gn(IS(e),!0).map(DS)):[]}function MS(e){return"{"+e+"}"}function LS(e){return/^-?0\d/.test(e)}function FS(e,t){return e<=t}function zS(e,t){return e>=t}function Gn(e,t){var r=[],n=Gu("{","}",e);if(!n||/\$$/.test(n.pre))return[e];var o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),i=o||s,a=n.body.indexOf(",")>=0;if(!i&&!a)return n.post.match(/,.*\}/)?(e=n.pre+"{"+n.body+Sc+n.post,Gn(e)):[e];var c;if(i)c=n.body.split(/\.\./);else if(c=Yu(n.body),c.length===1&&(c=Gn(c[0],!1).map(MS),c.length===1)){var l=n.post.length?Gn(n.post,!1):[""];return l.map(function(za){return n.pre+c[0]+za})}var d=n.pre,l=n.post.length?Gn(n.post,!1):[""],f;if(i){var u=bc(c[0]),y=bc(c[1]),x=Math.max(c[0].length,c[1].length),w=c.length==3?Math.abs(bc(c[2])):1,A=FS,G=y<u;G&&(w*=-1,A=zS);var le=c.some(LS);f=[];for(var We=u;A(We,y);We+=w){var Le;if(s)Le=String.fromCharCode(We),Le==="\\"&&(Le="");else if(Le=String(We),le){var br=x-Le.length;if(br>0){var Ss=new Array(br+1).join("0");We<0?Le="-"+Ss+Le.slice(1):Le=Ss+Le}}f.push(Le)}}else f=OS(c,function(As){return Gn(As,!1)});for(var Bn=0;Bn<f.length;Bn++)for(var xn=0;xn<l.length;xn++){var er=d+f[Bn]+l[xn];(!t||i||er)&&r.push(er)}return r}});var nm=T((pI,rm)=>{"use strict";rm.exports=at;at.Minimatch=Ne;var vo=function(){try{return I("path")}catch{}}()||{sep:"/"};at.sep=vo.sep;var Rc=at.GLOBSTAR=Ne.GLOBSTAR={},$S=Qu(),Ju={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Ac="[^/]",_c=Ac+"*?",US="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",jS="(?:(?!(?:\\/|^)\\.).)*?",Zu=qS("().*{}+?[]^$\\!");function qS(e){return e.split("").reduce(function(t,r){return t[r]=!0,t},{})}var em=/\/+/;at.filter=GS;function GS(e,t){return t=t||{},function(r,n,o){return at(r,e,t)}}function kr(e,t){t=t||{};var r={};return Object.keys(e).forEach(function(n){r[n]=e[n]}),Object.keys(t).forEach(function(n){r[n]=t[n]}),r}at.defaults=function(e){if(!e||typeof e!="object"||!Object.keys(e).length)return at;var t=at,r=function(o,s,i){return t(o,s,kr(e,i))};return r.Minimatch=function(o,s){return new t.Minimatch(o,kr(e,s))},r.Minimatch.defaults=function(o){return t.defaults(kr(e,o)).Minimatch},r.filter=function(o,s){return t.filter(o,kr(e,s))},r.defaults=function(o){return t.defaults(kr(e,o))},r.makeRe=function(o,s){return t.makeRe(o,kr(e,s))},r.braceExpand=function(o,s){return t.braceExpand(o,kr(e,s))},r.match=function(n,o,s){return t.match(n,o,kr(e,s))},r};Ne.defaults=function(e){return at.defaults(e).Minimatch};function at(e,t,r){return Hs(t),r||(r={}),!r.nocomment&&t.charAt(0)==="#"?!1:new Ne(t,r).match(e)}function Ne(e,t){if(!(this instanceof Ne))return new Ne(e,t);Hs(e),t||(t={}),e=e.trim(),!t.allowWindowsEscape&&vo.sep!=="/"&&(e=e.split(vo.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}Ne.prototype.debug=function(){};Ne.prototype.make=KS;function KS(){var e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,r),r=this.globParts=r.map(function(n){return n.split(em)}),this.debug(this.pattern,r),r=r.map(function(n,o,s){return n.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}Ne.prototype.parseNegate=HS;function HS(){var e=this.pattern,t=!1,r=this.options,n=0;if(!r.nonegate){for(var o=0,s=e.length;o<s&&e.charAt(o)==="!";o++)t=!t,n++;n&&(this.pattern=e.substr(n)),this.negate=t}}at.braceExpand=function(e,t){return tm(e,t)};Ne.prototype.braceExpand=tm;function tm(e,t){return t||(this instanceof Ne?t=this.options:t={}),e=typeof e>"u"?this.pattern:e,Hs(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:$S(e)}var VS=1024*64,Hs=function(e){if(typeof e!="string")throw new TypeError("invalid pattern");if(e.length>VS)throw new TypeError("pattern is too long")};Ne.prototype.parse=WS;var Ks={};function WS(e,t){Hs(e);var r=this.options;if(e==="**")if(r.noglobstar)e="*";else return Rc;if(e==="")return"";var n="",o=!!r.nocase,s=!1,i=[],a=[],c,d=!1,l=-1,f=-1,u=e.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",y=this;function x(){if(c){switch(c){case"*":n+=_c,o=!0;break;case"?":n+=Ac,o=!0;break;default:n+="\\"+c;break}y.debug("clearStateChar %j %j",c,n),c=!1}}for(var w=0,A=e.length,G;w<A&&(G=e.charAt(w));w++){if(this.debug("%s	%s %s %j",e,w,n,G),s&&Zu[G]){n+="\\"+G,s=!1;continue}switch(G){case"/":return!1;case"\\":x(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,w,n,G),d){this.debug("  in class"),G==="!"&&w===f+1&&(G="^"),n+=G;continue}y.debug("call clearStateChar %j",c),x(),c=G,r.noext&&x();continue;case"(":if(d){n+="(";continue}if(!c){n+="\\(";continue}i.push({type:c,start:w-1,reStart:n.length,open:Ju[c].open,close:Ju[c].close}),n+=c==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",c,n),c=!1;continue;case")":if(d||!i.length){n+="\\)";continue}x(),o=!0;var le=i.pop();n+=le.close,le.type==="!"&&a.push(le),le.reEnd=n.length;continue;case"|":if(d||!i.length||s){n+="\\|",s=!1;continue}x(),n+="|";continue;case"[":if(x(),d){n+="\\"+G;continue}d=!0,f=w,l=n.length,n+=G;continue;case"]":if(w===f+1||!d){n+="\\"+G,s=!1;continue}var We=e.substring(f+1,w);try{RegExp("["+We+"]")}catch{var Le=this.parse(We,Ks);n=n.substr(0,l)+"\\["+Le[0]+"\\]",o=o||Le[1],d=!1;continue}o=!0,d=!1,n+=G;continue;default:x(),s?s=!1:Zu[G]&&!(G==="^"&&d)&&(n+="\\"),n+=G}}for(d&&(We=e.substr(f+1),Le=this.parse(We,Ks),n=n.substr(0,l)+"\\["+Le[0],o=o||Le[1]),le=i.pop();le;le=i.pop()){var br=n.slice(le.reStart+le.open.length);this.debug("setting tail",n,le),br=br.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(gf,Ef,ja){return ja||(ja="\\"),Ef+Ef+ja+"|"}),this.debug(`tail=%j
   %s`,br,br,le,n);var Ss=le.type==="*"?_c:le.type==="?"?Ac:"\\"+le.type;o=!0,n=n.slice(0,le.reStart)+Ss+"\\("+br}x(),s&&(n+="\\\\");var Bn=!1;switch(n.charAt(0)){case"[":case".":case"(":Bn=!0}for(var xn=a.length-1;xn>-1;xn--){var er=a[xn],As=n.slice(0,er.reStart),za=n.slice(er.reStart,er.reEnd-8),pf=n.slice(er.reEnd-8,er.reEnd),xo=n.slice(er.reEnd);pf+=xo;var nw=As.split("(").length-1,$a=xo;for(w=0;w<nw;w++)$a=$a.replace(/\)[+*?]?/,"");xo=$a;var yf="";xo===""&&t!==Ks&&(yf="$");var ow=As+za+xo+yf+pf;n=ow}if(n!==""&&o&&(n="(?=.)"+n),Bn&&(n=u+n),t===Ks)return[n,o];if(!o)return XS(e);var sw=r.nocase?"i":"";try{var Ua=new RegExp("^"+n+"$",sw)}catch{return new RegExp("$.")}return Ua._glob=e,Ua._src=n,Ua}at.makeRe=function(e,t){return new Ne(e,t||{}).makeRe()};Ne.prototype.makeRe=YS;function YS(){if(this.regexp||this.regexp===!1)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?_c:t.dot?US:jS,n=t.nocase?"i":"",o=e.map(function(s){return s.map(function(i){return i===Rc?r:typeof i=="string"?QS(i):i._src}).join("\\/")}).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,n)}catch{this.regexp=!1}return this.regexp}at.match=function(e,t,r){r=r||{};var n=new Ne(t,r);return e=e.filter(function(o){return n.match(o)}),n.options.nonull&&!e.length&&e.push(t),e};Ne.prototype.match=function(t,r){if(typeof r>"u"&&(r=this.partial),this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&r)return!0;var n=this.options;vo.sep!=="/"&&(t=t.split(vo.sep).join("/")),t=t.split(em),this.debug(this.pattern,"split",t);var o=this.set;this.debug(this.pattern,"set",o);var s,i;for(i=t.length-1;i>=0&&(s=t[i],!s);i--);for(i=0;i<o.length;i++){var a=o[i],c=t;n.matchBase&&a.length===1&&(c=[s]);var d=this.matchOne(c,a,r);if(d)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate};Ne.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,i=e.length,a=t.length;o<i&&s<a;o++,s++){this.debug("matchOne loop");var c=t[s],d=e[o];if(this.debug(t,c,d),c===!1)return!1;if(c===Rc){this.debug("GLOBSTAR",[t,c,d]);var l=o,f=s+1;if(f===a){for(this.debug("** at the end");o<i;o++)if(e[o]==="."||e[o]===".."||!n.dot&&e[o].charAt(0)===".")return!1;return!0}for(;l<i;){var u=e[l];if(this.debug(`
globstar while`,e,l,t,f,u),this.matchOne(e.slice(l),t.slice(f),r))return this.debug("globstar found match!",l,i,u),!0;if(u==="."||u===".."||!n.dot&&u.charAt(0)==="."){this.debug("dot detected!",e,l,t,f);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,l,t,f),l===i))}var y;if(typeof c=="string"?(y=d===c,this.debug("string match",c,d,y)):(y=d.match(c),this.debug("pattern match",c,d,y)),!y)return!1}if(o===i&&s===a)return!0;if(o===i)return r;if(s===a)return o===i-1&&e[o]==="";throw new Error("wtf?")};function XS(e){return e.replace(/\\(.)/g,"$1")}function QS(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var sm=T(mt=>{"use strict";var JS=mt&&mt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ZS=mt&&mt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),om=mt&&mt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&JS(t,e,r);return ZS(t,e),t},e0=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mt,"__esModule",{value:!0});mt.Path=void 0;var To=om(I("path")),Nr=om(qs()),ko=e0(I("assert")),t0=process.platform==="win32",vc=class{constructor(t){if(this.segments=[],typeof t=="string")if(ko.default(t,"Parameter 'itemPath' must not be empty"),t=Nr.safeTrimTrailingSeparator(t),!Nr.hasRoot(t))this.segments=t.split(To.sep);else{let r=t,n=Nr.dirname(r);for(;n!==r;){let o=To.basename(r);this.segments.unshift(o),r=n,n=Nr.dirname(r)}this.segments.unshift(r)}else{ko.default(t.length>0,"Parameter 'itemPath' must not be an empty array");for(let r=0;r<t.length;r++){let n=t[r];ko.default(n,"Parameter 'itemPath' must not contain any empty segments"),n=Nr.normalizeSeparators(t[r]),r===0&&Nr.hasRoot(n)?(n=Nr.safeTrimTrailingSeparator(n),ko.default(n===Nr.dirname(n),"Parameter 'itemPath' root segment contains information for multiple segments"),this.segments.push(n)):(ko.default(!n.includes(To.sep),"Parameter 'itemPath' contains unexpected path separators"),this.segments.push(n))}}}toString(){let t=this.segments[0],r=t.endsWith(To.sep)||t0&&/^[A-Z]:$/i.test(t);for(let n=1;n<this.segments.length;n++)r?r=!1:t+=To.sep,t+=this.segments[n];return t}};mt.Path=vc});var im=T(ht=>{"use strict";var r0=ht&&ht.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),n0=ht&&ht.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Nc=ht&&ht.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&r0(t,e,r);return n0(t,e),t},o0=ht&&ht.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ht,"__esModule",{value:!0});ht.Pattern=void 0;var s0=Nc(I("os")),No=Nc(I("path")),tt=Nc(qs()),Sn=o0(I("assert")),i0=nm(),Tc=Gs(),Vs=sm(),nr=process.platform==="win32",kc=class e{constructor(t,r=!1,n,o){this.negate=!1;let s;if(typeof t=="string")s=t.trim();else{n=n||[],Sn.default(n.length,"Parameter 'segments' must not empty");let d=e.getLiteral(n[0]);Sn.default(d&&tt.hasAbsoluteRoot(d),"Parameter 'segments' first element must be a root path"),s=new Vs.Path(n).toString().trim(),t&&(s=`!${s}`)}for(;s.startsWith("!");)this.negate=!this.negate,s=s.substr(1).trim();s=e.fixupPattern(s,o),this.segments=new Vs.Path(s).segments,this.trailingSeparator=tt.normalizeSeparators(s).endsWith(No.sep),s=tt.safeTrimTrailingSeparator(s);let i=!1,a=this.segments.map(d=>e.getLiteral(d)).filter(d=>!i&&!(i=d===""));this.searchPath=new Vs.Path(a).toString(),this.rootRegExp=new RegExp(e.regExpEscape(a[0]),nr?"i":""),this.isImplicitPattern=r;let c={dot:!0,nobrace:!0,nocase:nr,nocomment:!0,noext:!0,nonegate:!0};s=nr?s.replace(/\\/g,"/"):s,this.minimatch=new i0.Minimatch(s,c)}match(t){return this.segments[this.segments.length-1]==="**"?(t=tt.normalizeSeparators(t),!t.endsWith(No.sep)&&this.isImplicitPattern===!1&&(t=`${t}${No.sep}`)):t=tt.safeTrimTrailingSeparator(t),this.minimatch.match(t)?this.trailingSeparator?Tc.MatchKind.Directory:Tc.MatchKind.All:Tc.MatchKind.None}partialMatch(t){return t=tt.safeTrimTrailingSeparator(t),tt.dirname(t)===t?this.rootRegExp.test(t):this.minimatch.matchOne(t.split(nr?/\\+/:/\/+/),this.minimatch.set[0],!0)}static globEscape(t){return(nr?t:t.replace(/\\/g,"\\\\")).replace(/(\[)(?=[^/]+\])/g,"[[]").replace(/\?/g,"[?]").replace(/\*/g,"[*]")}static fixupPattern(t,r){Sn.default(t,"pattern cannot be empty");let n=new Vs.Path(t).segments.map(o=>e.getLiteral(o));if(Sn.default(n.every((o,s)=>(o!=="."||s===0)&&o!==".."),`Invalid pattern '${t}'. Relative pathing '.' and '..' is not allowed.`),Sn.default(!tt.hasRoot(t)||n[0],`Invalid pattern '${t}'. Root segment must not contain globs.`),t=tt.normalizeSeparators(t),t==="."||t.startsWith(`.${No.sep}`))t=e.globEscape(process.cwd())+t.substr(1);else if(t==="~"||t.startsWith(`~${No.sep}`))r=r||s0.homedir(),Sn.default(r,"Unable to determine HOME directory"),Sn.default(tt.hasAbsoluteRoot(r),`Expected HOME directory to be a rooted path. Actual '${r}'`),t=e.globEscape(r)+t.substr(1);else if(nr&&(t.match(/^[A-Z]:$/i)||t.match(/^[A-Z]:[^\\]/i))){let o=tt.ensureAbsoluteRoot("C:\\dummy-root",t.substr(0,2));t.length>2&&!o.endsWith("\\")&&(o+="\\"),t=e.globEscape(o)+t.substr(2)}else if(nr&&(t==="\\"||t.match(/^\\[^\\]/))){let o=tt.ensureAbsoluteRoot("C:\\dummy-root","\\");o.endsWith("\\")||(o+="\\"),t=e.globEscape(o)+t.substr(1)}else t=tt.ensureAbsoluteRoot(e.globEscape(process.cwd()),t);return tt.normalizeSeparators(t)}static getLiteral(t){let r="";for(let n=0;n<t.length;n++){let o=t[n];if(o==="\\"&&!nr&&n+1<t.length){r+=t[++n];continue}else{if(o==="*"||o==="?")return"";if(o==="["&&n+1<t.length){let s="",i=-1;for(let a=n+1;a<t.length;a++){let c=t[a];if(c==="\\"&&!nr&&a+1<t.length){s+=t[++a];continue}else if(c==="]"){i=a;break}else s+=c}if(i>=0){if(s.length>1)return"";if(s){r+=s,n=i;continue}}}}r+=o}return r}static regExpEscape(t){return t.replace(/[[\\^$.|?*+()]/g,"\\$&")}};ht.Pattern=kc});var am=T(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.SearchState=void 0;var Pc=class{constructor(t,r){this.path=t,this.level=r}};Ws.SearchState=Pc});var um=T(Ae=>{"use strict";var a0=Ae&&Ae.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),c0=Ae&&Ae.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Oo=Ae&&Ae.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&a0(t,e,r);return c0(t,e),t},Oc=Ae&&Ae.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})},d0=Ae&&Ae.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,c){i=e[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},i)}},Pr=Ae&&Ae.__await||function(e){return this instanceof Pr?(this.v=e,this):new Pr(e)},l0=Ae&&Ae.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o;function i(u){n[u]&&(o[u]=function(y){return new Promise(function(x,w){s.push([u,y,x,w])>1||a(u,y)})})}function a(u,y){try{c(n[u](y))}catch(x){f(s[0][3],x)}}function c(u){u.value instanceof Pr?Promise.resolve(u.value.v).then(d,l):f(s[0][2],u)}function d(u){a("next",u)}function l(u){a("throw",u)}function f(u,y){u(y),s.shift(),s.length&&a(s[0][0],s[0][1])}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.DefaultGlobber=void 0;var Ic=Oo(Un()),Po=Oo(I("fs")),cm=Oo(Iu()),f0=Oo(I("path")),Ys=Oo(Mu()),dm=Gs(),lm=im(),fm=am(),u0=process.platform==="win32",Dc=class e{constructor(t){this.patterns=[],this.searchPaths=[],this.options=cm.getOptions(t)}getSearchPaths(){return this.searchPaths.slice()}glob(){var t,r;return Oc(this,void 0,void 0,function*(){let n=[];try{for(var o=d0(this.globGenerator()),s;s=yield o.next(),!s.done;){let i=s.value;n.push(i)}}catch(i){t={error:i}}finally{try{s&&!s.done&&(r=o.return)&&(yield r.call(o))}finally{if(t)throw t.error}}return n})}globGenerator(){return l0(this,arguments,function*(){let r=cm.getOptions(this.options),n=[];for(let i of this.patterns)n.push(i),r.implicitDescendants&&(i.trailingSeparator||i.segments[i.segments.length-1]!=="**")&&n.push(new lm.Pattern(i.negate,!0,i.segments.concat("**")));let o=[];for(let i of Ys.getSearchPaths(n)){Ic.debug(`Search path '${i}'`);try{yield Pr(Po.promises.lstat(i))}catch(a){if(a.code==="ENOENT")continue;throw a}o.unshift(new fm.SearchState(i,1))}let s=[];for(;o.length;){let i=o.pop(),a=Ys.match(n,i.path),c=!!a||Ys.partialMatch(n,i.path);if(!a&&!c)continue;let d=yield Pr(e.stat(i,r,s));if(d)if(d.isDirectory()){if(a&dm.MatchKind.Directory)yield yield Pr(i.path);else if(!c)continue;let l=i.level+1,f=(yield Pr(Po.promises.readdir(i.path))).map(u=>new fm.SearchState(f0.join(i.path,u),l));o.push(...f.reverse())}else a&dm.MatchKind.File&&(yield yield Pr(i.path))}})}static create(t,r){return Oc(this,void 0,void 0,function*(){let n=new e(r);u0&&(t=t.replace(/\r\n/g,`
`),t=t.replace(/\r/g,`
`));let o=t.split(`
`).map(s=>s.trim());for(let s of o)!s||s.startsWith("#")||n.patterns.push(new lm.Pattern(s));return n.searchPaths.push(...Ys.getSearchPaths(n.patterns)),n})}static stat(t,r,n){return Oc(this,void 0,void 0,function*(){let o;if(r.followSymbolicLinks)try{o=yield Po.promises.stat(t.path)}catch(s){if(s.code==="ENOENT"){if(r.omitBrokenSymbolicLinks){Ic.debug(`Broken symlink '${t.path}'`);return}throw new Error(`No information found for the path '${t.path}'. This may indicate a broken symbolic link.`)}throw s}else o=yield Po.promises.lstat(t.path);if(o.isDirectory()&&r.followSymbolicLinks){let s=yield Po.promises.realpath(t.path);for(;n.length>=t.level;)n.pop();if(n.some(i=>i===s)){Ic.debug(`Symlink cycle detected for path '${t.path}' and realpath '${s}'`);return}n.push(s)}return o})}};Ae.DefaultGlobber=Dc});var mm=T(Kn=>{"use strict";var m0=Kn&&Kn.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.create=void 0;var h0=um();function p0(e,t){return m0(this,void 0,void 0,function*(){return yield h0.DefaultGlobber.create(e,t)})}Kn.create=p0});var Cm=T((B,Em)=>{"use strict";B=Em.exports=z;var ee;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?ee=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:ee=function(){};B.SEMVER_SPEC_VERSION="2.0.0";var Io=256,Xs=Number.MAX_SAFE_INTEGER||9007199254740991,Bc=16,y0=Io-6,Hn=B.re=[],Z=B.safeRe=[],g=B.src=[],p=B.tokens={},ym=0;function j(e){p[e]=ym++}var Lc="[a-zA-Z0-9-]",Mc=[["\\s",1],["\\d",Io],[Lc,y0]];function Bo(e){for(var t=0;t<Mc.length;t++){var r=Mc[t][0],n=Mc[t][1];e=e.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return e}j("NUMERICIDENTIFIER");g[p.NUMERICIDENTIFIER]="0|[1-9]\\d*";j("NUMERICIDENTIFIERLOOSE");g[p.NUMERICIDENTIFIERLOOSE]="\\d+";j("NONNUMERICIDENTIFIER");g[p.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-]"+Lc+"*";j("MAINVERSION");g[p.MAINVERSION]="("+g[p.NUMERICIDENTIFIER]+")\\.("+g[p.NUMERICIDENTIFIER]+")\\.("+g[p.NUMERICIDENTIFIER]+")";j("MAINVERSIONLOOSE");g[p.MAINVERSIONLOOSE]="("+g[p.NUMERICIDENTIFIERLOOSE]+")\\.("+g[p.NUMERICIDENTIFIERLOOSE]+")\\.("+g[p.NUMERICIDENTIFIERLOOSE]+")";j("PRERELEASEIDENTIFIER");g[p.PRERELEASEIDENTIFIER]="(?:"+g[p.NUMERICIDENTIFIER]+"|"+g[p.NONNUMERICIDENTIFIER]+")";j("PRERELEASEIDENTIFIERLOOSE");g[p.PRERELEASEIDENTIFIERLOOSE]="(?:"+g[p.NUMERICIDENTIFIERLOOSE]+"|"+g[p.NONNUMERICIDENTIFIER]+")";j("PRERELEASE");g[p.PRERELEASE]="(?:-("+g[p.PRERELEASEIDENTIFIER]+"(?:\\."+g[p.PRERELEASEIDENTIFIER]+")*))";j("PRERELEASELOOSE");g[p.PRERELEASELOOSE]="(?:-?("+g[p.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+g[p.PRERELEASEIDENTIFIERLOOSE]+")*))";j("BUILDIDENTIFIER");g[p.BUILDIDENTIFIER]=Lc+"+";j("BUILD");g[p.BUILD]="(?:\\+("+g[p.BUILDIDENTIFIER]+"(?:\\."+g[p.BUILDIDENTIFIER]+")*))";j("FULL");j("FULLPLAIN");g[p.FULLPLAIN]="v?"+g[p.MAINVERSION]+g[p.PRERELEASE]+"?"+g[p.BUILD]+"?";g[p.FULL]="^"+g[p.FULLPLAIN]+"$";j("LOOSEPLAIN");g[p.LOOSEPLAIN]="[v=\\s]*"+g[p.MAINVERSIONLOOSE]+g[p.PRERELEASELOOSE]+"?"+g[p.BUILD]+"?";j("LOOSE");g[p.LOOSE]="^"+g[p.LOOSEPLAIN]+"$";j("GTLT");g[p.GTLT]="((?:<|>)?=?)";j("XRANGEIDENTIFIERLOOSE");g[p.XRANGEIDENTIFIERLOOSE]=g[p.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*";j("XRANGEIDENTIFIER");g[p.XRANGEIDENTIFIER]=g[p.NUMERICIDENTIFIER]+"|x|X|\\*";j("XRANGEPLAIN");g[p.XRANGEPLAIN]="[v=\\s]*("+g[p.XRANGEIDENTIFIER]+")(?:\\.("+g[p.XRANGEIDENTIFIER]+")(?:\\.("+g[p.XRANGEIDENTIFIER]+")(?:"+g[p.PRERELEASE]+")?"+g[p.BUILD]+"?)?)?";j("XRANGEPLAINLOOSE");g[p.XRANGEPLAINLOOSE]="[v=\\s]*("+g[p.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+g[p.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+g[p.XRANGEIDENTIFIERLOOSE]+")(?:"+g[p.PRERELEASELOOSE]+")?"+g[p.BUILD]+"?)?)?";j("XRANGE");g[p.XRANGE]="^"+g[p.GTLT]+"\\s*"+g[p.XRANGEPLAIN]+"$";j("XRANGELOOSE");g[p.XRANGELOOSE]="^"+g[p.GTLT]+"\\s*"+g[p.XRANGEPLAINLOOSE]+"$";j("COERCE");g[p.COERCE]="(^|[^\\d])(\\d{1,"+Bc+"})(?:\\.(\\d{1,"+Bc+"}))?(?:\\.(\\d{1,"+Bc+"}))?(?:$|[^\\d])";j("COERCERTL");Hn[p.COERCERTL]=new RegExp(g[p.COERCE],"g");Z[p.COERCERTL]=new RegExp(Bo(g[p.COERCE]),"g");j("LONETILDE");g[p.LONETILDE]="(?:~>?)";j("TILDETRIM");g[p.TILDETRIM]="(\\s*)"+g[p.LONETILDE]+"\\s+";Hn[p.TILDETRIM]=new RegExp(g[p.TILDETRIM],"g");Z[p.TILDETRIM]=new RegExp(Bo(g[p.TILDETRIM]),"g");var g0="$1~";j("TILDE");g[p.TILDE]="^"+g[p.LONETILDE]+g[p.XRANGEPLAIN]+"$";j("TILDELOOSE");g[p.TILDELOOSE]="^"+g[p.LONETILDE]+g[p.XRANGEPLAINLOOSE]+"$";j("LONECARET");g[p.LONECARET]="(?:\\^)";j("CARETTRIM");g[p.CARETTRIM]="(\\s*)"+g[p.LONECARET]+"\\s+";Hn[p.CARETTRIM]=new RegExp(g[p.CARETTRIM],"g");Z[p.CARETTRIM]=new RegExp(Bo(g[p.CARETTRIM]),"g");var E0="$1^";j("CARET");g[p.CARET]="^"+g[p.LONECARET]+g[p.XRANGEPLAIN]+"$";j("CARETLOOSE");g[p.CARETLOOSE]="^"+g[p.LONECARET]+g[p.XRANGEPLAINLOOSE]+"$";j("COMPARATORLOOSE");g[p.COMPARATORLOOSE]="^"+g[p.GTLT]+"\\s*("+g[p.LOOSEPLAIN]+")$|^$";j("COMPARATOR");g[p.COMPARATOR]="^"+g[p.GTLT]+"\\s*("+g[p.FULLPLAIN]+")$|^$";j("COMPARATORTRIM");g[p.COMPARATORTRIM]="(\\s*)"+g[p.GTLT]+"\\s*("+g[p.LOOSEPLAIN]+"|"+g[p.XRANGEPLAIN]+")";Hn[p.COMPARATORTRIM]=new RegExp(g[p.COMPARATORTRIM],"g");Z[p.COMPARATORTRIM]=new RegExp(Bo(g[p.COMPARATORTRIM]),"g");var C0="$1$2$3";j("HYPHENRANGE");g[p.HYPHENRANGE]="^\\s*("+g[p.XRANGEPLAIN]+")\\s+-\\s+("+g[p.XRANGEPLAIN]+")\\s*$";j("HYPHENRANGELOOSE");g[p.HYPHENRANGELOOSE]="^\\s*("+g[p.XRANGEPLAINLOOSE]+")\\s+-\\s+("+g[p.XRANGEPLAINLOOSE]+")\\s*$";j("STAR");g[p.STAR]="(<|>)?=?\\s*\\*";for(Bt=0;Bt<ym;Bt++)ee(Bt,g[Bt]),Hn[Bt]||(Hn[Bt]=new RegExp(g[Bt]),Z[Bt]=new RegExp(Bo(g[Bt])));var Bt;B.parse=_n;function _n(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof z)return e;if(typeof e!="string"||e.length>Io)return null;var r=t.loose?Z[p.LOOSE]:Z[p.FULL];if(!r.test(e))return null;try{return new z(e,t)}catch{return null}}B.valid=x0;function x0(e,t){var r=_n(e,t);return r?r.version:null}B.clean=w0;function w0(e,t){var r=_n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}B.SemVer=z;function z(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof z){if(e.loose===t.loose)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>Io)throw new TypeError("version is longer than "+Io+" characters");if(!(this instanceof z))return new z(e,t);ee("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?Z[p.LOOSE]:Z[p.FULL]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Xs||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Xs||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Xs||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var o=+n;if(o>=0&&o<Xs)return o}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}z.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};z.prototype.toString=function(){return this.version};z.prototype.compare=function(e){return ee("SemVer.compare",this.version,this.options,e),e instanceof z||(e=new z(e,this.options)),this.compareMain(e)||this.comparePre(e)};z.prototype.compareMain=function(e){return e instanceof z||(e=new z(e,this.options)),An(this.major,e.major)||An(this.minor,e.minor)||An(this.patch,e.patch)};z.prototype.comparePre=function(e){if(e instanceof z||(e=new z(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(ee("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return An(r,n)}while(++t)};z.prototype.compareBuild=function(e){e instanceof z||(e=new z(e,this.options));var t=0;do{var r=this.build[t],n=e.build[t];if(ee("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return An(r,n)}while(++t)};z.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};B.inc=b0;function b0(e,t,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new z(e,r).inc(t,n).version}catch{return null}}B.diff=S0;function S0(e,t){if(Fc(e,t))return null;var r=_n(e),n=_n(t),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var s="prerelease"}for(var i in r)if((i==="major"||i==="minor"||i==="patch")&&r[i]!==n[i])return o+i;return s}B.compareIdentifiers=An;var hm=/^[0-9]+$/;function An(e,t){var r=hm.test(e),n=hm.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}B.rcompareIdentifiers=A0;function A0(e,t){return An(t,e)}B.major=_0;function _0(e,t){return new z(e,t).major}B.minor=R0;function R0(e,t){return new z(e,t).minor}B.patch=v0;function v0(e,t){return new z(e,t).patch}B.compare=or;function or(e,t,r){return new z(e,r).compare(new z(t,r))}B.compareLoose=T0;function T0(e,t){return or(e,t,!0)}B.compareBuild=k0;function k0(e,t,r){var n=new z(e,r),o=new z(t,r);return n.compare(o)||n.compareBuild(o)}B.rcompare=N0;function N0(e,t,r){return or(t,e,r)}B.sort=P0;function P0(e,t){return e.sort(function(r,n){return B.compareBuild(r,n,t)})}B.rsort=O0;function O0(e,t){return e.sort(function(r,n){return B.compareBuild(n,r,t)})}B.gt=Do;function Do(e,t,r){return or(e,t,r)>0}B.lt=Qs;function Qs(e,t,r){return or(e,t,r)<0}B.eq=Fc;function Fc(e,t,r){return or(e,t,r)===0}B.neq=gm;function gm(e,t,r){return or(e,t,r)!==0}B.gte=zc;function zc(e,t,r){return or(e,t,r)>=0}B.lte=$c;function $c(e,t,r){return or(e,t,r)<=0}B.cmp=Js;function Js(e,t,r,n){switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Fc(e,r,n);case"!=":return gm(e,r,n);case">":return Do(e,r,n);case">=":return zc(e,r,n);case"<":return Qs(e,r,n);case"<=":return $c(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}B.Comparator=pt;function pt(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof pt){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof pt))return new pt(e,t);e=e.trim().split(/\s+/).join(" "),ee("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Vn?this.value="":this.value=this.operator+this.semver.version,ee("comp",this)}var Vn={};pt.prototype.parse=function(e){var t=this.options.loose?Z[p.COMPARATORLOOSE]:Z[p.COMPARATOR],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new z(r[2],this.options.loose):this.semver=Vn};pt.prototype.toString=function(){return this.value};pt.prototype.test=function(e){if(ee("Comparator.test",e,this.options.loose),this.semver===Vn||e===Vn)return!0;if(typeof e=="string")try{e=new z(e,this.options)}catch{return!1}return Js(e,this.operator,this.semver,this.options)};pt.prototype.intersects=function(e,t){if(!(e instanceof pt))throw new TypeError("a Comparator is required");(!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1});var r;if(this.operator==="")return this.value===""?!0:(r=new fe(e.value,t),Zs(this.value,r,t));if(e.operator==="")return e.value===""?!0:(r=new fe(this.value,t),Zs(e.semver,r,t));var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),o=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),s=this.semver.version===e.semver.version,i=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=Js(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=Js(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||o||s&&i||a||c};B.Range=fe;function fe(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof fe)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new fe(e.raw,t);if(e instanceof pt)return new fe(e.value,t);if(!(this instanceof fe))return new fe(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}fe.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range};fe.prototype.toString=function(){return this.range};fe.prototype.parseRange=function(e){var t=this.options.loose,r=t?Z[p.HYPHENRANGELOOSE]:Z[p.HYPHENRANGE];e=e.replace(r,j0),ee("hyphen replace",e),e=e.replace(Z[p.COMPARATORTRIM],C0),ee("comparator trim",e,Z[p.COMPARATORTRIM]),e=e.replace(Z[p.TILDETRIM],g0),e=e.replace(Z[p.CARETTRIM],E0),e=e.split(/\s+/).join(" ");var n=t?Z[p.COMPARATORLOOSE]:Z[p.COMPARATOR],o=e.split(" ").map(function(s){return D0(s,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter(function(s){return!!s.match(n)})),o=o.map(function(s){return new pt(s,this.options)},this),o};fe.prototype.intersects=function(e,t){if(!(e instanceof fe))throw new TypeError("a Range is required");return this.set.some(function(r){return pm(r,t)&&e.set.some(function(n){return pm(n,t)&&r.every(function(o){return n.every(function(s){return o.intersects(s,t)})})})})};function pm(e,t){for(var r=!0,n=e.slice(),o=n.pop();r&&n.length;)r=n.every(function(s){return o.intersects(s,t)}),o=n.pop();return r}B.toComparators=I0;function I0(e,t){return new fe(e,t).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function D0(e,t){return ee("comp",e,t),e=L0(e,t),ee("caret",e),e=B0(e,t),ee("tildes",e),e=z0(e,t),ee("xrange",e),e=U0(e,t),ee("stars",e),e}function Ke(e){return!e||e.toLowerCase()==="x"||e==="*"}function B0(e,t){return e.trim().split(/\s+/).map(function(r){return M0(r,t)}).join(" ")}function M0(e,t){var r=t.loose?Z[p.TILDELOOSE]:Z[p.TILDE];return e.replace(r,function(n,o,s,i,a){ee("tilde",e,n,o,s,i,a);var c;return Ke(o)?c="":Ke(s)?c=">="+o+".0.0 <"+(+o+1)+".0.0":Ke(i)?c=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0":a?(ee("replaceTilde pr",a),c=">="+o+"."+s+"."+i+"-"+a+" <"+o+"."+(+s+1)+".0"):c=">="+o+"."+s+"."+i+" <"+o+"."+(+s+1)+".0",ee("tilde return",c),c})}function L0(e,t){return e.trim().split(/\s+/).map(function(r){return F0(r,t)}).join(" ")}function F0(e,t){ee("caret",e,t);var r=t.loose?Z[p.CARETLOOSE]:Z[p.CARET];return e.replace(r,function(n,o,s,i,a){ee("caret",e,n,o,s,i,a);var c;return Ke(o)?c="":Ke(s)?c=">="+o+".0.0 <"+(+o+1)+".0.0":Ke(i)?o==="0"?c=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0":c=">="+o+"."+s+".0 <"+(+o+1)+".0.0":a?(ee("replaceCaret pr",a),o==="0"?s==="0"?c=">="+o+"."+s+"."+i+"-"+a+" <"+o+"."+s+"."+(+i+1):c=">="+o+"."+s+"."+i+"-"+a+" <"+o+"."+(+s+1)+".0":c=">="+o+"."+s+"."+i+"-"+a+" <"+(+o+1)+".0.0"):(ee("no pr"),o==="0"?s==="0"?c=">="+o+"."+s+"."+i+" <"+o+"."+s+"."+(+i+1):c=">="+o+"."+s+"."+i+" <"+o+"."+(+s+1)+".0":c=">="+o+"."+s+"."+i+" <"+(+o+1)+".0.0"),ee("caret return",c),c})}function z0(e,t){return ee("replaceXRanges",e,t),e.split(/\s+/).map(function(r){return $0(r,t)}).join(" ")}function $0(e,t){e=e.trim();var r=t.loose?Z[p.XRANGELOOSE]:Z[p.XRANGE];return e.replace(r,function(n,o,s,i,a,c){ee("xRange",e,n,o,s,i,a,c);var d=Ke(s),l=d||Ke(i),f=l||Ke(a),u=f;return o==="="&&u&&(o=""),c=t.includePrerelease?"-0":"",d?o===">"||o==="<"?n="<0.0.0-0":n="*":o&&u?(l&&(i=0),a=0,o===">"?(o=">=",l?(s=+s+1,i=0,a=0):(i=+i+1,a=0)):o==="<="&&(o="<",l?s=+s+1:i=+i+1),n=o+s+"."+i+"."+a+c):l?n=">="+s+".0.0"+c+" <"+(+s+1)+".0.0"+c:f&&(n=">="+s+"."+i+".0"+c+" <"+s+"."+(+i+1)+".0"+c),ee("xRange return",n),n})}function U0(e,t){return ee("replaceStars",e,t),e.trim().replace(Z[p.STAR],"")}function j0(e,t,r,n,o,s,i,a,c,d,l,f,u){return Ke(r)?t="":Ke(n)?t=">="+r+".0.0":Ke(o)?t=">="+r+"."+n+".0":t=">="+t,Ke(c)?a="":Ke(d)?a="<"+(+c+1)+".0.0":Ke(l)?a="<"+c+"."+(+d+1)+".0":f?a="<="+c+"."+d+"."+l+"-"+f:a="<="+a,(t+" "+a).trim()}fe.prototype.test=function(e){if(!e)return!1;if(typeof e=="string")try{e=new z(e,this.options)}catch{return!1}for(var t=0;t<this.set.length;t++)if(q0(this.set[t],e,this.options))return!0;return!1};function q0(e,t,r){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++)if(ee(e[n].semver),e[n].semver!==Vn&&e[n].semver.prerelease.length>0){var o=e[n].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}B.satisfies=Zs;function Zs(e,t,r){try{t=new fe(t,r)}catch{return!1}return t.test(e)}B.maxSatisfying=G0;function G0(e,t,r){var n=null,o=null;try{var s=new fe(t,r)}catch{return null}return e.forEach(function(i){s.test(i)&&(!n||o.compare(i)===-1)&&(n=i,o=new z(n,r))}),n}B.minSatisfying=K0;function K0(e,t,r){var n=null,o=null;try{var s=new fe(t,r)}catch{return null}return e.forEach(function(i){s.test(i)&&(!n||o.compare(i)===1)&&(n=i,o=new z(n,r))}),n}B.minVersion=H0;function H0(e,t){e=new fe(e,t);var r=new z("0.0.0");if(e.test(r)||(r=new z("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){var o=e.set[n];o.forEach(function(s){var i=new z(s.semver.version);switch(s.operator){case">":i.prerelease.length===0?i.patch++:i.prerelease.push(0),i.raw=i.format();case"":case">=":(!r||Do(r,i))&&(r=i);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+s.operator)}})}return r&&e.test(r)?r:null}B.validRange=V0;function V0(e,t){try{return new fe(e,t).range||"*"}catch{return null}}B.ltr=W0;function W0(e,t,r){return Uc(e,t,"<",r)}B.gtr=Y0;function Y0(e,t,r){return Uc(e,t,">",r)}B.outside=Uc;function Uc(e,t,r,n){e=new z(e,n),t=new fe(t,n);var o,s,i,a,c;switch(r){case">":o=Do,s=$c,i=Qs,a=">",c=">=";break;case"<":o=Qs,s=zc,i=Do,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Zs(e,t,n))return!1;for(var d=0;d<t.set.length;++d){var l=t.set[d],f=null,u=null;if(l.forEach(function(y){y.semver===Vn&&(y=new pt(">=0.0.0")),f=f||y,u=u||y,o(y.semver,f.semver,n)?f=y:i(y.semver,u.semver,n)&&(u=y)}),f.operator===a||f.operator===c||(!u.operator||u.operator===a)&&s(e,u.semver))return!1;if(u.operator===c&&i(e,u.semver))return!1}return!0}B.prerelease=X0;function X0(e,t){var r=_n(e,t);return r&&r.prerelease.length?r.prerelease:null}B.intersects=Q0;function Q0(e,t,r){return e=new fe(e,r),t=new fe(t,r),e.intersects(t)}B.coerce=J0;function J0(e,t){if(e instanceof z)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};var r=null;if(!t.rtl)r=e.match(Z[p.COERCE]);else{for(var n;(n=Z[p.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Z[p.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Z[p.COERCERTL].lastIndex=-1}return r===null?null:_n(r[2]+"."+(r[3]||"0")+"."+(r[4]||"0"),t)}});var jc=T((wI,xm)=>{"use strict";var Z0=I("crypto");xm.exports=function(){return Z0.randomBytes(16)}});var qc=T((bI,bm)=>{"use strict";var wm=[];for(Mo=0;Mo<256;++Mo)wm[Mo]=(Mo+256).toString(16).substr(1);var Mo;function eA(e,t){var r=t||0,n=wm;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}bm.exports=eA});var _m=T((SI,Am)=>{"use strict";var tA=jc(),rA=qc(),Sm,Gc,Kc=0,Hc=0;function nA(e,t,r){var n=t&&r||0,o=t||[];e=e||{};var s=e.node||Sm,i=e.clockseq!==void 0?e.clockseq:Gc;if(s==null||i==null){var a=tA();s==null&&(s=Sm=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),i==null&&(i=Gc=(a[6]<<8|a[7])&16383)}var c=e.msecs!==void 0?e.msecs:new Date().getTime(),d=e.nsecs!==void 0?e.nsecs:Hc+1,l=c-Kc+(d-Hc)/1e4;if(l<0&&e.clockseq===void 0&&(i=i+1&16383),(l<0||c>Kc)&&e.nsecs===void 0&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Kc=c,Hc=d,Gc=i,c+=122192928e5;var f=((c&268435455)*1e4+d)%4294967296;o[n++]=f>>>24&255,o[n++]=f>>>16&255,o[n++]=f>>>8&255,o[n++]=f&255;var u=c/4294967296*1e4&268435455;o[n++]=u>>>8&255,o[n++]=u&255,o[n++]=u>>>24&15|16,o[n++]=u>>>16&255,o[n++]=i>>>8|128,o[n++]=i&255;for(var y=0;y<6;++y)o[n+y]=s[y];return t||rA(o)}Am.exports=nA});var vm=T((AI,Rm)=>{"use strict";var oA=jc(),sA=qc();function iA(e,t,r){var n=t&&r||0;typeof e=="string"&&(t=e==="binary"?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||oA)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t)for(var s=0;s<16;++s)t[n+s]=o[s];return t||sA(o)}Rm.exports=iA});var Nm=T((_I,km)=>{"use strict";var aA=_m(),Tm=vm(),Vc=Tm;Vc.v1=aA;Vc.v4=Tm;km.exports=Vc});var Wc=T(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.ManifestFilename=oe.TarFilename=oe.SystemTarPathOnWindows=oe.GnuTarPathOnWindows=oe.SocketTimeout=oe.DefaultRetryDelay=oe.DefaultRetryAttempts=oe.ArchiveToolType=oe.CompressionMethod=oe.CacheFilename=void 0;var cA;(function(e){e.Gzip="cache.tgz",e.Zstd="cache.tzst"})(cA=oe.CacheFilename||(oe.CacheFilename={}));var dA;(function(e){e.Gzip="gzip",e.ZstdWithoutLong="zstd-without-long",e.Zstd="zstd"})(dA=oe.CompressionMethod||(oe.CompressionMethod={}));var lA;(function(e){e.GNU="gnu",e.BSD="bsd"})(lA=oe.ArchiveToolType||(oe.ArchiveToolType={}));oe.DefaultRetryAttempts=2;oe.DefaultRetryDelay=5e3;oe.SocketTimeout=5e3;oe.GnuTarPathOnWindows=`${process.env.PROGRAMFILES}\\Git\\usr\\bin\\tar.exe`;oe.SystemTarPathOnWindows=`${process.env.SYSTEMDRIVE}\\Windows\\System32\\tar.exe`;oe.TarFilename="cache.tar";oe.ManifestFilename="manifest.txt"});var Xc=T(te=>{"use strict";var fA=te&&te.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),uA=te&&te.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Or=te&&te.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&fA(t,e,r);return uA(t,e),t},Wn=te&&te.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})},mA=te&&te.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,c){i=e[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},i)}};Object.defineProperty(te,"__esModule",{value:!0});te.isGhes=te.assertDefined=te.getGnuTarPathOnWindows=te.getCacheFileName=te.getCompressionMethod=te.unlinkFile=te.resolvePaths=te.getArchiveFileSizeInBytes=te.createTempDirectory=void 0;var Lo=Or(Un()),hA=Or(Ec()),pA=Or(mm()),Pm=Or(zs()),Yc=Or(I("fs")),ei=Or(I("path")),yA=Or(Cm()),gA=Or(I("util")),EA=Nm(),Rn=Wc();function CA(){return Wn(this,void 0,void 0,function*(){let e=process.platform==="win32",t=process.env.RUNNER_TEMP||"";if(!t){let n;e?n=process.env.USERPROFILE||"C:\\":process.platform==="darwin"?n="/Users":n="/home",t=ei.join(n,"actions","temp")}let r=ei.join(t,(0,EA.v4)());return yield Pm.mkdirP(r),r})}te.createTempDirectory=CA;function xA(e){return Yc.statSync(e).size}te.getArchiveFileSizeInBytes=xA;function wA(e){var t,r,n,o,s;return Wn(this,void 0,void 0,function*(){let i=[],a=(s=process.env.GITHUB_WORKSPACE)!==null&&s!==void 0?s:process.cwd(),c=yield pA.create(e.join(`
`),{implicitDescendants:!1});try{for(var d=!0,l=mA(c.globGenerator()),f;f=yield l.next(),t=f.done,!t;){o=f.value,d=!1;try{let u=o,y=ei.relative(a,u).replace(new RegExp(`\\${ei.sep}`,"g"),"/");Lo.debug(`Matched: ${y}`),y===""?i.push("."):i.push(`${y}`)}finally{d=!0}}}catch(u){r={error:u}}finally{try{!d&&!t&&(n=l.return)&&(yield n.call(l))}finally{if(r)throw r.error}}return i})}te.resolvePaths=wA;function bA(e){return Wn(this,void 0,void 0,function*(){return gA.promisify(Yc.unlink)(e)})}te.unlinkFile=bA;function Om(e,t=[]){return Wn(this,void 0,void 0,function*(){let r="";t.push("--version"),Lo.debug(`Checking ${e} ${t.join(" ")}`);try{yield hA.exec(`${e}`,t,{ignoreReturnCode:!0,silent:!0,listeners:{stdout:n=>r+=n.toString(),stderr:n=>r+=n.toString()}})}catch(n){Lo.debug(n.message)}return r=r.trim(),Lo.debug(r),r})}function SA(){return Wn(this,void 0,void 0,function*(){let e=yield Om("zstd",["--quiet"]),t=yA.clean(e);return Lo.debug(`zstd version: ${t}`),e===""?Rn.CompressionMethod.Gzip:Rn.CompressionMethod.ZstdWithoutLong})}te.getCompressionMethod=SA;function AA(e){return e===Rn.CompressionMethod.Gzip?Rn.CacheFilename.Gzip:Rn.CacheFilename.Zstd}te.getCacheFileName=AA;function _A(){return Wn(this,void 0,void 0,function*(){return Yc.existsSync(Rn.GnuTarPathOnWindows)?Rn.GnuTarPathOnWindows:(yield Om("tar")).toLowerCase().includes("gnu tar")?Pm.which("tar"):""})}te.getGnuTarPathOnWindows=_A;function RA(e,t){if(t===void 0)throw Error(`Expected ${e} but value was undefiend`);return t}te.assertDefined=RA;function vA(){return new URL(process.env.GITHUB_SERVER_URL||"https://github.com").hostname.toUpperCase()!=="GITHUB.COM"}te.isGhes=vA});var Bm=T(Fe=>{"use strict";var TA=Fe&&Fe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),kA=Fe&&Fe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Qc=Fe&&Fe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&TA(t,e,r);return kA(t,e),t},sr=Fe&&Fe.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.createTar=Fe.extractTar=Fe.listTar=void 0;var NA=Ec(),ti=Qc(zs()),Im=I("fs"),Rt=Qc(I("path")),Jc=Qc(Xc()),se=Wc(),Ir=process.platform==="win32";function PA(){return sr(this,void 0,void 0,function*(){switch(process.platform){case"win32":{let e=yield Jc.getGnuTarPathOnWindows(),t=se.SystemTarPathOnWindows;if(e)return{path:e,type:se.ArchiveToolType.GNU};if((0,Im.existsSync)(t))return{path:t,type:se.ArchiveToolType.BSD};break}case"darwin":{let e=yield ti.which("gtar",!1);return e?{path:e,type:se.ArchiveToolType.GNU}:{path:yield ti.which("tar",!0),type:se.ArchiveToolType.BSD}}default:break}return{path:yield ti.which("tar",!0),type:se.ArchiveToolType.GNU}})}function OA(e,t,r,n=""){return sr(this,void 0,void 0,function*(){let o=[`"${e.path}"`],s=Jc.getCacheFileName(t),i="cache.tar",a=Dm(),c=e.type===se.ArchiveToolType.BSD&&t!==se.CompressionMethod.Gzip&&Ir;switch(r){case"create":o.push("--posix","-cf",c?i:s.replace(new RegExp(`\\${Rt.sep}`,"g"),"/"),"--exclude",c?i:s.replace(new RegExp(`\\${Rt.sep}`,"g"),"/"),"-P","-C",a.replace(new RegExp(`\\${Rt.sep}`,"g"),"/"),"--files-from",se.ManifestFilename);break;case"extract":o.push("-xf",c?i:n.replace(new RegExp(`\\${Rt.sep}`,"g"),"/"),"-P","-C",a.replace(new RegExp(`\\${Rt.sep}`,"g"),"/"));break;case"list":o.push("-tf",c?i:n.replace(new RegExp(`\\${Rt.sep}`,"g"),"/"),"-P");break}if(e.type===se.ArchiveToolType.GNU)switch(process.platform){case"win32":o.push("--force-local");break;case"darwin":o.push("--delay-directory-restore");break}return o})}function Zc(e,t,r=""){return sr(this,void 0,void 0,function*(){let n,o=yield PA(),s=yield OA(o,e,t,r),i=t!=="create"?yield IA(o,e,r):yield DA(o,e),a=o.type===se.ArchiveToolType.BSD&&e!==se.CompressionMethod.Gzip&&Ir;return a&&t!=="create"?n=[[...i].join(" "),[...s].join(" ")]:n=[[...s].join(" "),[...i].join(" ")],a?n:[n.join(" ")]})}function Dm(){var e;return(e=process.env.GITHUB_WORKSPACE)!==null&&e!==void 0?e:process.cwd()}function IA(e,t,r){return sr(this,void 0,void 0,function*(){let n=e.type===se.ArchiveToolType.BSD&&t!==se.CompressionMethod.Gzip&&Ir;switch(t){case se.CompressionMethod.Zstd:return n?["zstd -d --long=30 --force -o",se.TarFilename,r.replace(new RegExp(`\\${Rt.sep}`,"g"),"/")]:["--use-compress-program",Ir?'"zstd -d --long=30"':"unzstd --long=30"];case se.CompressionMethod.ZstdWithoutLong:return n?["zstd -d --force -o",se.TarFilename,r.replace(new RegExp(`\\${Rt.sep}`,"g"),"/")]:["--use-compress-program",Ir?'"zstd -d"':"unzstd"];default:return["-z"]}})}function DA(e,t){return sr(this,void 0,void 0,function*(){let r=Jc.getCacheFileName(t),n=e.type===se.ArchiveToolType.BSD&&t!==se.CompressionMethod.Gzip&&Ir;switch(t){case se.CompressionMethod.Zstd:return n?["zstd -T0 --long=30 --force -o",r.replace(new RegExp(`\\${Rt.sep}`,"g"),"/"),se.TarFilename]:["--use-compress-program",Ir?'"zstd -T0 --long=30"':"zstdmt --long=30"];case se.CompressionMethod.ZstdWithoutLong:return n?["zstd -T0 --force -o",r.replace(new RegExp(`\\${Rt.sep}`,"g"),"/"),se.TarFilename]:["--use-compress-program",Ir?'"zstd -T0"':"zstdmt"];default:return["-z"]}})}function ed(e,t){return sr(this,void 0,void 0,function*(){for(let r of e)try{yield(0,NA.exec)(r,void 0,{cwd:t,env:Object.assign(Object.assign({},process.env),{MSYS:"winsymlinks:nativestrict"})})}catch(n){throw new Error(`${r.split(" ")[0]} failed with error: ${n?.message}`)}})}function BA(e,t){return sr(this,void 0,void 0,function*(){let r=yield Zc(t,"list",e);yield ed(r)})}Fe.listTar=BA;function MA(e,t){return sr(this,void 0,void 0,function*(){let r=Dm();yield ti.mkdirP(r);let n=yield Zc(t,"extract",e);yield ed(n)})}Fe.extractTar=MA;function LA(e,t,r){return sr(this,void 0,void 0,function*(){(0,Im.writeFileSync)(Rt.join(e,se.ManifestFilename),t.join(`
`));let n=yield Zc(r,"create");yield ed(n,e)})}Fe.createTar=LA});var zo={};wo(zo,{__assign:()=>id,__asyncDelegator:()=>d_,__asyncGenerator:()=>c_,__asyncValues:()=>l_,__await:()=>Fo,__awaiter:()=>r_,__classPrivateFieldGet:()=>h_,__classPrivateFieldSet:()=>p_,__createBinding:()=>o_,__decorate:()=>ZA,__exportStar:()=>s_,__extends:()=>QA,__generator:()=>n_,__importDefault:()=>m_,__importStar:()=>u_,__makeTemplateObject:()=>f_,__metadata:()=>t_,__param:()=>e_,__read:()=>Um,__rest:()=>JA,__spread:()=>i_,__spreadArrays:()=>a_,__values:()=>ad});function QA(e,t){sd(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function JA(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function ZA(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function e_(e,t){return function(r,n){t(r,n,e)}}function t_(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function r_(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})}function n_(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(l){return c([d,l])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(l){d=[6,l],o=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function o_(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function s_(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function ad(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Um(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s}function i_(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Um(arguments[t]));return e}function a_(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function Fo(e){return this instanceof Fo?(this.v=e,this):new Fo(e)}function c_(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o;function i(u){n[u]&&(o[u]=function(y){return new Promise(function(x,w){s.push([u,y,x,w])>1||a(u,y)})})}function a(u,y){try{c(n[u](y))}catch(x){f(s[0][3],x)}}function c(u){u.value instanceof Fo?Promise.resolve(u.value.v).then(d,l):f(s[0][2],u)}function d(u){a("next",u)}function l(u){a("throw",u)}function f(u,y){u(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function d_(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,s){t[o]=e[o]?function(i){return(r=!r)?{value:Fo(e[o](i)),done:o==="return"}:s?s(i):i}:s}}function l_(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof ad=="function"?ad(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,c){i=e[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},i)}}function f_(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function u_(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function m_(e){return e&&e.__esModule?e:{default:e}}function h_(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function p_(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}var sd,id,$o=be(()=>{"use strict";sd=function(e,t){return sd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},sd(e,t)};id=function(){return id=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},id.apply(this,arguments)}});var jm,qm,Gm=be(()=>{"use strict";jm=e=>{let t=[];for(let r=0,n=e.length;r<n;r++){let o=e.charCodeAt(r);if(o<128)t.push(o);else if(o<2048)t.push(o>>6|192,o&63|128);else if(r+1<e.length&&(o&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){let s=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else t.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(t)},qm=e=>{let t="";for(let r=0,n=e.length;r<n;r++){let o=e[r];if(o<128)t+=String.fromCharCode(o);else if(192<=o&&o<224){let s=e[++r];t+=String.fromCharCode((o&31)<<6|s&63)}else if(240<=o&&o<365){let i="%"+[o,e[++r],e[++r],e[++r]].map(a=>a.toString(16)).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((o&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t}});function Km(e){return new TextEncoder().encode(e)}function Hm(e){return new TextDecoder("utf-8").decode(e)}var Vm=be(()=>{"use strict"});var Wm={};wo(Wm,{fromUtf8:()=>y_,toUtf8:()=>g_});var y_,g_,Ym=be(()=>{"use strict";Gm();Vm();y_=e=>typeof TextEncoder=="function"?Km(e):jm(e),g_=e=>typeof TextDecoder=="function"?Hm(e):qm(e)});var Xm=T(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.convertToBuffer=void 0;var E_=(Ym(),Mn(Wm)),C_=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:E_.fromUtf8;function x_(e){return e instanceof Uint8Array?e:typeof e=="string"?C_(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}ni.convertToBuffer=x_});var Qm=T(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.isEmptyData=void 0;function w_(e){return typeof e=="string"?e.length===0:e.byteLength===0}oi.isEmptyData=w_});var Jm=T(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.numToUint8=void 0;function b_(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}si.numToUint8=b_});var Zm=T(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.uint32ArrayFrom=void 0;function S_(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}ii.uint32ArrayFrom=S_});var Uo=T(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.uint32ArrayFrom=Mt.numToUint8=Mt.isEmptyData=Mt.convertToBuffer=void 0;var A_=Xm();Object.defineProperty(Mt,"convertToBuffer",{enumerable:!0,get:function(){return A_.convertToBuffer}});var __=Qm();Object.defineProperty(Mt,"isEmptyData",{enumerable:!0,get:function(){return __.isEmptyData}});var R_=Jm();Object.defineProperty(Mt,"numToUint8",{enumerable:!0,get:function(){return R_.numToUint8}});var v_=Zm();Object.defineProperty(Mt,"uint32ArrayFrom",{enumerable:!0,get:function(){return v_.uint32ArrayFrom}})});var rh=T(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.AwsCrc32=void 0;var eh=($o(),Mn(zo)),cd=Uo(),th=jo(),T_=function(){function e(){this.crc32=new th.Crc32}return e.prototype.update=function(t){(0,cd.isEmptyData)(t)||this.crc32.update((0,cd.convertToBuffer)(t))},e.prototype.digest=function(){return eh.__awaiter(this,void 0,void 0,function(){return eh.__generator(this,function(t){return[2,(0,cd.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new th.Crc32},e}();ai.AwsCrc32=T_});var jo=T(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.AwsCrc32=Fr.Crc32=Fr.crc32=void 0;var k_=($o(),Mn(zo)),N_=Uo();function P_(e){return new nh().update(e).digest()}Fr.crc32=P_;var nh=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=k_.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^I_[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();Fr.Crc32=nh;var O_=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],I_=(0,N_.uint32ArrayFrom)(O_),D_=rh();Object.defineProperty(Fr,"AwsCrc32",{enumerable:!0,get:function(){return D_.AwsCrc32}})});var Yi=T(lr=>{"use strict";var Xp=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Ev=Xp+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Qp="["+Xp+"]["+Ev+"]*",Cv=new RegExp("^"+Qp+"$"),xv=function(e,t){let r=[],n=t.exec(e);for(;n;){let o=[];o.startIndex=t.lastIndex-n[0].length;let s=n.length;for(let i=0;i<s;i++)o.push(n[i]);r.push(o),n=t.exec(e)}return r},wv=function(e){let t=Cv.exec(e);return!(t===null||typeof t>"u")};lr.isExist=function(e){return typeof e<"u"};lr.isEmptyObject=function(e){return Object.keys(e).length===0};lr.merge=function(e,t,r){if(t){let n=Object.keys(t),o=n.length;for(let s=0;s<o;s++)r==="strict"?e[n[s]]=[t[n[s]]]:e[n[s]]=t[n[s]]}};lr.getValue=function(e){return lr.isExist(e)?e:""};lr.isName=wv;lr.getAllMatches=xv;lr.nameRegexp=Qp});var Yd=T(ry=>{"use strict";var Wd=Yi(),bv={allowBooleanAttributes:!1,unpairedTags:[]};ry.validate=function(e,t){t=Object.assign({},bv,t);let r=[],n=!1,o=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=Zp(e,s),s.err)return s}else if(e[s]==="<"){let i=s;if(s++,e[s]==="!"){s=ey(e,s);continue}else{let a=!1;e[s]==="/"&&(a=!0,s++);let c="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)c+=e[s];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),s--),!Nv(c)){let f;return c.trim().length===0?f="Invalid space after '<'.":f="Tag '"+c+"' is an invalid name.",Ce("InvalidTag",f,st(e,s))}let d=_v(e,s);if(d===!1)return Ce("InvalidAttr","Attributes for '"+c+"' have open quote.",st(e,s));let l=d.value;if(s=d.index,l[l.length-1]==="/"){let f=s-l.length;l=l.substring(0,l.length-1);let u=ty(l,t);if(u===!0)n=!0;else return Ce(u.err.code,u.err.msg,st(e,f+u.err.line))}else if(a)if(d.tagClosed){if(l.trim().length>0)return Ce("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",st(e,i));{let f=r.pop();if(c!==f.tagName){let u=st(e,f.tagStartPos);return Ce("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+u.line+", col "+u.col+") instead of closing tag '"+c+"'.",st(e,i))}r.length==0&&(o=!0)}}else return Ce("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",st(e,s));else{let f=ty(l,t);if(f!==!0)return Ce(f.err.code,f.err.msg,st(e,s-l.length+f.err.line));if(o===!0)return Ce("InvalidXml","Multiple possible root nodes found.",st(e,s));t.unpairedTags.indexOf(c)!==-1||r.push({tagName:c,tagStartPos:i}),n=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=ey(e,s);continue}else if(e[s+1]==="?"){if(s=Zp(e,++s),s.err)return s}else break;else if(e[s]==="&"){let f=Tv(e,s);if(f==-1)return Ce("InvalidChar","char '&' is not expected.",st(e,s));s=f}else if(o===!0&&!Jp(e[s]))return Ce("InvalidXml","Extra text at the end",st(e,s));e[s]==="<"&&s--}}else{if(Jp(e[s]))continue;return Ce("InvalidChar","char '"+e[s]+"' is not expected.",st(e,s))}if(n){if(r.length==1)return Ce("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",st(e,r[0].tagStartPos));if(r.length>0)return Ce("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Ce("InvalidXml","Start tag expected.",1);return!0};function Jp(e){return e===" "||e==="	"||e===`
`||e==="\r"}function Zp(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return Ce("InvalidXml","XML declaration allowed only at the start of the document.",st(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function ey(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var Sv='"',Av="'";function _v(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if(e[t]===Sv||e[t]===Av)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){o=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:o}}var Rv=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function ty(e,t){let r=Wd.getAllMatches(e,Rv),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return Ce("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",Qo(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return Ce("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",Qo(r[o]));if(r[o][3]===void 0&&!t.allowBooleanAttributes)return Ce("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",Qo(r[o]));let s=r[o][2];if(!kv(s))return Ce("InvalidAttr","Attribute '"+s+"' is an invalid name.",Qo(r[o]));if(!n.hasOwnProperty(s))n[s]=1;else return Ce("InvalidAttr","Attribute '"+s+"' is repeated.",Qo(r[o]))}return!0}function vv(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function Tv(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,vv(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function Ce(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function kv(e){return Wd.isName(e)}function Nv(e){return Wd.isName(e)}function st(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Qo(e){return e.startIndex+e[1].length}});var oy=T(Xd=>{"use strict";var ny={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},Pv=function(e){return Object.assign({},ny,e)};Xd.buildOptions=Pv;Xd.defaultOptions=ny});var iy=T((xq,sy)=>{"use strict";var Qd=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};sy.exports=Qd});var cy=T((wq,ay)=>{"use strict";var Ov=Yi();function Iv(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,o=!1,s=!1,i="";for(;t<e.length;t++)if(e[t]==="<"&&!s){if(o&&Mv(e,t))t+=7,[entityName,val,t]=Dv(e,t+1),val.indexOf("&")===-1&&(r[$v(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(o&&Lv(e,t))t+=8;else if(o&&Fv(e,t))t+=8;else if(o&&zv(e,t))t+=9;else if(Bv)s=!0;else throw new Error("Invalid DOCTYPE");n++,i=""}else if(e[t]===">"){if(s?e[t-1]==="-"&&e[t-2]==="-"&&(s=!1,n--):n--,n===0)break}else e[t]==="["?o=!0:i+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function Dv(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=e[t++],o="";for(;t<e.length&&e[t]!==n;t++)o+=e[t];return[r,o,t]}function Bv(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function Mv(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function Lv(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function Fv(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function zv(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function $v(e){if(Ov.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}ay.exports=Iv});var ly=T((bq,dy)=>{"use strict";var Uv=/^[-+]?0x[a-fA-F0-9]+$/,jv=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var qv={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Gv(e,t={}){if(t=Object.assign({},qv,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&Uv.test(r))return Number.parseInt(r,16);{let n=jv.exec(r);if(n){let o=n[1],s=n[2],i=Kv(n[3]),a=n[4]||n[6];if(!t.leadingZeros&&s.length>0&&o&&r[2]!==".")return e;if(!t.leadingZeros&&s.length>0&&!o&&r[1]!==".")return e;{let c=Number(r),d=""+c;return d.search(/[eE]/)!==-1||a?t.eNotation?c:e:r.indexOf(".")!==-1?d==="0"&&i===""||d===i||o&&d==="-"+i?c:e:s?i===d||o+i===d?c:e:r===d||r===o+d?c:e}}else return e}}function Kv(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}dy.exports=Gv});var uy=T((Aq,fy)=>{"use strict";var tl=Yi(),Jo=iy(),Hv=cy(),Vv=ly(),Sq="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,tl.nameRegexp),Jd=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=Wv,this.parseXml=Zv,this.parseTextData=Yv,this.resolveNameSpace=Xv,this.buildAttributesMap=Jv,this.isItStopNode=nT,this.replaceEntitiesValue=tT,this.readStopNodeData=sT,this.saveTextToParentTag=rT,this.addChild=eT}};function Wv(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function Yv(e,t,r,n,o,s,i){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){i||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,o,s);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?el(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?el(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function Xv(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var Qv=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Jv(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){let n=tl.getAllMatches(e,Qv),o=n.length,s={};for(let i=0;i<o;i++){let a=this.resolveNameSpace(n[i][1]),c=n[i][4],d=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);let l=this.options.attributeValueProcessor(a,c,t);l==null?s[d]=c:typeof l!=typeof c||l!==c?s[d]=l:s[d]=el(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let i={};return i[this.options.attributesGroupName]=s,i}return s}}var Zv=function(e){e=e.replace(/\r\n?/g,`
`);let t=new Jo("!xml"),r=t,n="",o="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let a=On(e,">",s,"Closing Tag is not closed."),c=e.substring(s+2,a).trim();if(this.options.removeNSPrefix){let f=c.indexOf(":");f!==-1&&(c=c.substr(f+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(n=this.saveTextToParentTag(n,r,o));let d=o.substring(o.lastIndexOf(".")+1);if(c&&this.options.unpairedTags.indexOf(c)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${c}>`);let l=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(l=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=o.lastIndexOf("."),o=o.substring(0,l),r=this.tagsNodeStack.pop(),n="",s=a}else if(e[s+1]==="?"){let a=Zd(e,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let c=new Jo(a.tagName);c.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(c[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(r,c,o)}s=a.closeIndex+1}else if(e.substr(s+1,3)==="!--"){let a=On(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){let c=e.substring(s+4,a-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}s=a}else if(e.substr(s+1,2)==="!D"){let a=Hv(e,s);this.docTypeEntities=a.entities,s=a.i}else if(e.substr(s+1,2)==="!["){let a=On(e,"]]>",s,"CDATA is not closed.")-2,c=e.substring(s+9,a);if(n=this.saveTextToParentTag(n,r,o),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]);else{let d=this.parseTextData(c,r.tagname,o,!0,!1,!0);d==null&&(d=""),r.add(this.options.textNodeName,d)}s=a+2}else{let a=Zd(e,s,this.options.removeNSPrefix),c=a.tagName,d=a.tagExp,l=a.attrExpPresent,f=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1));let u=r;if(u&&this.options.unpairedTags.indexOf(u.tagname)!==-1&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),c!==t.tagname&&(o+=o?"."+c:c),this.isItStopNode(this.options.stopNodes,o,c)){let y="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)s=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)s=a.closeIndex;else{let w=this.readStopNodeData(e,c,f+1);if(!w)throw new Error(`Unexpected end of ${c}`);s=w.i,y=w.tagContent}let x=new Jo(c);c!==d&&l&&(x[":@"]=this.buildAttributesMap(d,o,c)),y&&(y=this.parseTextData(y,c,o,!0,l,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),x.add(this.options.textNodeName,y),this.addChild(r,x,o)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),d=c):d=d.substr(0,d.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let y=new Jo(c);c!==d&&l&&(y[":@"]=this.buildAttributesMap(d,o,c)),this.addChild(r,y,o),o=o.substr(0,o.lastIndexOf("."))}else{let y=new Jo(c);this.tagsNodeStack.push(r),c!==d&&l&&(y[":@"]=this.buildAttributesMap(d,o,c)),this.addChild(r,y,o),r=y}n="",s=f}}else n+=e[s];return t.child};function eT(e,t,r){let n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}var tT=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function rT(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function nT(e,t,r){let n="*."+r;for(let o in e){let s=e[o];if(n===s||t===s)return!0}return!1}function oT(e,t,r=">"){let n,o="";for(let s=t;s<e.length;s++){let i=e[s];if(n)i===n&&(n="");else if(i==='"'||i==="'")n=i;else if(i===r[0])if(r[1]){if(e[s+1]===r[1])return{data:o,index:s}}else return{data:o,index:s};else i==="	"&&(i=" ");o+=i}}function On(e,t,r,n){let o=e.indexOf(t,r);if(o===-1)throw new Error(n);return o+t.length-1}function Zd(e,t,r,n=">"){let o=oT(e,t+1,n);if(!o)return;let s=o.data,i=o.index,a=s.search(/\s/),c=s,d=!0;if(a!==-1&&(c=s.substr(0,a).replace(/\s\s*$/,""),s=s.substr(a+1)),r){let l=c.indexOf(":");l!==-1&&(c=c.substr(l+1),d=c!==o.data.substr(l+1))}return{tagName:c,tagExp:s,closeIndex:i,attrExpPresent:d}}function sT(e,t,r){let n=r,o=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=On(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(o--,o===0))return{tagContent:e.substring(n,r),i:s};r=s}else if(e[r+1]==="?")r=On(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=On(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=On(e,"]]>",r,"StopNode is not closed.")-2;else{let s=Zd(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,r=s.closeIndex)}}function el(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:Vv(e,r)}else return tl.isExist(e)?e:""}fy.exports=Jd});var py=T(hy=>{"use strict";function iT(e,t){return my(e,t)}function my(e,t,r){let n,o={};for(let s=0;s<e.length;s++){let i=e[s],a=aT(i),c="";if(r===void 0?c=a:c=r+"."+a,a===t.textNodeName)n===void 0?n=i[a]:n+=""+i[a];else{if(a===void 0)continue;if(i[a]){let d=my(i[a],t,c),l=dT(d,t);i[":@"]?cT(d,i[":@"],c,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(d)):t.isArray(a,c,l)?o[a]=[d]:o[a]=d}}}return typeof n=="string"?n.length>0&&(o[t.textNodeName]=n):n!==void 0&&(o[t.textNodeName]=n),o}function aT(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function cT(e,t,r,n){if(t){let o=Object.keys(t),s=o.length;for(let i=0;i<s;i++){let a=o[i];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function dT(e,t){let{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}hy.prettify=iT});var gy=T((Rq,yy)=>{"use strict";var{buildOptions:lT}=oy(),fT=uy(),{prettify:uT}=py(),mT=Yd(),rl=class{constructor(t){this.externalEntities={},this.options=lT(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=mT.validate(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let n=new fT(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(t);return this.options.preserveOrder||o===void 0?o:uT(o,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};yy.exports=rl});var by=T((vq,wy)=>{"use strict";var hT=`
`;function pT(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=hT),Cy(e,t,"",r)}function Cy(e,t,r,n){let o="",s=!1;for(let i=0;i<e.length;i++){let a=e[i],c=yT(a),d="";if(r.length===0?d=c:d=`${r}.${c}`,c===t.textNodeName){let x=a[c];gT(d,t)||(x=t.tagValueProcessor(c,x),x=xy(x,t)),s&&(o+=n),o+=x,s=!1;continue}else if(c===t.cdataPropName){s&&(o+=n),o+=`<![CDATA[${a[c][0][t.textNodeName]}]]>`,s=!1;continue}else if(c===t.commentPropName){o+=n+`<!--${a[c][0][t.textNodeName]}-->`,s=!0;continue}else if(c[0]==="?"){let x=Ey(a[":@"],t),w=c==="?xml"?"":n,A=a[c][0][t.textNodeName];A=A.length!==0?" "+A:"",o+=w+`<${c}${A}${x}?>`,s=!0;continue}let l=n;l!==""&&(l+=t.indentBy);let f=Ey(a[":@"],t),u=n+`<${c}${f}`,y=Cy(a[c],t,d,l);t.unpairedTags.indexOf(c)!==-1?t.suppressUnpairedNode?o+=u+">":o+=u+"/>":(!y||y.length===0)&&t.suppressEmptyNode?o+=u+"/>":y&&y.endsWith(">")?o+=u+`>${y}${n}</${c}>`:(o+=u+">",y&&n!==""&&(y.includes("/>")||y.includes("</"))?o+=n+t.indentBy+y+n:o+=y,o+=`</${c}>`),s=!0}return o}function yT(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function Ey(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){let o=t.attributeValueProcessor(n,e[n]);o=xy(o,t),o===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${o}"`}return r}function gT(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function xy(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}wy.exports=pT});var Ay=T((Tq,Sy)=>{"use strict";var ET=by(),CT={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function an(e){this.options=Object.assign({},CT,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=bT),this.processTextOrObjNode=xT,this.options.format?(this.indentate=wT,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}an.prototype.build=function(e){return this.options.preserveOrder?ET(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};an.prototype.j2x=function(e,t){let r="",n="";for(let o in e)if(!(typeof e[o]>"u"))if(e[o]===null)o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextValNode(e[o],o,"",t);else if(typeof e[o]!="object"){let s=this.isAttribute(o);if(s)r+=this.buildAttrPairStr(s,""+e[o]);else if(o===this.options.textNodeName){let i=this.options.tagValueProcessor(o,""+e[o]);n+=this.replaceEntitiesValue(i)}else n+=this.buildTextValNode(e[o],o,"",t)}else if(Array.isArray(e[o])){let s=e[o].length,i="";for(let a=0;a<s;a++){let c=e[o][a];typeof c>"u"||(c===null?o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar:typeof c=="object"?this.options.oneListGroup?i+=this.j2x(c,t+1).val:i+=this.processTextOrObjNode(c,o,t):i+=this.buildTextValNode(c,o,"",t))}this.options.oneListGroup&&(i=this.buildObjectNode(i,o,"",t)),n+=i}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let s=Object.keys(e[o]),i=s.length;for(let a=0;a<i;a++)r+=this.buildAttrPairStr(s[a],""+e[o][s[a]])}else n+=this.processTextOrObjNode(e[o],o,t);return{attrStr:r,val:n}};an.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function xT(e,t,r){let n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}an.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let o="</"+t+this.tagEndChar,s="";return t[0]==="?"&&(s="?",o=""),r&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+s+">"+e+o:this.options.commentPropName!==!1&&t===this.options.commentPropName&&s.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+s+this.tagEndChar+e+this.indentate(n)+o}};an.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};an.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let o=this.options.tagValueProcessor(t,e);return o=this.replaceEntitiesValue(o),o===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+o+"</"+t+this.tagEndChar}};an.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function wT(e){return this.options.indentBy.repeat(e)}function bT(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}Sy.exports=an});var nl=T((kq,_y)=>{"use strict";var ST=Yd(),AT=gy(),_T=Ay();_y.exports={XMLParser:AT,XMLValidator:ST,XMLBuilder:_T}});var Kx=T(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.AwsCrc32c=void 0;var qx=($o(),Mn(zo)),ff=Uo(),Gx=uf(),KP=function(){function e(){this.crc32c=new Gx.Crc32c}return e.prototype.update=function(t){(0,ff.isEmptyData)(t)||this.crc32c.update((0,ff.convertToBuffer)(t))},e.prototype.digest=function(){return qx.__awaiter(this,void 0,void 0,function(){return qx.__generator(this,function(t){return[2,(0,ff.numToUint8)(this.crc32c.digest())]})})},e.prototype.reset=function(){this.crc32c=new Gx.Crc32c},e}();Da.AwsCrc32c=KP});var uf=T(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.AwsCrc32c=Cn.Crc32c=Cn.crc32c=void 0;var HP=($o(),Mn(zo)),VP=Uo();function WP(e){return new Hx().update(e).digest()}Cn.crc32c=WP;var Hx=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=HP.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^XP[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();Cn.Crc32c=Hx;var YP=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],XP=(0,VP.uint32ArrayFrom)(YP),QP=Kx();Object.defineProperty(Cn,"AwsCrc32c",{enumerable:!0,get:function(){return QP.AwsCrc32c}})});var Fa=tr(Xc(),1),rw=tr(Bm(),1),Pt=tr(Un(),1);import eO from"node:fs/promises";import tO from"node:path";var td;(function(e){e.HEADER="header",e.QUERY="query"})(td||(td={}));var vn;(function(e){e.HTTP="http",e.HTTPS="https"})(vn||(vn={}));var Yn;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Yn||(Yn={}));var rd;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(rd||(rd={}));var nd;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(nd||(nd={}));var K=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new e({...this,headers:{...this.headers}});return t.query&&(t.query=FA(t.query)),t}};function FA(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var vt=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function zA(e){return t=>async r=>{let{request:n}=r;return K.isInstance(n)&&n.body&&e.runtime==="node"&&(n.headers={...n.headers,Expect:"100-continue"}),t({...r,request:n})}}var $A={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},Mm=e=>({applyToStack:t=>{t.add(zA(e),$A)}});var UA=e=>t=>async r=>{if(!K.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]="";else if(!n.headers.host){let s=n.hostname;n.port!=null&&(s+=`:${n.port}`),n.headers.host=s}return t(r)},jA={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Dr=e=>({applyToStack:t=>{t.add(UA(e),jA)}});var qA=()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:d}=a,l=c??t.inputFilterSensitiveLog,f=d??t.outputFilterSensitiveLog,{$metadata:u,...y}=n.output;return i?.info?.({clientName:o,commandName:s,input:l(r.input),output:f(y),metadata:u}),n}catch(n){let{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c}=a,d=c??t.inputFilterSensitiveLog;throw i?.error?.({clientName:o,commandName:s,input:d(r.input),error:n,metadata:n.$metadata}),n}},GA={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Br=e=>({applyToStack:t=>{t.add(qA(),GA)}});var Lm="X-Amzn-Trace-Id",KA="AWS_LAMBDA_FUNCTION_NAME",HA="_X_AMZN_TRACE_ID",VA=e=>t=>async r=>{let{request:n}=r;if(!K.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(Lm))return t(r);let o=process.env[KA],s=process.env[HA],i=a=>typeof a=="string"&&a.length>0;return i(o)&&i(s)&&(n.headers[Lm]=s),t({...r,request:n})},WA={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Mr=e=>({applyToStack:t=>{t.add(VA(e),WA)}});var Fm=e=>({...e,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1});var od=e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6;function YA(){return e=>async t=>{let{input:{Bucket:r}}=t;if(typeof r=="string"&&!od(r)&&r.indexOf("/")>=0){let n=new Error(`Bucket name shouldn't contain '/', received '${r}'`);throw n.name="InvalidBucketName",n}return e({...t})}}var XA={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},zm=e=>({applyToStack:t=>{t.add(YA(),XA)}});var yt=class e extends Error{constructor(t,r=!0){super(t),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,e.prototype)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}};var D=class e extends yt{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,e.prototype)}};var gt=class e extends yt{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,e.prototype)}};function ri(...e){return()=>{let t=Promise.reject(new yt("No providers in chain"));for(let r of e)t=t.catch(n=>{if(n?.tryNextLink)return r();throw n});return t}}var $m=e=>()=>Promise.resolve(e);var Lr=(e,t,r)=>{let n,o,s,i=!1,a=async()=>{o||(o=e());try{n=await o,s=!0,i=!1}finally{o=void 0}return n};return t===void 0?async c=>((!s||c?.forceRefresh)&&(n=await a()),n):async c=>((!s||c?.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await a(),n))};var uh=tr(jo());var oh={},dd={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),oh[e]=t,dd[t]=e}function sh(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in dd)t[r/2]=dd[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function Pe(e){let t="";for(let r=0;r<e.byteLength;r++)t+=oh[e[r]];return t}var Xn=class e{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&ih(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&ih(t),parseInt(Pe(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function ih(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var Qn=class{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let s of Object.keys(t)){let i=this.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=this.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let d=new Uint8Array(c.buffer);return d.set(a,3),d;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(Xn.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!q_.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let f=new Uint8Array(17);return f[0]=9,f.set(sh(t.value.replace(/\-/g,"")),1),f}}parse(t){let r={},n=0;for(;n<t.byteLength;){let o=t.getUint8(n++),s=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,o));switch(n+=o,t.getUint8(n++)){case 0:r[s]={type:ch,value:!0};break;case 1:r[s]={type:ch,value:!1};break;case 2:r[s]={type:B_,value:t.getInt8(n++)};break;case 3:r[s]={type:M_,value:t.getInt16(n,!1)},n+=2;break;case 4:r[s]={type:L_,value:t.getInt32(n,!1)},n+=4;break;case 5:r[s]={type:F_,value:new Xn(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let i=t.getUint16(n,!1);n+=2,r[s]={type:z_,value:new Uint8Array(t.buffer,t.byteOffset+n,i)},n+=i;break;case 7:let a=t.getUint16(n,!1);n+=2,r[s]={type:$_,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[s]={type:U_,value:new Date(new Xn(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let c=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[s]={type:j_,value:`${Pe(c.subarray(0,4))}-${Pe(c.subarray(4,6))}-${Pe(c.subarray(6,8))}-${Pe(c.subarray(8,10))}-${Pe(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},ah;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(ah||(ah={}));var ch="boolean",B_="byte",M_="short",L_="integer",F_="long",z_="binary",$_="string",U_="timestamp",j_="uuid",q_=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var dh=tr(jo()),lh=4,zr=lh*2,Tn=4,G_=zr+Tn*2;function fh({byteLength:e,byteOffset:t,buffer:r}){if(e<G_)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),o=n.getUint32(0,!1);if(e!==o)throw new Error("Reported message length does not match received message length");let s=n.getUint32(lh,!1),i=n.getUint32(zr,!1),a=n.getUint32(e-Tn,!1),c=new dh.Crc32().update(new Uint8Array(r,t,zr));if(i!==c.digest())throw new Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(r,t+zr,e-(zr+Tn))),a!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+zr+Tn,s),body:new Uint8Array(r,t+zr+Tn+s,o-s-(zr+Tn+Tn))}}var ci=class{constructor(t,r){this.headerMarshaller=new Qn(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){let t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){let t=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){let n=this.headerMarshaller.format(t),o=n.byteLength+r.byteLength+16,s=new Uint8Array(o),i=new DataView(s.buffer,s.byteOffset,s.byteLength),a=new uh.Crc32;return i.setUint32(0,o,!1),i.setUint32(4,n.byteLength,!1),i.setUint32(8,a.update(s.subarray(0,8)).digest(),!1),s.set(n,12),s.set(r,n.byteLength+12),i.setUint32(o-4,a.update(s.subarray(8,o-4)).digest(),!1),s}decode(t){let{headers:r,body:n}=fh(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}};var di=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}};var li=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}};var fi=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}};var ui=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}};var Oe=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var Jn=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";import{Buffer as ld}from"buffer";var ir=(e,t=0,r=e.byteLength-t)=>{if(!Jn(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return ld.from(e,t,r)},Zn=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?ld.from(e,t):ld.from(e)};var rt=e=>{let t=Zn(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var nt=e=>typeof e=="string"?rt(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var Et=e=>ir(e.buffer,e.byteOffset,e.byteLength).toString("utf8");var mh="X-Amz-Algorithm",hh="X-Amz-Credential",fd="X-Amz-Date",ph="X-Amz-SignedHeaders",yh="X-Amz-Expires",ud="X-Amz-Signature",md="X-Amz-Security-Token";var hd="authorization",pd=fd.toLowerCase(),K_="date",gh=[hd,pd,K_],Eh=ud.toLowerCase(),qo="x-amz-content-sha256",Ch=md.toLowerCase();var xh={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},wh=/^proxy-/,bh=/^sec-/;var mi="AWS4-HMAC-SHA256";var Sh="AWS4-HMAC-SHA256-PAYLOAD",Ah="UNSIGNED-PAYLOAD",_h=50,yd="aws4_request",Rh=60*60*24*7;var hi={},gd=[],pi=(e,t,r)=>`${e}/${t}/${r}/${yd}`,Th=async(e,t,r,n,o)=>{let s=await vh(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${o}:${Pe(s)}:${t.sessionToken}`;if(i in hi)return hi[i];for(gd.push(i);gd.length>_h;)delete hi[gd.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,n,o,yd])a=await vh(e,a,c);return hi[i]=a};var vh=(e,t,r)=>{let n=new e(t);return n.update(nt(r)),n.digest()};var yi=({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let s=o.toLowerCase();(s in xh||t?.has(s)||wh.test(s)||bh.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[o].trim().replace(/\s+/g," "))}return n};var Lt=e=>encodeURIComponent(e).replace(/[!'()*]/g,H_),H_=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var Ed=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e).sort()){if(n.toLowerCase()===Eh)continue;t.push(n);let o=e[n];typeof o=="string"?r[n]=`${Lt(n)}=${Lt(o)}`:Array.isArray(o)&&(r[n]=o.slice(0).reduce((s,i)=>s.concat([`${Lt(n)}=${Lt(i)}`]),[]).sort().join("&"))}return t.map(n=>r[n]).filter(n=>n).join("&")};var Go=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===qo)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||Jn(t)){let n=new r;return n.update(nt(t)),Pe(await n.digest())}return Ah};var kh=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1};var gi=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?V_(t):void 0}),V_=e=>Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{});var Cd=(e,t={})=>{let{headers:r,query:n={}}=typeof e.clone=="function"?e.clone():gi(e);for(let o of Object.keys(r)){let s=o.toLowerCase();s.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(s)&&(n[o]=r[o],delete r[o])}return{...e,headers:r,query:n}};var Ei=e=>{e=typeof e.clone=="function"?e.clone():gi(e);for(let t of Object.keys(e.headers))gh.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};var Nh=e=>W_(e).toISOString().replace(/\.\d{3}Z$/,"Z"),W_=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var kn=class{constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){this.headerMarshaller=new Qn(Et,rt),this.service=o,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=Oe(n),this.credentialProvider=Oe(r)}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:a,signingRegion:c,signingService:d}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);let f=c??await this.regionProvider(),{longDate:u,shortDate:y}=Ci(n);if(o>Rh)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let x=pi(y,f,d??this.service),w=Cd(Ei(t),{unhoistableHeaders:i});l.sessionToken&&(w.query[md]=l.sessionToken),w.query[mh]=mi,w.query[hh]=`${l.accessKeyId}/${x}`,w.query[fd]=u,w.query[yh]=o.toString(10);let A=yi(w,s,a);return w.query[ph]=Ph(A),w.query[ud]=await this.getSignature(u,x,this.getSigningKey(l,f,y,d),this.createCanonicalRequest(w,A,await Go(t,this.sha256))),w}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:s,signingService:i}){let a=s??await this.regionProvider(),{shortDate:c,longDate:d}=Ci(n),l=pi(c,a,i??this.service),f=await Go({headers:{},body:r},this.sha256),u=new this.sha256;u.update(t);let y=Pe(await u.digest()),x=[Sh,d,l,o,y,f].join(`
`);return this.signString(x,{signingDate:n,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerMarshaller.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let i=n??await this.regionProvider(),{shortDate:a}=Ci(r),c=new this.sha256(await this.getSigningKey(s,i,a,o));return c.update(nt(t)),Pe(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:s,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=s??await this.regionProvider(),d=Ei(t),{longDate:l,shortDate:f}=Ci(r),u=pi(f,c,i??this.service);d.headers[pd]=l,a.sessionToken&&(d.headers[Ch]=a.sessionToken);let y=await Go(d,this.sha256);!kh(qo,d.headers)&&this.applyChecksum&&(d.headers[qo]=y);let x=yi(d,o,n),w=await this.getSignature(l,u,this.getSigningKey(a,c,f,i),this.createCanonicalRequest(d,x,y));return d.headers[hd]=`${mi} Credential=${a.accessKeyId}/${u}, SignedHeaders=${Ph(x)}, Signature=${w}`,d}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${Ed(t)}
${o.map(s=>`${s}:${r[s]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n){let o=new this.sha256;o.update(nt(n));let s=await o.digest();return`${mi}
${t}
${r}
${Pe(s)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))s?.length!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,o){let s=await this.createStringToSign(t,r,o),i=new this.sha256(await n);return i.update(nt(s)),Pe(await i.digest())}getSigningKey(t,r,n,o){return Th(this.sha256,t,n,r,o||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},Ci=e=>{let t=Nh(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},Ph=e=>Object.keys(e).sort().join(";");var Y_=3e5,xi=e=>{let t=e.credentials?X_(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:r=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:o}=e,s;return e.signer?s=Oe(e.signer):e.regionInfoProvider?s=()=>Oe(e.region)().then(async i=>[await e.regionInfoProvider(i,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},i]).then(([i,a])=>{let{signingRegion:c,signingService:d}=i;e.signingRegion=e.signingRegion||c||a,e.signingName=e.signingName||d||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},f=e.signerConstructor||kn;return new f(l)}):s=async i=>{i=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Oe(e.region)(),properties:{}},i);let a=i.signingRegion,c=i.signingName;e.signingRegion=e.signingRegion||a,e.signingName=e.signingName||c||e.serviceId;let d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},l=e.signerConstructor||kn;return new l(d)},{...e,systemClockOffset:n,signingEscapePath:r,credentials:t,signer:s}};var X_=e=>typeof e=="function"?Lr(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<Y_,t=>t.expiration!==void 0):Oe(e);var wi=e=>new Date(Date.now()+e);var Oh=(e,t)=>Math.abs(wi(t).getTime()-e)>=3e5;var xd=(e,t)=>{let r=Date.parse(e);return Oh(r,t)?r-Date.now():t};var Q_=e=>(t,r)=>async function(n){if(!K.isInstance(n.request))return t(n);let o=r.endpointV2?.properties?.authSchemes?.[0],s=o?.name==="sigv4a"?o?.signingRegionSet?.join(","):void 0,i=await e.signer(o),a=await t({...n,request:await i.sign(n.request,{signingDate:wi(e.systemClockOffset),signingRegion:s||r.signing_region,signingService:r.signing_service})}).catch(d=>{let l=d.ServerTime??Ih(d.$response);throw l&&(e.systemClockOffset=xd(l,e.systemClockOffset)),d}),c=Ih(a.response);return c&&(e.systemClockOffset=xd(c,e.systemClockOffset)),a},Ih=e=>vt.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,J_={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},bi=e=>({applyToStack:t=>{t.addRelativeTo(Q_(e),J_)}});function $r(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}var wd={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"};var Dh=wd,Bh="",eR=e=>{let{partitions:t}=Dh;for(let n of t){let{regions:o,outputs:s}=n;for(let[i,a]of Object.entries(o))if(i===e)return{...s,...a}}for(let n of t){let{regionRegex:o,outputs:s}=n;if(new RegExp(o).test(e))return{...s}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},Mh=(e,t="")=>{Dh=e,Bh=t},tR=()=>{Mh(wd,"")},bd=()=>Bh;var rR=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Si=e=>rR.test(e)||e.startsWith("[")&&e.endsWith("]");var ar="endpoints";function Ct(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Ct(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Ct).join(", ")})`:JSON.stringify(e,null,2)}var ie=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var Rd={};wo(Rd,{aws:()=>Sd,booleanEquals:()=>sR,getAttr:()=>Ad,isSet:()=>iR,isValidHostLabel:()=>Ai,not:()=>aR,parseURL:()=>cR,stringEquals:()=>dR,substring:()=>lR,uriEncode:()=>fR});var Sd={};wo(Sd,{getUserAgentPrefix:()=>bd,isVirtualHostableS3Bucket:()=>Lh,parseArn:()=>oR,partition:()=>eR,setPartitionInfo:()=>Mh,useDefaultPartitionInfo:()=>tR});var nR=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Ai=(e,t=!1)=>{if(!t)return nR.test(e);let r=e.split(".");for(let n of r)if(!Ai(n))return!1;return!0};var Lh=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!Lh(r))return!1;return!0}return!(!Ai(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Si(e))};var oR=e=>{let t=e.split(":");if(t.length<6)return null;let[r,n,o,s,i,...a]=t;return r!=="arn"||n===""||o===""||a[0]===""?null:{partition:n,service:o,region:s,accountId:i,resourceId:a[0].includes("/")?a[0].split("/"):a}};var sR=(e,t)=>e===t;var Fh=e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new ie(`Path: '${e}' does not end with ']'`);let s=n.slice(o+1,-1);if(Number.isNaN(parseInt(s)))throw new ie(`Invalid array index: '${s}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(s)}else r.push(n)}return r};var Ad=(e,t)=>Fh(t).reduce((r,n)=>{if(typeof r!="object")throw new ie(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e);var iR=e=>e!=null;var aR=e=>!e;var zh;(function(e){e.AAAA="AAAA",e.A="A"})(zh||(zh={}));var _d={[vn.HTTP]:80,[vn.HTTPS]:443},cR=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:u,port:y,protocol:x="",path:w="",query:A={}}=e,G=new URL(`${x}//${u}${y?`:${y}`:""}${w}`);return G.search=Object.entries(A).map(([le,We])=>`${le}=${We}`).join("&"),G}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:o,pathname:s,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(vn).includes(c))return null;let d=Si(o),l=r.includes(`${n}:${_d[c]}`)||typeof e=="string"&&e.includes(`${n}:${_d[c]}`),f=`${n}${l?`:${_d[c]}`:""}`;return{scheme:c,authority:f,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:d}};var dR=(e,t)=>e===t;var lR=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r);var fR=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var _i=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let s=e.indexOf("{",o);if(s===-1){r.push(e.slice(o));break}r.push(e.slice(o,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),o=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[c,d]=a.split("#");r.push(Ad(n[c],d))}else r.push(n[a]);o=i+1}return r.join("")};var $h=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var Ur=(e,t,r)=>{if(typeof e=="string")return _i(e,r);if(e.fn)return Ri(e,r);if(e.ref)return $h(e,r);throw new ie(`'${t}': ${String(e)} is not a string, function or reference.`)};var Ri=({fn:e,argv:t},r)=>{let n=t.map(o=>["boolean","number"].includes(typeof o)?o:Ur(o,"arg",r));return e.split(".").reduce((o,s)=>o[s],Rd)(...n)};var Uh=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new ie(`'${e}' is already defined in Reference Record.`);let n=Ri(t,r);return r.logger?.debug?.(ar,`evaluateCondition: ${Ct(t)} = ${Ct(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}};var eo=(e=[],t)=>{let r={};for(let n of e){let{result:o,toAssign:s}=Uh(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!o)return{result:o};s&&(r[s.name]=s.value,t.logger?.debug?.(ar,`assign: ${s.name} := ${Ct(s.value)}`))}return{result:!0,referenceRecord:r}};var jh=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(s=>{let i=Ur(s,"Header value entry",t);if(typeof i!="string")throw new ie(`Header '${n}' value '${i}' is not a string`);return i})}),{});var vd=(e,t)=>{if(Array.isArray(e))return e.map(r=>vd(r,t));switch(typeof e){case"string":return _i(e,t);case"object":if(e===null)throw new ie(`Unexpected endpoint property: ${e}`);return vi(e,t);case"boolean":return e;default:throw new ie(`Unexpected endpoint property type: ${typeof e}`)}};var vi=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:vd(o,t)}),{});var qh=(e,t)=>{let r=Ur(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new ie(`Endpoint URL must be a string, got ${typeof r}`)};var Gh=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:s}=eo(r,t);if(!o)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:c,headers:d}=n;return t.logger?.debug?.(ar,`Resolving endpoint from template: ${Ct(n)}`),{...d!=null&&{headers:jh(d,i)},...c!=null&&{properties:vi(c,i)},url:qh(a,i)}};var Kh=(e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:s}=eo(r,t);if(o)throw new ie(Ur(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))};var Hh=(e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:s}=eo(r,t);if(o)return Ti(n,{...t,referenceRecord:{...t.referenceRecord,...s}})};var Ti=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=Gh(r,t);if(n)return n}else if(r.type==="error")Kh(r,t);else if(r.type==="tree"){let n=Hh(r,t);if(n)return n}else throw new ie(`Unknown endpoint rule: ${r}`);throw new ie("Rules evaluation failed")};var jr=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:o,rules:s}=e;t.logger?.debug?.(`${ar} Initial EndpointParams: ${Ct(r)}`);let i=Object.entries(o).filter(([,d])=>d.default!=null).map(([d,l])=>[d,l.default]);if(i.length>0)for(let[d,l]of i)r[d]=r[d]??l;let a=Object.entries(o).filter(([,d])=>d.required).map(([d])=>d);for(let d of a)if(r[d]==null)throw new ie(`Missing required parameter: '${d}'`);let c=Ti(s,{endpointParams:r,logger:n,referenceRecord:{}});if(t.endpointParams?.Endpoint)try{let d=new URL(t.endpointParams.Endpoint),{protocol:l,port:f}=d;c.url.protocol=l,c.url.port=f}catch{}return t.logger?.debug?.(`${ar} Resolved endpoint: ${Ct(c)}`),c};var Td="user-agent",ki="x-amz-user-agent",kd=" ",Ni="/",Vh=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Wh=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,Nd="-";var uR=e=>(t,r)=>async n=>{let{request:o}=n;if(!K.isInstance(o))return t(n);let{headers:s}=o,i=r?.userAgent?.map(Pd)||[],a=(await e.defaultUserAgentProvider()).map(Pd),c=e?.customUserAgent?.map(Pd)||[],d=bd(),l=(d?[d]:[]).concat([...a,...i,...c]).join(kd),f=[...a.filter(u=>u.startsWith("aws-sdk-")),...c].join(kd);return e.runtime!=="browser"?(f&&(s[ki]=s[ki]?`${s[Td]} ${f}`:f),s[Td]=l):s[ki]=l,t({...n,request:o})},Pd=e=>{let t=e[0].split(Ni).map(i=>i.replace(Vh,Nd)).join(Ni),r=e[1]?.replace(Wh,Nd),n=t.indexOf(Ni),o=t.substring(0,n),s=t.substring(n+1);return o==="api"&&(s=s.toLowerCase()),[o,s,r].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},mR={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},qr=e=>({applyToStack:t=>{t.add(uR(e),mR)}});var xt;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(xt||(xt={}));var Ft=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var hR="AWS_USE_DUALSTACK_ENDPOINT",pR="use_dualstack_endpoint";var Gr={environmentVariableSelector:e=>Ft(e,hR,xt.ENV),configFileSelector:e=>Ft(e,pR,xt.CONFIG),default:!1};var yR="AWS_USE_FIPS_ENDPOINT",gR="use_fips_endpoint";var Kr={environmentVariableSelector:e=>Ft(e,yR,xt.ENV),configFileSelector:e=>Ft(e,gR,xt.CONFIG),default:!1};var ER="AWS_REGION",CR="region",zt={environmentVariableSelector:e=>e[ER],configFileSelector:e=>e[CR],default:()=>{throw new Error("Region is missing")}},Hr={preferredFile:"credentials"};var Pi=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var Od=e=>Pi(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var Vr=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Od(t);let n=await t();return Od(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return Pi(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};var Yh=e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)});var Xh="content-length";function xR(e){return t=>async r=>{let n=r.request;if(K.isInstance(n)){let{body:o,headers:s}=n;if(o&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(Xh)===-1)try{let i=e(o);n.headers={...n.headers,[Xh]:String(i)}}catch{}}return t({...r,request:n})}}var wR={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Wr=e=>({applyToStack:t=>{t.add(xR(e.bodyLengthChecker),wR)}});var Qh=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),RR(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!_R(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},bR=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,SR=/(\d+\.){3}\d+/,AR=/\.\./;var _R=e=>bR.test(e)&&!SR.test(e)&&!AR.test(e),RR=e=>{let[t,r,n,o,s,i]=e.split(":"),a=t==="arn"&&e.split(":").length>=6,c=[t,r,n,s,i].filter(Boolean).length===5;if(a&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!r&&!!n&&!!s&&!!i};var Jh=(e,t,r)=>{let n=async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o};return e==="endpoint"||t==="endpoint"?async()=>{let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:s,hostname:i,port:a,path:c}=o;return`${s}//${i}${a?":"+a:""}${c}`}}return o}:n};var Zh=async(e,t,r,n)=>{let o=await vR(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},vR=async(e,t,r)=>{let n={},o=t?.getEndpointParameterInstructions?.()||{};for(let[s,i]of Object.entries(o))switch(i.type){case"staticContextParams":n[s]=i.value;break;case"contextParams":n[s]=e[i.name];break;case"clientContextParams":case"builtInParams":n[s]=await Jh(i.name,s,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await Qh(n),n};function ep(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}var ot=e=>{if(typeof e=="string")return ot(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:s}=e,i;return s&&(i=ep(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:i}};var tp=e=>typeof e=="object"?"url"in e?ot(e.url):e:ot(e);var rp=({config:e,instructions:t})=>(r,n)=>async o=>{let s=await Zh(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=s.properties?.authSchemes;let i=n.authSchemes?.[0];return i&&(n.signing_region=i.signingRegion,n.signing_service=i.signingName),r({...o})};var np=(e,t)=>(r,n)=>async o=>{let{response:s}=await r(o);try{let i=await t(s,e);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+a}throw i}};var op=(e,t)=>(r,n)=>async o=>{let s=n.endpointV2?.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let i=await t(o.input,{...e,endpoint:s});return r({...o,request:i})};var TR={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Id={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function ze(e,t,r){return{applyToStack:n=>{n.add(np(e,r),TR),n.add(op(e,t),Id)}}}var kR={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Id.name},$e=(e,t)=>({applyToStack:r=>{r.addRelativeTo(rp({config:e,instructions:t}),kR)}});var Yr=e=>{let t=e.tls??!0,{endpoint:r}=e,n=r!=null?async()=>tp(await Oe(r)()):void 0;return{...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:Oe(e.useDualstackEndpoint??!1),useFipsEndpoint:Oe(e.useFipsEndpoint??!1)}};var Tt;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(Tt||(Tt={}));var Nn=3,$t=Tt.STANDARD;var sp=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],ip=["TimeoutError","RequestTimeout","RequestTimeoutException"],ap=[500,502,503,504],cp=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"];var to=e=>e.$metadata?.httpStatusCode===429||sp.includes(e.name)||e.$retryable?.throttling==!0,Oi=e=>ip.includes(e.name)||cp.includes(e?.code||"")||ap.includes(e.$metadata?.httpStatusCode||0),dp=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Oi(e)}return!1};var Ko=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),to(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};var Ii="amz-sdk-invocation-id",Di="amz-sdk-request";var lp=()=>{let e=100;return{computeNextBackoffDelay:n=>Math.floor(Math.min(2e4,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}};var Dd=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r});var Pn=class{constructor(t){this.maxAttempts=t,this.mode=Tt.STANDARD,this.capacity=500,this.retryBackoffStrategy=lp(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return Dd({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?500:100);let s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,a=this.getCapacityCost(o);return this.capacity-=a,Dd({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(500,this.capacity+(t.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Nn}`),Nn}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?10:5}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var Mi=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=Tt.ADAPTIVE;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Ko,this.standardRetryStrategy=new Pn(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var Md=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var pp="AWS_MAX_ATTEMPTS",yp="max_attempts",Xr={environmentVariableSelector:e=>{let t=e[pp];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${pp} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[yp];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${yp} mast be a number, got "${t}"`);return r},default:Nn},Qr=e=>{let{retryStrategy:t}=e,r=Oe(e.maxAttempts??Nn);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await Oe(e.retryMode)()===Tt.ADAPTIVE?new Mi(r):new Pn(r))}},NR="AWS_RETRY_MODE",PR="retry_mode",Jr={environmentVariableSelector:e=>e[NR],configFileSelector:e=>e[PR],default:$t};Xa();var OR=e=>(t,r)=>async n=>{let o=await e.retryStrategy(),s=await e.maxAttempts();if(IR(o)){o=o;let i=await o.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,d=0,{request:l}=n;for(K.isInstance(l)&&(l.headers[Ii]=Ps());;)try{K.isInstance(l)&&(l.headers[Di]=`attempt=${c+1}; max=${s}`);let{response:f,output:u}=await t(n);return o.recordSuccess(i),u.$metadata.attempts=c+1,u.$metadata.totalRetryDelay=d,{response:f,output:u}}catch(f){let u=DR(f);a=Md(f);try{i=await o.refreshRetryTokenForRetry(i,u)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=d,a}c=i.getRetryCount();let y=i.getRetryDelay();d+=y,await new Promise(x=>setTimeout(x,y))}}else return o=o,o?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},IR=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",DR=e=>{let t={errorType:BR(e)},r=LR(e.$response);return r&&(t.retryAfterHint=r),t},BR=e=>to(e)?"THROTTLING":Oi(e)?"TRANSIENT":dp(e)?"SERVER_ERROR":"CLIENT_ERROR",MR={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Zr=e=>({applyToStack:t=>{t.add(OR(e),MR)}}),LR=e=>{if(!vt.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};var Ut=class{trace(){}debug(){}info(){}warn(){}error(){}};var no=()=>{let e=[],t=[],r=new Set,n=l=>l.sort((f,u)=>gp[u.step]-gp[f.step]||Ep[u.priority||"normal"]-Ep[f.priority||"normal"]),o=l=>{let f=!1,u=y=>y.name&&y.name===l?(f=!0,r.delete(l),!1):!0;return e=e.filter(u),t=t.filter(u),f},s=l=>{let f=!1,u=y=>y.middleware===l?(f=!0,y.name&&r.delete(y.name),!1):!0;return e=e.filter(u),t=t.filter(u),f},i=l=>(e.forEach(f=>{l.add(f.middleware,{...f})}),t.forEach(f=>{l.addRelativeTo(f.middleware,{...f})}),l),a=l=>{let f=[];return l.before.forEach(u=>{u.before.length===0&&u.after.length===0?f.push(u):f.push(...a(u))}),f.push(l),l.after.reverse().forEach(u=>{u.before.length===0&&u.after.length===0?f.push(u):f.push(...a(u))}),f},c=(l=!1)=>{let f=[],u=[],y={};return e.forEach(w=>{let A={...w,before:[],after:[]};A.name&&(y[A.name]=A),f.push(A)}),t.forEach(w=>{let A={...w,before:[],after:[]};A.name&&(y[A.name]=A),u.push(A)}),u.forEach(w=>{if(w.toMiddleware){let A=y[w.toMiddleware];if(A===void 0){if(l)return;throw new Error(`${w.toMiddleware} is not found when adding ${w.name||"anonymous"} middleware ${w.relation} ${w.toMiddleware}`)}w.relation==="after"&&A.after.push(w),w.relation==="before"&&A.before.push(w)}}),n(f).map(a).reduce((w,A)=>(w.push(...A),w),[])},d={add:(l,f={})=>{let{name:u,override:y}=f,x={step:"initialize",priority:"normal",middleware:l,...f};if(u){if(r.has(u)){if(!y)throw new Error(`Duplicate middleware name '${u}'`);let w=e.findIndex(G=>G.name===u),A=e[w];if(A.step!==x.step||A.priority!==x.priority)throw new Error(`"${u}" middleware with ${A.priority} priority in ${A.step} step cannot be overridden by same-name middleware with ${x.priority} priority in ${x.step} step.`);e.splice(w,1)}r.add(u)}e.push(x)},addRelativeTo:(l,f)=>{let{name:u,override:y}=f,x={middleware:l,...f};if(u){if(r.has(u)){if(!y)throw new Error(`Duplicate middleware name '${u}'`);let w=t.findIndex(G=>G.name===u),A=t[w];if(A.toMiddleware!==x.toMiddleware||A.relation!==x.relation)throw new Error(`"${u}" middleware ${A.relation} "${A.toMiddleware}" middleware cannot be overridden by same-name middleware ${x.relation} "${x.toMiddleware}" middleware.`);t.splice(w,1)}r.add(u)}t.push(x)},clone:()=>i(no()),use:l=>{l.applyToStack(d)},remove:l=>typeof l=="string"?o(l):s(l),removeByTag:l=>{let f=!1,u=y=>{let{tags:x,name:w}=y;return x&&x.includes(l)?(w&&r.delete(w),f=!0,!1):!0};return e=e.filter(u),t=t.filter(u),f},concat:l=>{let f=i(no());return f.use(l),f},applyToStack:i,identify:()=>c(!0).map(l=>l.name+": "+(l.tags||[]).join(",")),resolve:(l,f)=>{for(let u of c().map(y=>y.middleware).reverse())l=u(l,f);return l}};return d},gp={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Ep={high:3,normal:2,low:1};var jt=class{constructor(t){this.middlewareStack=no(),this.config=t}send(t,r,n){let o=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,i=t.resolveMiddleware(this.middlewareStack,this.config,o);if(s)i(t).then(a=>s(null,a.output),a=>s(a)).catch(()=>{});else return i(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var FR=/^[A-Za-z0-9+/]*={0,2}$/,qt=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!FR.exec(e))throw new TypeError("Invalid base64 string.");let t=Zn(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var Gt=e=>ir(e.buffer,e.byteOffset,e.byteLength).toString("base64");function Cp(e,t="utf-8"){return t==="base64"?Gt(e):Et(e)}function xp(e,t){return t==="base64"?cr.mutate(qt(e)):cr.mutate(rt(e))}var cr=class e extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return xp(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return Cp(this,t)}};import{Readable as zR}from"stream";var wp=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:o,checksumLocationName:s,streamHasher:i}=t,a=r!==void 0&&o!==void 0&&s!==void 0&&i!==void 0,c=a?i(o,e):void 0,d=new zR({read:()=>{}});return e.on("data",l=>{let f=n(l)||0;d.push(`${f.toString(16)}\r
`),d.push(l),d.push(`\r
`)}),e.on("end",async()=>{if(d.push(`0\r
`),a){let l=r(await c);d.push(`${s}:${l}\r
`),d.push(`\r
`)}d.push(null)}),d};function Ld(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=Lt(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${Lt(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${Lt(n)}`),t.push(o)}}return t.join("&")}import{Agent as jR,request as qR}from"http";import{Agent as GR,request as KR}from"https";var bp=["ECONNRESET","EPIPE","ETIMEDOUT"];var Fd=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t};var Sp=(e,t,r=0)=>{if(!r)return;let n=setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);e.on("socket",o=>{o.connecting?o.on("connect",()=>{clearTimeout(n)}):clearTimeout(n)})};var Ap=(e,{keepAlive:t,keepAliveMsecs:r})=>{t===!0&&e.on("socket",n=>{n.setKeepAlive(t,r||0)})};var _p=(e,t,r=0)=>{e.setTimeout(r,()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})};import{Readable as $R}from"stream";var Rp=1e3;async function zd(e,t,r=Rp){let n=t.headers??{},o=n.Expect||n.expect,s=-1,i=!1;o==="100-continue"&&await Promise.race([new Promise(a=>{s=Number(setTimeout(a,Math.max(Rp,r)))}),new Promise(a=>{e.on("continue",()=>{clearTimeout(s),a()}),e.on("error",()=>{i=!0,clearTimeout(s),a()})})]),i||UR(e,t.body)}function UR(e,t){t instanceof $R?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}var Kt=class{constructor(t){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:o,httpAgent:s,httpsAgent:i}=t||{},a=!0,c=50;return{connectionTimeout:n,requestTimeout:r??o,httpAgent:s||new jR({keepAlive:a,maxSockets:c}),httpsAgent:i||new GR({keepAlive:a,maxSockets:c})}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((n,o)=>{let s,i=async A=>{await s,n(A)},a=async A=>{await s,o(A)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r?.aborted){let A=new Error("Request aborted");A.name="AbortError",a(A);return}let c=t.protocol==="https:",d=Ld(t.query||{}),l;if(t.username!=null||t.password!=null){let A=t.username??"",G=t.password??"";l=`${A}:${G}`}let f=t.path;d&&(f+=`?${d}`),t.fragment&&(f+=`#${t.fragment}`);let u={headers:t.headers,host:t.hostname,method:t.method,path:f,port:t.port,agent:c?this.config.httpsAgent:this.config.httpAgent,auth:l},x=(c?KR:qR)(u,A=>{let G=new vt({statusCode:A.statusCode||-1,reason:A.statusMessage,headers:Fd(A.headers),body:A});i({response:G})});x.on("error",A=>{bp.includes(A.code)?a(Object.assign(A,{name:"TimeoutError"})):a(A)}),Sp(x,a,this.config.connectionTimeout),_p(x,a,this.config.requestTimeout),r&&(r.onabort=()=>{x.abort();let A=new Error("Request aborted");A.name="AbortError",a(A)});let w=u.agent;typeof w=="object"&&"keepAlive"in w&&Ap(x,{keepAlive:w.keepAlive,keepAliveMsecs:w.keepAliveMsecs}),s=zd(x,t,this.config.requestTimeout).catch(o)})}};var $d=class{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}};import{Writable as HR}from"stream";var Li=class extends HR{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,r,n){this.bufferedBytes.push(t),n()}};var Ht=e=>new Promise((t,r)=>{let n=new Li;e.pipe(n),e.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.bufferedBytes));t(o)})});import{Readable as Ud}from"stream";import{TextDecoder as VR}from"util";var vp="The stream has already been transformed.",Tp=e=>{if(!(e instanceof Ud)){let n=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${n}`)}let t=!1,r=async()=>{if(t)throw new Error(vp);return t=!0,await Ht(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{let o=await r();return n===void 0||Buffer.isEncoding(n)?ir(o.buffer,o.byteOffset,o.byteLength).toString(n):new VR(n).decode(o)},transformToWebStream:()=>{if(t)throw new Error(vp);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Ud.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return t=!0,Ud.toWeb(e)}})};var en=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return cr.mutate(e);if(!e)return cr.mutate(new Uint8Array);let r=t.streamCollector(e);return cr.mutate(await r)};var _e=class{constructor(){this.middlewareStack=no()}};var Vt="***SensitiveInformation***";var kp=(e,t)=>{for(let r of Object.keys(e)){let n=e[r],o=async function(i,a,c){let d=new n(i);if(typeof a=="function")this.send(d,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(d,a||{},c)}else return this.send(d,a)},s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=o}};var Ho=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}};var WR=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Mp.warn(Bp(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},YR=Math.ceil(34028234663852886e22),Np=e=>{let t=WR(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>YR)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},oo=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var so=e=>jd(e,32),Pp=e=>jd(e,16),Op=e=>jd(e,8),jd=(e,t)=>{let r=oo(e);if(r!==void 0&&XR(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},XR=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Ie=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},tn=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},_=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Mp.warn(Bp(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var Ip=e=>Np(typeof e=="string"?Vo(e):e),QR=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Vo=e=>{let t=e.match(QR);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var qd=e=>oo(typeof e=="string"?Vo(e):e);var dr=e=>so(typeof e=="string"?Vo(e):e),Wo=e=>Pp(typeof e=="string"?Vo(e):e),Dp=e=>Op(typeof e=="string"?Vo(e):e),Bp=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Mp={warn:console.warn};var JR=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Kd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function zi(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),s=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),c=o<10?`0${o}`:`${o}`,d=s<10?`0${s}`:`${s}`,l=i<10?`0${i}`:`${i}`,f=a<10?`0${a}`:`${a}`;return`${JR[n]}, ${c} ${Kd[r]} ${t} ${d}:${l}:${f} GMT`}var hj=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var ZR=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),io=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=ZR.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,c,d,l]=t,f=Wo(Yo(n)),u=rn(o,"month",1,12),y=rn(s,"day",1,31),x=Fi(f,u,y,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d});return l.toUpperCase()!="Z"&&x.setTime(x.getTime()-lv(l)),x},ev=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),tv=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),rv=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Hd=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=ev.exec(e);if(t){let[r,n,o,s,i,a,c,d]=t;return Fi(Wo(Yo(s)),Gd(o),rn(n,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d})}if(t=tv.exec(e),t){let[r,n,o,s,i,a,c,d]=t;return sv(Fi(nv(s),Gd(o),rn(n,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d}))}if(t=rv.exec(e),t){let[r,n,o,s,i,a,c,d]=t;return Fi(Wo(Yo(d)),Gd(n),rn(o.trimLeft(),"day",1,31),{hours:s,minutes:i,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")};var Fi=(e,t,r,n)=>{let o=t-1;return av(e,o,r),new Date(Date.UTC(e,o,r,rn(n.hours,"hour",0,23),rn(n.minutes,"minute",0,59),rn(n.seconds,"seconds",0,60),dv(n.fractionalMilliseconds)))},nv=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+Wo(Yo(e));return r<t?r+100:r},ov=50*365*24*60*60*1e3,sv=e=>e.getTime()-new Date().getTime()>ov?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Gd=e=>{let t=Kd.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},iv=[31,28,31,30,31,30,31,31,30,31,30,31],av=(e,t,r)=>{let n=iv[t];if(t===1&&cv(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Kd[t]} in ${e}: ${r}`)},cv=e=>e%4===0&&(e%100!==0||e%400===0),rn=(e,t,r,n)=>{let o=Dp(Yo(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},dv=e=>e==null?0:Ip("0."+e)*1e3,lv=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},Yo=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var Wt=class e extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,e.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},Y=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};var fv=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=uv(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,i=new r({name:t?.code||t?.Code||n||s||"UnknownError",$fault:"client",$metadata:o});throw Y(i,t)},nn=e=>({output:t,parsedBody:r,errorCode:n})=>{fv({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},uv=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var on=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var Lp=!1,sn=e=>{e&&!Lp&&parseInt(e.substring(1,e.indexOf(".")))<14&&(Lp=!0)};var Fp=e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>Yn.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>Yn.MD5,checksumConstructor:()=>e.md5}),{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},zp=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t};var ao=e=>({...Fp(e)});var co=e=>({...zp(e)});function lo(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var $i=e=>Array.isArray(e)?e:[e];var Xo=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=Xo(e[r]));return e};var Vd=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};Vd.prototype=Object.create(String.prototype,{constructor:{value:Vd,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Vd,String);function V(e,t,r){let n,o,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return o=t,s=r,mv(n,o,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){n[i]=s[i];continue}$p(n,null,s,i)}return n}var ae=(e,t)=>{let r={};for(let n in t)$p(r,e,t,n);return r},mv=(e,t,r)=>V(e,Object.entries(r).reduce((n,[o,s])=>(Array.isArray(s)?n[o]=s:typeof s=="function"?n[o]=[t,s()]:n[o]=[t,s],n),{})),$p=(e,t,r,n)=>{if(t!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=hv,c=pv,d=n]=i;(typeof a=="function"&&a(t[d])||typeof a!="function"&&a)&&(e[n]=c(t[d]));return}let[o,s]=r[n];if(typeof s=="function"){let i,a=o===void 0&&(i=s())!=null,c=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?e[n]=i:c&&(e[n]=s())}else{let i=o===void 0&&s!=null,a=typeof o=="function"&&!!o(s)||typeof o!="function"&&!!o;(i||a)&&(e[n]=s)}},hv=e=>e!=null,pv=e=>e;var Ui=(e,t,r,n,o,s)=>{if(t!=null&&t[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(o,s?i.split("/").map(a=>lo(a)).join("/"):lo(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e};var fo=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=fo(e[r]));return t}return e};var Up=e=>({...e,useFipsEndpoint:e.useFipsEndpoint??!1,useDualstackEndpoint:e.useDualstackEndpoint??!1,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"});var jp={name:"@aws-sdk/client-s3",description:"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version:"3.400.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn test:unit","test:e2e":"ts-mocha test/**/*.ispec.ts && karma start karma.conf.js","test:unit":"ts-mocha test/**/*.spec.ts"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha1-browser":"3.0.0","@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.398.0","@aws-sdk/credential-provider-node":"3.398.0","@aws-sdk/middleware-bucket-endpoint":"3.398.0","@aws-sdk/middleware-expect-continue":"3.398.0","@aws-sdk/middleware-flexible-checksums":"3.400.0","@aws-sdk/middleware-host-header":"3.398.0","@aws-sdk/middleware-location-constraint":"3.398.0","@aws-sdk/middleware-logger":"3.398.0","@aws-sdk/middleware-recursion-detection":"3.398.0","@aws-sdk/middleware-sdk-s3":"3.398.0","@aws-sdk/middleware-signing":"3.398.0","@aws-sdk/middleware-ssec":"3.398.0","@aws-sdk/middleware-user-agent":"3.398.0","@aws-sdk/signature-v4-multi-region":"3.398.0","@aws-sdk/types":"3.398.0","@aws-sdk/util-endpoints":"3.398.0","@aws-sdk/util-user-agent-browser":"3.398.0","@aws-sdk/util-user-agent-node":"3.398.0","@aws-sdk/xml-builder":"3.310.0","@smithy/config-resolver":"^2.0.5","@smithy/eventstream-serde-browser":"^2.0.5","@smithy/eventstream-serde-config-resolver":"^2.0.5","@smithy/eventstream-serde-node":"^2.0.5","@smithy/fetch-http-handler":"^2.0.5","@smithy/hash-blob-browser":"^2.0.5","@smithy/hash-node":"^2.0.5","@smithy/hash-stream-node":"^2.0.5","@smithy/invalid-dependency":"^2.0.5","@smithy/md5-js":"^2.0.5","@smithy/middleware-content-length":"^2.0.5","@smithy/middleware-endpoint":"^2.0.5","@smithy/middleware-retry":"^2.0.5","@smithy/middleware-serde":"^2.0.5","@smithy/middleware-stack":"^2.0.0","@smithy/node-config-provider":"^2.0.5","@smithy/node-http-handler":"^2.0.5","@smithy/protocol-http":"^2.0.5","@smithy/smithy-client":"^2.0.5","@smithy/types":"^2.2.2","@smithy/url-parser":"^2.0.5","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.5","@smithy/util-defaults-mode-node":"^2.0.5","@smithy/util-retry":"^2.0.0","@smithy/util-stream":"^2.0.5","@smithy/util-utf8":"^2.0.0","@smithy/util-waiter":"^2.0.5","fast-xml-parser":"4.2.5",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"}};var qp=(e,{stsClientCtor:t})=>xi({...e,stsClientCtor:t});var Gp=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"});var Kp={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.398.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/credential-provider-node":"3.398.0","@aws-sdk/middleware-host-header":"3.398.0","@aws-sdk/middleware-logger":"3.398.0","@aws-sdk/middleware-recursion-detection":"3.398.0","@aws-sdk/middleware-sdk-sts":"3.398.0","@aws-sdk/middleware-signing":"3.398.0","@aws-sdk/middleware-user-agent":"3.398.0","@aws-sdk/types":"3.398.0","@aws-sdk/util-endpoints":"3.398.0","@aws-sdk/util-user-agent-browser":"3.398.0","@aws-sdk/util-user-agent-node":"3.398.0","@smithy/config-resolver":"^2.0.5","@smithy/fetch-http-handler":"^2.0.5","@smithy/hash-node":"^2.0.5","@smithy/invalid-dependency":"^2.0.5","@smithy/middleware-content-length":"^2.0.5","@smithy/middleware-endpoint":"^2.0.5","@smithy/middleware-retry":"^2.0.5","@smithy/middleware-serde":"^2.0.5","@smithy/middleware-stack":"^2.0.0","@smithy/node-config-provider":"^2.0.5","@smithy/node-http-handler":"^2.0.5","@smithy/protocol-http":"^2.0.5","@smithy/smithy-client":"^2.0.5","@smithy/types":"^2.2.2","@smithy/url-parser":"^2.0.5","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.5","@smithy/util-defaults-mode-node":"^2.0.5","@smithy/util-retry":"^2.0.0","@smithy/util-utf8":"^2.0.0","fast-xml-parser":"4.2.5",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var wt=class e extends Wt{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var ji=class e extends wt{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},qi=class e extends wt{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Gi=class e extends wt{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Ki=class e extends wt{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Hi=class e extends wt{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Vi=class e extends wt{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Wi=class e extends wt{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var Hp=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:Vt}}),Vp=e=>({...e,...e.Credentials&&{Credentials:Hp(e.Credentials)}});var Wp=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:Vt}}),Yp=e=>({...e,...e.Credentials&&{Credentials:Hp(e.Credentials)}});var Ry=tr(nl());var vy=async(e,t)=>{let r=$y,n;return n=jy({...PT(e,t),Action:"AssumeRole",Version:"2011-06-15"}),zy(t,r,"/",void 0,n)};var Ty=async(e,t)=>{let r=$y,n;return n=jy({...OT(e,t),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),zy(t,r,"/",void 0,n)};var ky=async(e,t)=>{if(e.statusCode>=300)return RT(e,t);let r=await ol(e.body,t),n={};return n=zT(r.AssumeRoleResult,t),{$metadata:fr(e),...n}},RT=async(e,t)=>{let r={...e,body:await Uy(e.body,t)},n=qy(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Py(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Oy(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Iy(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Dy(r,t);default:let o=r.body;return Fy({output:e,parsedBody:o.Error,errorCode:n})}};var Ny=async(e,t)=>{if(e.statusCode>=300)return vT(e,t);let r=await ol(e.body,t),n={};return n=$T(r.AssumeRoleWithWebIdentityResult,t),{$metadata:fr(e),...n}},vT=async(e,t)=>{let r={...e,body:await Uy(e.body,t)},n=qy(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Py(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await TT(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await kT(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await NT(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Oy(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Iy(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Dy(r,t);default:let o=r.body;return Fy({output:e,parsedBody:o.Error,errorCode:n})}};var Py=async(e,t)=>{let r=e.body,n=UT(r.Error,t),o=new ji({$metadata:fr(e),...n});return Y(o,r)},TT=async(e,t)=>{let r=e.body,n=jT(r.Error,t),o=new Wi({$metadata:fr(e),...n});return Y(o,r)},kT=async(e,t)=>{let r=e.body,n=qT(r.Error,t),o=new Hi({$metadata:fr(e),...n});return Y(o,r)};var NT=async(e,t)=>{let r=e.body,n=GT(r.Error,t),o=new Vi({$metadata:fr(e),...n});return Y(o,r)},Oy=async(e,t)=>{let r=e.body,n=KT(r.Error,t),o=new qi({$metadata:fr(e),...n});return Y(o,r)},Iy=async(e,t)=>{let r=e.body,n=HT(r.Error,t),o=new Gi({$metadata:fr(e),...n});return Y(o,r)},Dy=async(e,t)=>{let r=e.body,n=VT(r.Error,t),o=new Ki({$metadata:fr(e),...n});return Y(o,r)},PT=(e,t)=>{let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.PolicyArns!=null){let n=By(e.PolicyArns,t);e.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}if(e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),e.Tags!=null){let n=FT(e.Tags,t);e.Tags?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([o,s])=>{let i=`Tags.${o}`;r[i]=s})}if(e.TransitiveTagKeys!=null){let n=LT(e.TransitiveTagKeys,t);e.TransitiveTagKeys?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([o,s])=>{let i=`TransitiveTagKeys.${o}`;r[i]=s})}if(e.ExternalId!=null&&(r.ExternalId=e.ExternalId),e.SerialNumber!=null&&(r.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(r.TokenCode=e.TokenCode),e.SourceIdentity!=null&&(r.SourceIdentity=e.SourceIdentity),e.ProvidedContexts!=null){let n=BT(e.ProvidedContexts,t);e.ProvidedContexts?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([o,s])=>{let i=`ProvidedContexts.${o}`;r[i]=s})}return r};var OT=(e,t)=>{let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.WebIdentityToken!=null&&(r.WebIdentityToken=e.WebIdentityToken),e.ProviderId!=null&&(r.ProviderId=e.ProviderId),e.PolicyArns!=null){let n=By(e.PolicyArns,t);e.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}return e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),r};var By=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=IT(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},IT=(e,t)=>{let r={};return e.arn!=null&&(r.arn=e.arn),r},DT=(e,t)=>{let r={};return e.ProviderArn!=null&&(r.ProviderArn=e.ProviderArn),e.ContextAssertion!=null&&(r.ContextAssertion=e.ContextAssertion),r},BT=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=DT(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},MT=(e,t)=>{let r={};return e.Key!=null&&(r.Key=e.Key),e.Value!=null&&(r.Value=e.Value),r},LT=(e,t)=>{let r={},n=1;for(let o of e)o!==null&&(r[`member.${n}`]=o,n++);return r},FT=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=MT(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},My=(e,t)=>{let r={};return e.AssumedRoleId!==void 0&&(r.AssumedRoleId=_(e.AssumedRoleId)),e.Arn!==void 0&&(r.Arn=_(e.Arn)),r},zT=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=Ly(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=My(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=dr(e.PackedPolicySize)),e.SourceIdentity!==void 0&&(r.SourceIdentity=_(e.SourceIdentity)),r};var $T=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=Ly(e.Credentials,t)),e.SubjectFromWebIdentityToken!==void 0&&(r.SubjectFromWebIdentityToken=_(e.SubjectFromWebIdentityToken)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=My(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=dr(e.PackedPolicySize)),e.Provider!==void 0&&(r.Provider=_(e.Provider)),e.Audience!==void 0&&(r.Audience=_(e.Audience)),e.SourceIdentity!==void 0&&(r.SourceIdentity=_(e.SourceIdentity)),r},Ly=(e,t)=>{let r={};return e.AccessKeyId!==void 0&&(r.AccessKeyId=_(e.AccessKeyId)),e.SecretAccessKey!==void 0&&(r.SecretAccessKey=_(e.SecretAccessKey)),e.SessionToken!==void 0&&(r.SessionToken=_(e.SessionToken)),e.Expiration!==void 0&&(r.Expiration=Ie(io(e.Expiration))),r};var UT=(e,t)=>{let r={};return e.message!==void 0&&(r.message=_(e.message)),r};var jT=(e,t)=>{let r={};return e.message!==void 0&&(r.message=_(e.message)),r},qT=(e,t)=>{let r={};return e.message!==void 0&&(r.message=_(e.message)),r};var GT=(e,t)=>{let r={};return e.message!==void 0&&(r.message=_(e.message)),r},KT=(e,t)=>{let r={};return e.message!==void 0&&(r.message=_(e.message)),r},HT=(e,t)=>{let r={};return e.message!==void 0&&(r.message=_(e.message)),r},VT=(e,t)=>{let r={};return e.message!==void 0&&(r.message=_(e.message)),r},fr=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),WT=(e,t)=>en(e,t).then(r=>t.utf8Encoder(r)),Fy=nn(wt),zy=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:s,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new K(d)},$y={"content-type":"application/x-www-form-urlencoded"},ol=(e,t)=>WT(e,t).then(r=>{if(r.length){let n=new Ry.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o=n.parse(r),s="#text",i=Object.keys(o)[0],a=o[i];return a[s]&&(a[i]=a[s],delete a[s]),Xo(a)}return{}}),Uy=async(e,t)=>{let r=await ol(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},jy=e=>Object.entries(e).map(([t,r])=>lo(t)+"="+lo(r)).join("&"),qy=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};var Xi=class e extends _e{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(ze(r,this.serialize,this.deserialize)),this.middlewareStack.use($e(r,e.getEndpointParameterInstructions())),this.middlewareStack.use(bi(r));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:Vp},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return vy(t,r)}deserialize(t,r){return ky(t,r)}};var Qi=class e extends _e{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(ze(r,this.serialize,this.deserialize)),this.middlewareStack.use($e(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:Wp,outputFilterSensitiveLog:Yp},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Ty(t,r)}deserialize(t,r){return Ny(t,r)}};var Gy="us-east-1",Ky=e=>typeof e!="function"?e===void 0?Gy:e:async()=>{try{return await e()}catch{return Gy}},sl=(e,t)=>{let r,n;return async(o,s)=>{if(n=o,!r){let{logger:a,region:c,requestHandler:d}=e;r=new t({logger:a,credentialDefaultProvider:()=>async()=>n,region:Ky(c||e.region),...d?{requestHandler:d}:{}})}let{Credentials:i}=await r.send(new Xi(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration}}},il=(e,t)=>{let r;return async n=>{if(!r){let{logger:s,region:i,requestHandler:a}=e;r=new t({logger:s,region:Ky(i||e.region),...a?{requestHandler:a}:{}})}let{Credentials:o}=await r.send(new Qi(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration}}},Hy=e=>t=>e({roleAssumer:sl(t,t.stsClientCtor),roleAssumerWithWebIdentity:il(t,t.stsClientCtor),...t});var YT="AWS_ACCESS_KEY_ID",XT="AWS_SECRET_ACCESS_KEY",QT="AWS_SESSION_TOKEN",JT="AWS_CREDENTIAL_EXPIRATION",Ji=()=>async()=>{let e=process.env[YT],t=process.env[XT],r=process.env[QT],n=process.env[JT];if(e&&t)return{accessKeyId:e,secretAccessKey:t,...r&&{sessionToken:r},...n&&{expiration:new Date(n)}};throw new D("Unable to find environment variable credentials.")};import{homedir as ZT}from"os";import{sep as ek}from"path";var uo=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${ek}`}=process.env;return e||t||(r?`${n}${r}`:ZT())};var al="AWS_PROFILE",tk="default",bt=e=>e.profile||process.env[al]||tk;import{createHash as rk}from"crypto";import{join as nk}from"path";var Zi=e=>{let r=rk("sha1").update(e).digest("hex");return nk(uo(),".aws","sso","cache",`${r}.json`)};import{promises as ok}from"fs";var{readFile:sk}=ok,ea=async e=>{let t=Zi(e),r=await sk(t,"utf8");return JSON.parse(r)};import{join as ik}from"path";var ak="AWS_CONFIG_FILE",ta=()=>process.env[ak]||ik(uo(),".aws","config");import{join as ck}from"path";var dk="AWS_SHARED_CREDENTIALS_FILE",Vy=()=>process.env[dk]||ck(uo(),".aws","credentials");var Wy=/^profile\s(["'])?([^\1]+)\1$/,Yy=e=>Object.entries(e).filter(([t])=>Wy.test(t)).reduce((t,[r,n])=>({...t,[Wy.exec(r)[2]]:n}),{...e.default&&{default:e.default}});var lk=["__proto__","profile __proto__"],Zo=e=>{let t={},r;for(let n of e.split(/\r?\n/))if(n=n.split(/(^|\s)[;#]/)[0].trim(),n[0]==="["&&n[n.length-1]==="]"){if(r=n.substring(1,n.length-1),lk.includes(r))throw new Error(`Found invalid profile name "${r}"`)}else if(r){let s=n.indexOf("="),i=0,a=n.length-1;if(s!==-1&&s!==i&&s!==a){let[d,l]=[n.substring(0,s).trim(),n.substring(s+1).trim()];t[r]=t[r]||{},t[r][d]=l}}return t};import{promises as fk}from"fs";var{readFile:uk}=fk,cl={},es=(e,t)=>((!cl[e]||t?.ignoreCache)&&(cl[e]=uk(e,"utf8")),cl[e]);var Xy=()=>({}),ra=async(e={})=>{let{filepath:t=Vy(),configFilepath:r=ta()}=e,n=await Promise.all([es(r,{ignoreCache:e.ignoreCache}).then(Zo).then(Yy).catch(Xy),es(t,{ignoreCache:e.ignoreCache}).then(Zo).catch(Xy)]);return{configFile:n[0],credentialsFile:n[1]}};var Qy=/^sso-session\s(["'])?([^\1]+)\1$/,Jy=e=>Object.entries(e).filter(([t])=>Qy.test(t)).reduce((t,[r,n])=>({...t,[Qy.exec(r)[2]]:n}),{});var mk=()=>({}),na=async(e={})=>es(e.configFilepath??ta()).then(Zo).then(Jy).catch(mk);var Zy=(...e)=>{let t={};for(let r of e)for(let[n,o]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],o):t[n]=o;return t};var cn=async e=>{let t=await ra(e);return Zy(t.configFile,t.credentialsFile)};import{parse as yk}from"url";import{Buffer as hk}from"buffer";import{request as pk}from"http";function ur(e){return new Promise((t,r)=>{let n=pk({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",o=>{r(Object.assign(new yt("Unable to connect to instance metadata service"),o)),n.destroy()}),n.on("timeout",()=>{r(new yt("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",o=>{let{statusCode:s=400}=o;(s<200||300<=s)&&(r(Object.assign(new yt("Error response received from instance metadata service"),{statusCode:s})),n.destroy());let i=[];o.on("data",a=>{i.push(a)}),o.on("end",()=>{t(hk.concat(i)),n.destroy()})}),n.end()})}var oa=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",sa=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)});var ia=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t});var ts=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r};var rs="AWS_CONTAINER_CREDENTIALS_FULL_URI",ns="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",eg="AWS_CONTAINER_AUTHORIZATION_TOKEN",aa=(e={})=>{let{timeout:t,maxRetries:r}=ia(e);return()=>ts(async()=>{let n=await wk(),o=JSON.parse(await gk(t,n));if(!oa(o))throw new D("Invalid response received from instance metadata service.");return sa(o)},r)},gk=async(e,t)=>(process.env[eg]&&(t.headers={...t.headers,Authorization:process.env[eg]}),(await ur({...t,timeout:e})).toString()),Ek="169.254.170.2",Ck={localhost:!0,"127.0.0.1":!0},xk={"http:":!0,"https:":!0},wk=async()=>{if(process.env[ns])return{hostname:Ek,path:process.env[ns]};if(process.env[rs]){let e=yk(process.env[rs]);if(!e.hostname||!(e.hostname in Ck))throw new D(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in xk))throw new D(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new D(`The container metadata credential provider cannot be used unless the ${ns} or ${rs} environment variable is set`,!1)};var tg=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new D(t.message||`Cannot load config from environment variables with getter: ${e}`)}};var rg=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=bt(r),{configFile:o,credentialsFile:s}=await ra(r),i=s[n]||{},a=o[n]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let d=e(c);if(d===void 0)throw new Error;return d}catch(d){throw new D(d.message||`Cannot load config for profile ${n} in SDK configuration files with getter: ${e}`)}};var bk=e=>typeof e=="function",ng=e=>bk(e)?async()=>await e():$m(e);var W=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>Lr(ri(tg(e),rg(t,n),ng(r)));var os;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(os||(os={}));var Sk="AWS_EC2_METADATA_SERVICE_ENDPOINT",Ak="ec2_metadata_service_endpoint",og={environmentVariableSelector:e=>e[Sk],configFileSelector:e=>e[Ak],default:void 0};var dn;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(dn||(dn={}));var _k="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",Rk="ec2_metadata_service_endpoint_mode",sg={environmentVariableSelector:e=>e[_k],configFileSelector:e=>e[Rk],default:dn.IPv4};var ss=async()=>ot(await vk()||await Tk()),vk=async()=>W(og)(),Tk=async()=>{let e=await W(sg)();switch(e){case dn.IPv4:return os.IPv4;case dn.IPv6:return os.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(dn)}`)}};var kk="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",dl=(e,t)=>{let r=300+Math.floor(Math.random()*300),n=new Date(Date.now()+r*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+kk);let o=e.originalExpiration??e.expiration;return{...e,...o?{originalExpiration:o}:{},expiration:n}};var ig=(e,t={})=>{let r=t?.logger||console,n;return async()=>{let o;try{o=await e(),o.expiration&&o.expiration.getTime()<Date.now()&&(o=dl(o,r))}catch(s){if(n)r.warn("Credential renew failed: ",s),o=dl(n,r);else throw s}return n=o,o}};var ag="/latest/meta-data/iam/security-credentials/",Nk="/latest/api/token",ca=(e={})=>ig(Pk(e),{logger:e.logger}),Pk=e=>{let t=!1,{timeout:r,maxRetries:n}=ia(e),o=async(s,i)=>{let a=(await ts(async()=>{let c;try{c=await Ik(i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)).trim();return ts(async()=>{let c;try{c=await Dk(a,i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)};return async()=>{let s=await ss();if(t)return o(n,{...s,timeout:r});{let i;try{i=(await Ok({...s,timeout:r})).toString()}catch(a){if(a?.statusCode===400)throw Object.assign(a,{message:"EC2 Metadata token request returned error"});return(a.message==="TimeoutError"||[403,404,405].includes(a.statusCode))&&(t=!0),o(n,{...s,timeout:r})}return o(n,{...s,headers:{"x-aws-ec2-metadata-token":i},timeout:r})}}},Ok=async e=>ur({...e,path:Nk,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),Ik=async e=>(await ur({...e,path:ag})).toString(),Dk=async(e,t)=>{let r=JSON.parse((await ur({...t,path:ag+e})).toString());if(!oa(r))throw new D("Invalid response received from instance metadata service.");return sa(r)};var cg=(e,t)=>{let r={EcsContainer:aa,Ec2InstanceMetadata:ca,Environment:Ji};if(e in r)return r[e]();throw new D(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};var dg=e=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(Bk(e)||Mk(e)),Bk=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",Mk=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",lg=async(e,t,r,n={})=>{let o=t[e];if(!r.roleAssumer)throw new D(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:s}=o;if(s&&s in n)throw new D(`Detected a cycle attempting to resolve credentials for profile ${bt(r)}. Profiles visited: `+Object.keys(n).join(", "),!1);let i=s?da(s,t,r,{...n,[s]:!0}):cg(o.credential_source,e)(),a={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id},{mfa_serial:c}=o;if(c){if(!r.mfaCodeProvider)throw new D(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);a.SerialNumber=c,a.TokenCode=await r.mfaCodeProvider(c)}let d=await i;return r.roleAssumer(d,a)};import{exec as Lk}from"child_process";import{promisify as Fk}from"util";var fg=(e,t)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let r=new Date;if(new Date(t.Expiration)<r)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)}}};var ug=async(e,t)=>{let r=t[e];if(t[e]){let n=r.credential_process;if(n!==void 0){let o=Fk(Lk);try{let{stdout:s}=await o(n),i;try{i=JSON.parse(s.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return fg(e,i)}catch(s){throw new D(s.message)}}else throw new D(`Profile ${e} did not contain credential_process.`)}else throw new D(`Profile ${e} could not be found in shared credentials file.`)};var la=(e={})=>async()=>{let t=await cn(e);return ug(bt(e),t)};var mg=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",hg=async(e,t)=>la({...e,profile:t})();var is=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");var pg=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});var yg={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.398.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/middleware-host-header":"3.398.0","@aws-sdk/middleware-logger":"3.398.0","@aws-sdk/middleware-recursion-detection":"3.398.0","@aws-sdk/middleware-user-agent":"3.398.0","@aws-sdk/types":"3.398.0","@aws-sdk/util-endpoints":"3.398.0","@aws-sdk/util-user-agent-browser":"3.398.0","@aws-sdk/util-user-agent-node":"3.398.0","@smithy/config-resolver":"^2.0.5","@smithy/fetch-http-handler":"^2.0.5","@smithy/hash-node":"^2.0.5","@smithy/invalid-dependency":"^2.0.5","@smithy/middleware-content-length":"^2.0.5","@smithy/middleware-endpoint":"^2.0.5","@smithy/middleware-retry":"^2.0.5","@smithy/middleware-serde":"^2.0.5","@smithy/middleware-stack":"^2.0.0","@smithy/node-config-provider":"^2.0.5","@smithy/node-http-handler":"^2.0.5","@smithy/protocol-http":"^2.0.5","@smithy/smithy-client":"^2.0.5","@smithy/types":"^2.2.2","@smithy/url-parser":"^2.0.5","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.5","@smithy/util-defaults-mode-node":"^2.0.5","@smithy/util-retry":"^2.0.0","@smithy/util-utf8":"^2.0.0",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};import{platform as $k,release as Uk}from"os";import{env as Eg,versions as jk}from"process";var gg=()=>{try{return typeof I=="function"&&typeof module<"u"&&I("aws-crt")?["md/crt-avail"]:null}catch{return null}};var qk="AWS_SDK_UA_APP_ID",Gk="sdk-ua-app-id",ln=({serviceId:e,clientVersion:t})=>{let r=[["aws-sdk-js",t],["ua","2.0"],[`os/${$k()}`,Uk()],["lang/js"],["md/nodejs",`${jk.node}`]],n=gg();n&&r.push(n),e&&r.push([`api/${e}`,t]),Eg.AWS_EXECUTION_ENV&&r.push([`exec-env/${Eg.AWS_EXECUTION_ENV}`]);let o=W({environmentVariableSelector:i=>i[qk],configFileSelector:i=>i[Gk],default:void 0})(),s;return async()=>{if(!s){let i=await o;s=i?[...r,[`app/${i}`]]:[...r]}return s}};import{Buffer as Kk}from"buffer";import{createHash as Hk,createHmac as Vk}from"crypto";var St=class{constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(nt(Cg(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?Vk(this.algorithmIdentifier,Cg(this.secret)):Hk(this.algorithmIdentifier)}};function Cg(e,t){return Kk.isBuffer(e)?e:typeof e=="string"?Zn(e,t):ArrayBuffer.isView(e)?ir(e.buffer,e.byteOffset,e.byteLength):ir(e)}import{fstatSync as Wk,lstatSync as Yk}from"fs";var fn=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return Yk(e.path).size;if(typeof e.fd=="number")return Wk(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};var vg="required",mr="fn",hr="argv",mo="ref",ll="PartitionResult",Yt="tree",as="error",cs="endpoint",xg={[vg]:!1,type:"String"},wg={[vg]:!0,default:!1,type:"Boolean"},Tg={[mo]:"Endpoint"},kg={[mr]:"booleanEquals",[hr]:[{[mo]:"UseFIPS"},!0]},Ng={[mr]:"booleanEquals",[hr]:[{[mo]:"UseDualStack"},!0]},Xt={},bg={[mr]:"booleanEquals",[hr]:[!0,{[mr]:"getAttr",[hr]:[{[mo]:ll},"supportsFIPS"]}]},Sg={[mr]:"booleanEquals",[hr]:[!0,{[mr]:"getAttr",[hr]:[{[mo]:ll},"supportsDualStack"]}]},Ag=[Tg],_g=[kg],Rg=[Ng],Xk={version:"1.0",parameters:{Region:xg,UseDualStack:wg,UseFIPS:wg,Endpoint:xg},rules:[{conditions:[{[mr]:"aws.partition",[hr]:[{[mo]:"Region"}],assign:ll}],type:Yt,rules:[{conditions:[{[mr]:"isSet",[hr]:Ag},{[mr]:"parseURL",[hr]:Ag,assign:"url"}],type:Yt,rules:[{conditions:_g,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:as},{type:Yt,rules:[{conditions:Rg,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:as},{endpoint:{url:Tg,properties:Xt,headers:Xt},type:cs}]}]},{conditions:[kg,Ng],type:Yt,rules:[{conditions:[bg,Sg],type:Yt,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Xt,headers:Xt},type:cs}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:as}]},{conditions:_g,type:Yt,rules:[{conditions:[bg],type:Yt,rules:[{type:Yt,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Xt,headers:Xt},type:cs}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:as}]},{conditions:Rg,type:Yt,rules:[{conditions:[Sg],type:Yt,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Xt,headers:Xt},type:cs}]},{error:"DualStack is enabled but this partition does not support DualStack",type:as}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Xt,headers:Xt},type:cs}]}]},Pg=Xk;var Og=(e,t={})=>jr(Pg,{endpointParams:e,logger:t.logger});var Ig=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??qt,base64Encoder:e?.base64Encoder??Gt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Og,extensions:e?.extensions??[],logger:e?.logger??new Ut,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??ot,utf8Decoder:e?.utf8Decoder??rt,utf8Encoder:e?.utf8Encoder??Et});var Dg="AWS_EXECUTION_ENV",fl="AWS_REGION",ul="AWS_DEFAULT_REGION",Bg="AWS_EC2_METADATA_DISABLED",Mg=["in-region","cross-region","mobile","standard","legacy"],Lg="/latest/meta-data/placement/region";var Qk="AWS_DEFAULTS_MODE",Jk="defaults_mode",Fg={environmentVariableSelector:e=>e[Qk],configFileSelector:e=>e[Jk],default:"legacy"};var un=({region:e=W(zt),defaultsMode:t=W(Fg)}={})=>Lr(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return Zk(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Mg.join(", ")}, got ${r}`)}}),Zk=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await eN();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},eN=async()=>{if(process.env[Dg]&&(process.env[fl]||process.env[ul]))return process.env[fl]??process.env[ul];if(!process.env[Bg])try{let e=await ss();return(await ur({...e,path:Lg})).toString()}catch{}};var zg=e=>{sn(process.version);let t=un(e),r=()=>t().then(on),n=Ig(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??fn,defaultUserAgentProvider:e?.defaultUserAgentProvider??ln({serviceId:n.serviceId,clientVersion:yg.version}),maxAttempts:e?.maxAttempts??W(Xr),region:e?.region??W(zt,Hr),requestHandler:e?.requestHandler??new Kt(r),retryMode:e?.retryMode??W({...Jr,default:async()=>(await r()).retryMode||$t}),sha256:e?.sha256??St.bind(null,"sha256"),streamCollector:e?.streamCollector??Ht,useDualstackEndpoint:e?.useDualstackEndpoint??W(Gr),useFipsEndpoint:e?.useFipsEndpoint??W(Kr)}};var tN=e=>e,$g=(e,t)=>{let r={...tN(ao(e))};return t.forEach(n=>n.configure(r)),{...e,...co(r)}};var fa=class extends jt{constructor(...[t]){let r=zg(t||{}),n=pg(r),o=Vr(n),s=Yr(o),i=Qr(s),a=i,c=$r(a),d=$g(c,t?.extensions||[]);super(d),this.config=d,this.middlewareStack.use(Zr(this.config)),this.middlewareStack.use(Wr(this.config)),this.middlewareStack.use(Dr(this.config)),this.middlewareStack.use(Br(this.config)),this.middlewareStack.use(Mr(this.config)),this.middlewareStack.use(qr(this.config))}destroy(){super.destroy()}};var pr=class e extends Wt{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var ua=class e extends pr{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},ma=class e extends pr{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},ha=class e extends pr{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},pa=class e extends pr{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Ug=e=>({...e,...e.accessToken&&{accessToken:Vt}}),rN=e=>({...e,...e.secretAccessKey&&{secretAccessKey:Vt},...e.sessionToken&&{sessionToken:Vt}}),jg=e=>({...e,...e.roleCredentials&&{roleCredentials:rN(e.roleCredentials)}});var qg=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i=V({},lN,{"x-amz-sso_bearer_token":e.accessToken}),a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/federation/credentials`,c=V({role_name:[,Ie(e.roleName,"roleName")],account_id:[,Ie(e.accountId,"accountId")]}),d;return new K({protocol:n,hostname:r,port:o,method:"GET",headers:i,path:a,query:c,body:d})};var Gg=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return nN(e,t);let r=V({$metadata:ds(e)}),n=Ie(tn(await Kg(e.body,t)),"body"),o=ae(n,{roleCredentials:fo});return Object.assign(r,o),r},nN=async(e,t)=>{let r={...e,body:await fN(e.body,t)},n=uN(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await sN(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await iN(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await aN(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await cN(r,t);default:let o=r.body;return oN({output:e,parsedBody:o,errorCode:n})}};var oN=nn(pr),sN=async(e,t)=>{let r=V({}),n=e.body,o=ae(n,{message:_});Object.assign(r,o);let s=new ua({$metadata:ds(e),...r});return Y(s,e.body)},iN=async(e,t)=>{let r=V({}),n=e.body,o=ae(n,{message:_});Object.assign(r,o);let s=new ma({$metadata:ds(e),...r});return Y(s,e.body)},aN=async(e,t)=>{let r=V({}),n=e.body,o=ae(n,{message:_});Object.assign(r,o);let s=new ha({$metadata:ds(e),...r});return Y(s,e.body)},cN=async(e,t)=>{let r=V({}),n=e.body,o=ae(n,{message:_});Object.assign(r,o);let s=new pa({$metadata:ds(e),...r});return Y(s,e.body)},ds=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),dN=(e,t)=>en(e,t).then(r=>t.utf8Encoder(r)),lN=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),Kg=(e,t)=>dN(e,t).then(r=>r.length?JSON.parse(r):{}),fN=async(e,t)=>{let r=await Kg(e,t);return r.message=r.message??r.Message,r},uN=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var ya=class e extends _e{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(ze(r,this.serialize,this.deserialize)),this.middlewareStack.use($e(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:Ug,outputFilterSensitiveLog:jg},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return qg(t,r)}deserialize(t,r){return Gg(t,r)}};var mN=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"}),hN={version:"3.387.0"},Zg="required",yr="fn",gr="argv",ho="ref",hl="PartitionResult",Qt="tree",ls="error",fs="endpoint",Hg={[Zg]:!1,type:"String"},Vg={[Zg]:!0,default:!1,type:"Boolean"},eE={[ho]:"Endpoint"},tE={[yr]:"booleanEquals",[gr]:[{[ho]:"UseFIPS"},!0]},rE={[yr]:"booleanEquals",[gr]:[{[ho]:"UseDualStack"},!0]},Jt={},Wg={[yr]:"booleanEquals",[gr]:[!0,{[yr]:"getAttr",[gr]:[{[ho]:hl},"supportsFIPS"]}]},Yg={[yr]:"booleanEquals",[gr]:[!0,{[yr]:"getAttr",[gr]:[{[ho]:hl},"supportsDualStack"]}]},Xg=[eE],Qg=[tE],Jg=[rE],pN={version:"1.0",parameters:{Region:Hg,UseDualStack:Vg,UseFIPS:Vg,Endpoint:Hg},rules:[{conditions:[{[yr]:"aws.partition",[gr]:[{[ho]:"Region"}],assign:hl}],type:Qt,rules:[{conditions:[{[yr]:"isSet",[gr]:Xg},{[yr]:"parseURL",[gr]:Xg,assign:"url"}],type:Qt,rules:[{conditions:Qg,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ls},{type:Qt,rules:[{conditions:Jg,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ls},{endpoint:{url:eE,properties:Jt,headers:Jt},type:fs}]}]},{conditions:[tE,rE],type:Qt,rules:[{conditions:[Wg,Yg],type:Qt,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Jt,headers:Jt},type:fs}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ls}]},{conditions:Qg,type:Qt,rules:[{conditions:[Wg],type:Qt,rules:[{type:Qt,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Jt,headers:Jt},type:fs}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:ls}]},{conditions:Jg,type:Qt,rules:[{conditions:[Yg],type:Qt,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Jt,headers:Jt},type:fs}]},{error:"DualStack is enabled but this partition does not support DualStack",type:ls}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Jt,headers:Jt},type:fs}]}]},yN=pN,gN=(e,t={})=>jr(yN,{endpointParams:e,logger:t.logger}),EN=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??qt,base64Encoder:e?.base64Encoder??Gt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??gN,logger:e?.logger??new Ut,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??ot,utf8Decoder:e?.utf8Decoder??rt,utf8Encoder:e?.utf8Encoder??Et}),CN=e=>{sn(process.version);let t=un(e),r=()=>t().then(on),n=EN(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??fn,defaultUserAgentProvider:e?.defaultUserAgentProvider??ln({serviceId:n.serviceId,clientVersion:hN.version}),maxAttempts:e?.maxAttempts??W(Xr),region:e?.region??W(zt,Hr),requestHandler:e?.requestHandler??new Kt(r),retryMode:e?.retryMode??W({...Jr,default:async()=>(await r()).retryMode||$t}),sha256:e?.sha256??St.bind(null,"sha256"),streamCollector:e?.streamCollector??Ht,useDualstackEndpoint:e?.useDualstackEndpoint??W(Gr),useFipsEndpoint:e?.useFipsEndpoint??W(Kr)}},pl=class extends jt{constructor(...[e]){let t=CN(e||{}),r=mN(t),n=Vr(r),o=Yr(n),s=Qr(o),i=s,a=$r(i);super(a),this.config=a,this.middlewareStack.use(Zr(this.config)),this.middlewareStack.use(Wr(this.config)),this.middlewareStack.use(Dr(this.config)),this.middlewareStack.use(Br(this.config)),this.middlewareStack.use(Mr(this.config)),this.middlewareStack.use(qr(this.config))}destroy(){super.destroy()}},ct=class nE extends Wt{constructor(t){super(t),Object.setPrototypeOf(this,nE.prototype)}},xN=class oE extends ct{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,oE.prototype),this.error=t.error,this.error_description=t.error_description}},wN=class sE extends ct{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,sE.prototype),this.error=t.error,this.error_description=t.error_description}},bN=class iE extends ct{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,iE.prototype),this.error=t.error,this.error_description=t.error_description}},SN=class aE extends ct{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,aE.prototype),this.error=t.error,this.error_description=t.error_description}},AN=class cE extends ct{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,cE.prototype),this.error=t.error,this.error_description=t.error_description}},_N=class dE extends ct{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,dE.prototype),this.error=t.error,this.error_description=t.error_description}},RN=class lE extends ct{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,lE.prototype),this.error=t.error,this.error_description=t.error_description}},vN=class fE extends ct{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,fE.prototype),this.error=t.error,this.error_description=t.error_description}},TN=class uE extends ct{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,uE.prototype),this.error=t.error,this.error_description=t.error_description}},kN=class mE extends ct{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,mE.prototype),this.error=t.error,this.error_description=t.error_description}},NN=class hE extends ct{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,hE.prototype),this.error=t.error,this.error_description=t.error_description}},PN=class pE extends ct{constructor(t){super({name:"InvalidClientMetadataException",$fault:"client",...t}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,pE.prototype),this.error=t.error,this.error_description=t.error_description}},ON=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/token`,c;return c=JSON.stringify(ae(e,{clientId:[],clientSecret:[],code:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:d=>fo(d)})),new K({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},IN=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/client/register`,c;return c=JSON.stringify(ae(e,{clientName:[],clientType:[],scopes:d=>fo(d)})),new K({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},DN=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/device_authorization`,c;return c=JSON.stringify(ae(e,{clientId:[],clientSecret:[],startUrl:[]})),new K({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},BN=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return MN(e,t);let r=V({$metadata:He(e)}),n=Ie(tn(await ga(e.body,t)),"body"),o=ae(n,{accessToken:_,expiresIn:so,idToken:_,refreshToken:_,tokenType:_});return Object.assign(r,o),r},MN=async(e,t)=>{let r={...e,body:await Cl(e.body,t)},n=xl(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await UN(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await jN(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await qN(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await gl(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await yE(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await KN(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await El(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await gE(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await EE(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await CE(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await HN(r,t);default:let o=r.body;return yl({output:e,parsedBody:o,errorCode:n})}},LN=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return FN(e,t);let r=V({$metadata:He(e)}),n=Ie(tn(await ga(e.body,t)),"body"),o=ae(n,{authorizationEndpoint:_,clientId:_,clientIdIssuedAt:oo,clientSecret:_,clientSecretExpiresAt:oo,tokenEndpoint:_});return Object.assign(r,o),r},FN=async(e,t)=>{let r={...e,body:await Cl(e.body,t)},n=xl(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await gl(r,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await GN(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await El(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await gE(r,t);default:let o=r.body;return yl({output:e,parsedBody:o,errorCode:n})}},zN=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return $N(e,t);let r=V({$metadata:He(e)}),n=Ie(tn(await ga(e.body,t)),"body"),o=ae(n,{deviceCode:_,expiresIn:so,interval:so,userCode:_,verificationUri:_,verificationUriComplete:_});return Object.assign(r,o),r},$N=async(e,t)=>{let r={...e,body:await Cl(e.body,t)},n=xl(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await gl(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await yE(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await El(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await EE(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await CE(r,t);default:let o=r.body;return yl({output:e,parsedBody:o,errorCode:n})}},yl=nn(ct),UN=async(e,t)=>{let r=V({}),n=e.body,o=ae(n,{error:_,error_description:_});Object.assign(r,o);let s=new xN({$metadata:He(e),...r});return Y(s,e.body)},jN=async(e,t)=>{let r=V({}),n=e.body,o=ae(n,{error:_,error_description:_});Object.assign(r,o);let s=new wN({$metadata:He(e),...r});return Y(s,e.body)},qN=async(e,t)=>{let r=V({}),n=e.body,o=ae(n,{error:_,error_description:_});Object.assign(r,o);let s=new bN({$metadata:He(e),...r});return Y(s,e.body)},gl=async(e,t)=>{let r=V({}),n=e.body,o=ae(n,{error:_,error_description:_});Object.assign(r,o);let s=new SN({$metadata:He(e),...r});return Y(s,e.body)},yE=async(e,t)=>{let r=V({}),n=e.body,o=ae(n,{error:_,error_description:_});Object.assign(r,o);let s=new AN({$metadata:He(e),...r});return Y(s,e.body)},GN=async(e,t)=>{let r=V({}),n=e.body,o=ae(n,{error:_,error_description:_});Object.assign(r,o);let s=new PN({$metadata:He(e),...r});return Y(s,e.body)},KN=async(e,t)=>{let r=V({}),n=e.body,o=ae(n,{error:_,error_description:_});Object.assign(r,o);let s=new _N({$metadata:He(e),...r});return Y(s,e.body)},El=async(e,t)=>{let r=V({}),n=e.body,o=ae(n,{error:_,error_description:_});Object.assign(r,o);let s=new RN({$metadata:He(e),...r});return Y(s,e.body)},gE=async(e,t)=>{let r=V({}),n=e.body,o=ae(n,{error:_,error_description:_});Object.assign(r,o);let s=new vN({$metadata:He(e),...r});return Y(s,e.body)},EE=async(e,t)=>{let r=V({}),n=e.body,o=ae(n,{error:_,error_description:_});Object.assign(r,o);let s=new TN({$metadata:He(e),...r});return Y(s,e.body)},CE=async(e,t)=>{let r=V({}),n=e.body,o=ae(n,{error:_,error_description:_});Object.assign(r,o);let s=new kN({$metadata:He(e),...r});return Y(s,e.body)},HN=async(e,t)=>{let r=V({}),n=e.body,o=ae(n,{error:_,error_description:_});Object.assign(r,o);let s=new NN({$metadata:He(e),...r});return Y(s,e.body)},He=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),VN=(e,t)=>en(e,t).then(r=>t.utf8Encoder(r)),ga=(e,t)=>VN(e,t).then(r=>r.length?JSON.parse(r):{}),Cl=async(e,t)=>{let r=await ga(e,t);return r.message=r.message??r.Message,r},xl=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)},wl=class xE extends _e{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(ze(r,this.serialize,this.deserialize)),this.middlewareStack.use($e(r,xE.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return ON(t,r)}deserialize(t,r){return BN(t,r)}},WN=class wE extends _e{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(ze(r,this.serialize,this.deserialize)),this.middlewareStack.use($e(r,wE.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"RegisterClientCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return IN(t,r)}deserialize(t,r){return LN(t,r)}},YN=class bE extends _e{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(ze(r,this.serialize,this.deserialize)),this.middlewareStack.use($e(r,bE.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"StartDeviceAuthorizationCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return DN(t,r)}deserialize(t,r){return zN(t,r)}},XN={CreateTokenCommand:wl,RegisterClientCommand:WN,StartDeviceAuthorizationCommand:YN},QN=class extends pl{};kp(XN,QN);var po="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var bl={},SE=e=>{if(bl[e])return bl[e];let t=new pl({region:e});return bl[e]=t,t};var AE=(e,t)=>SE(t).send(new wl({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));var Sl=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new gt(`Token is expired. ${po}`,!1)};var mn=(e,t,r=!1)=>{if(typeof t>"u")throw new gt(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${po}`,!1)};import{promises as JN}from"fs";var{writeFile:ZN}=JN,_E=(e,t)=>{let r=Zi(e),n=JSON.stringify(t,null,2);return ZN(r,n)};var RE=new Date(0),vE=(e={})=>async()=>{let t=await cn(e),r=bt(e),n=t[r];if(n){if(!n.sso_session)throw new gt(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new gt(`Profile '${r}' could not be found in shared credentials file.`,!1);let o=n.sso_session,i=(await na(e))[o];if(!i)throw new gt(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let y of["sso_start_url","sso_region"])if(!i[y])throw new gt(`Sso session '${o}' is missing required property '${y}'.`,!1);let a=i.sso_start_url,c=i.sso_region,d;try{d=await ea(o)}catch{throw new gt(`The SSO session token associated with profile=${r} was not found or is invalid. ${po}`,!1)}mn("accessToken",d.accessToken),mn("expiresAt",d.expiresAt);let{accessToken:l,expiresAt:f}=d,u={token:l,expiration:new Date(f)};if(u.expiration.getTime()-Date.now()>3e5)return u;if(Date.now()-RE.getTime()<30*1e3)return Sl(u),u;mn("clientId",d.clientId,!0),mn("clientSecret",d.clientSecret,!0),mn("refreshToken",d.refreshToken,!0);try{RE.setTime(Date.now());let y=await AE(d,c);mn("accessToken",y.accessToken),mn("expiresIn",y.expiresIn);let x=new Date(Date.now()+y.expiresIn*1e3);try{await _E(o,{...d,accessToken:y.accessToken,expiresAt:x.toISOString(),refreshToken:y.refreshToken})}catch{}return{token:y.accessToken,expiration:x}}catch{return Sl(u),u}};var us=!1,Al=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:i})=>{let a,c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let A=await vE({profile:i})();a={accessToken:A.token,expiresAt:new Date(A.expiration).toISOString()}}catch(A){throw new D(A.message,us)}else try{a=await ea(e)}catch{throw new D(`The SSO session associated with this profile is invalid. ${c}`,us)}if(new Date(a.expiresAt).getTime()-Date.now()<=0)throw new D(`The SSO session associated with this profile has expired. ${c}`,us);let{accessToken:d}=a,l=s||new fa({region:n}),f;try{f=await l.send(new ya({accountId:r,roleName:o,accessToken:d}))}catch(A){throw D.from(A,us)}let{roleCredentials:{accessKeyId:u,secretAccessKey:y,sessionToken:x,expiration:w}={}}=f;if(!u||!y||!x||!w)throw new D("SSO returns an invalid temporary credential.",us);return{accessKeyId:u,secretAccessKey:y,sessionToken:x,expiration:new Date(w)}};var Ea=e=>{let{sso_start_url:t,sso_account_id:r,sso_region:n,sso_role_name:o}=e;if(!t||!r||!n||!o)throw new D(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};var Ca=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,ssoSession:i}=e,a=bt(e);if(!t&&!r&&!n&&!o&&!i){let d=(await cn(e))[a];if(!d)throw new D(`Profile ${a} was not found.`);if(!is(d))throw new D(`Profile ${a} is not configured with SSO credentials.`);if(d?.sso_session){let A=(await na(e))[d.sso_session],G=` configurations in profile ${a} and sso-session ${d.sso_session}`;if(n&&n!==A.sso_region)throw new D("Conflicting SSO region"+G,!1);if(t&&t!==A.sso_start_url)throw new D("Conflicting SSO start_url"+G,!1);d.sso_region=A.sso_region,d.sso_start_url=A.sso_start_url}let{sso_start_url:l,sso_account_id:f,sso_region:u,sso_role_name:y,sso_session:x}=Ea(d);return Al({ssoStartUrl:l,ssoSession:x,ssoAccountId:f,ssoRegion:u,ssoRoleName:y,ssoClient:s,profile:a})}else{if(!t||!r||!n||!o)throw new D('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return Al({ssoStartUrl:t,ssoSession:i,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:a})}};var TE=e=>{let{sso_start_url:t,sso_account_id:r,sso_session:n,sso_region:o,sso_role_name:s}=Ea(e);return Ca({ssoStartUrl:t,ssoAccountId:r,ssoSession:n,ssoRegion:o,ssoRoleName:s})()};var _l=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1,Rl=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token});import{readFileSync as tP}from"fs";var kE=e=>()=>{let{roleArn:t,roleSessionName:r,webIdentityToken:n,providerId:o,policyArns:s,policy:i,durationSeconds:a,roleAssumerWithWebIdentity:c}=e;if(!c)throw new D(`Role Arn '${t}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return c({RoleArn:t,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:s,Policy:i,DurationSeconds:a})};var rP="AWS_WEB_IDENTITY_TOKEN_FILE",nP="AWS_ROLE_ARN",oP="AWS_ROLE_SESSION_NAME",xa=(e={})=>async()=>{let t=e?.webIdentityTokenFile??process.env[rP],r=e?.roleArn??process.env[nP],n=e?.roleSessionName??process.env[oP];if(!t||!r)throw new D("Web identity configuration not specified");return kE({...e,webIdentityToken:tP(t,{encoding:"ascii"}),roleArn:r,roleSessionName:n})()};var NE=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,PE=async(e,t)=>xa({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})();var da=async(e,t,r,n={})=>{let o=t[e];if(Object.keys(n).length>0&&_l(o))return Rl(o);if(dg(o))return lg(e,t,r,n);if(_l(o))return Rl(o);if(NE(o))return PE(o,r);if(mg(o))return hg(r,e);if(is(o))return TE(o);throw new D(`Profile ${e} could not be found or parsed in shared credentials file.`)};var OE=(e={})=>async()=>{let t=await cn(e);return da(bt(e),t,e)};var sP="AWS_EC2_METADATA_DISABLED",IE=e=>process.env[ns]||process.env[rs]?aa(e):process.env[sP]?async()=>{throw new D("EC2 Instance Metadata Service access disabled")}:ca(e);var wa=(e={})=>Lr(ri(...e.profile||process.env[al]?[]:[Ji()],Ca(e),OE(e),la(e),xa(e),IE(e),async()=>{throw new D("Could not load credentials from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);var GE="required",M="type",X="fn",Q="argv",hn="ref";var In="booleanEquals",Ue="tree",De="stringEquals",KE="sigv4",HE="sts",VE="us-east-1",ce="endpoint",DE="https://sts.{Region}.{PartitionResult#dnsSuffix}",yo="error",Tl="getAttr",BE={[GE]:!1,[M]:"String"},vl={[GE]:!0,default:!1,[M]:"Boolean"},WE={[hn]:"Endpoint"},ME={[X]:"isSet",[Q]:[{[hn]:"Region"}]},Be={[hn]:"Region"},LE={[X]:"aws.partition",[Q]:[Be],assign:"PartitionResult"},YE={[hn]:"UseFIPS"},XE={[hn]:"UseDualStack"},je={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:KE,signingName:HE,signingRegion:VE}]},headers:{}},dt={},FE={conditions:[{[X]:De,[Q]:[Be,"aws-global"]}],[ce]:je,[M]:ce},QE={[X]:In,[Q]:[YE,!0]},JE={[X]:In,[Q]:[XE,!0]},zE={[X]:In,[Q]:[!0,{[X]:Tl,[Q]:[{[hn]:"PartitionResult"},"supportsFIPS"]}]},ZE={[hn]:"PartitionResult"},$E={[X]:In,[Q]:[!0,{[X]:Tl,[Q]:[ZE,"supportsDualStack"]}]},UE=[{[X]:"isSet",[Q]:[WE]}],jE=[QE],qE=[JE],iP={version:"1.0",parameters:{Region:BE,UseDualStack:vl,UseFIPS:vl,Endpoint:BE,UseGlobalEndpoint:vl},rules:[{conditions:[{[X]:In,[Q]:[{[hn]:"UseGlobalEndpoint"},!0]},{[X]:"not",[Q]:UE},ME,LE,{[X]:In,[Q]:[YE,!1]},{[X]:In,[Q]:[XE,!1]}],[M]:Ue,rules:[{conditions:[{[X]:De,[Q]:[Be,"ap-northeast-1"]}],endpoint:je,[M]:ce},{conditions:[{[X]:De,[Q]:[Be,"ap-south-1"]}],endpoint:je,[M]:ce},{conditions:[{[X]:De,[Q]:[Be,"ap-southeast-1"]}],endpoint:je,[M]:ce},{conditions:[{[X]:De,[Q]:[Be,"ap-southeast-2"]}],endpoint:je,[M]:ce},FE,{conditions:[{[X]:De,[Q]:[Be,"ca-central-1"]}],endpoint:je,[M]:ce},{conditions:[{[X]:De,[Q]:[Be,"eu-central-1"]}],endpoint:je,[M]:ce},{conditions:[{[X]:De,[Q]:[Be,"eu-north-1"]}],endpoint:je,[M]:ce},{conditions:[{[X]:De,[Q]:[Be,"eu-west-1"]}],endpoint:je,[M]:ce},{conditions:[{[X]:De,[Q]:[Be,"eu-west-2"]}],endpoint:je,[M]:ce},{conditions:[{[X]:De,[Q]:[Be,"eu-west-3"]}],endpoint:je,[M]:ce},{conditions:[{[X]:De,[Q]:[Be,"sa-east-1"]}],endpoint:je,[M]:ce},{conditions:[{[X]:De,[Q]:[Be,VE]}],endpoint:je,[M]:ce},{conditions:[{[X]:De,[Q]:[Be,"us-east-2"]}],endpoint:je,[M]:ce},{conditions:[{[X]:De,[Q]:[Be,"us-west-1"]}],endpoint:je,[M]:ce},{conditions:[{[X]:De,[Q]:[Be,"us-west-2"]}],endpoint:je,[M]:ce},{endpoint:{url:DE,properties:{authSchemes:[{name:KE,signingName:HE,signingRegion:"{Region}"}]},headers:dt},[M]:ce}]},{conditions:UE,[M]:Ue,rules:[{conditions:jE,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[M]:yo},{[M]:Ue,rules:[{conditions:qE,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[M]:yo},{endpoint:{url:WE,properties:dt,headers:dt},[M]:ce}]}]},{[M]:Ue,rules:[{conditions:[ME],[M]:Ue,rules:[{conditions:[LE],[M]:Ue,rules:[{conditions:[QE,JE],[M]:Ue,rules:[{conditions:[zE,$E],[M]:Ue,rules:[{[M]:Ue,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:dt,headers:dt},[M]:ce}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[M]:yo}]},{conditions:jE,[M]:Ue,rules:[{conditions:[zE],[M]:Ue,rules:[{[M]:Ue,rules:[{conditions:[{[X]:De,[Q]:["aws-us-gov",{[X]:Tl,[Q]:[ZE,"name"]}]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:dt,headers:dt},[M]:ce},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:dt,headers:dt},[M]:ce}]}]},{error:"FIPS is enabled but this partition does not support FIPS",[M]:yo}]},{conditions:qE,[M]:Ue,rules:[{conditions:[$E],[M]:Ue,rules:[{[M]:Ue,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:dt,headers:dt},[M]:ce}]}]},{error:"DualStack is enabled but this partition does not support DualStack",[M]:yo}]},{[M]:Ue,rules:[FE,{endpoint:{url:DE,properties:dt,headers:dt},[M]:ce}]}]}]},{error:"Invalid Configuration: Missing Region",[M]:yo}]}]},eC=iP;var tC=(e,t={})=>jr(eC,{endpointParams:e,logger:t.logger});var rC=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??qt,base64Encoder:e?.base64Encoder??Gt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??tC,extensions:e?.extensions??[],logger:e?.logger??new Ut,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??ot,utf8Decoder:e?.utf8Decoder??rt,utf8Encoder:e?.utf8Encoder??Et});var nC=e=>{sn(process.version);let t=un(e),r=()=>t().then(on),n=rC(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??fn,credentialDefaultProvider:e?.credentialDefaultProvider??Hy(wa),defaultUserAgentProvider:e?.defaultUserAgentProvider??ln({serviceId:n.serviceId,clientVersion:Kp.version}),maxAttempts:e?.maxAttempts??W(Xr),region:e?.region??W(zt,Hr),requestHandler:e?.requestHandler??new Kt(r),retryMode:e?.retryMode??W({...Jr,default:async()=>(await r()).retryMode||$t}),sha256:e?.sha256??St.bind(null,"sha256"),streamCollector:e?.streamCollector??Ht,useDualstackEndpoint:e?.useDualstackEndpoint??W(Gr),useFipsEndpoint:e?.useFipsEndpoint??W(Kr)}};var aP=e=>e,oC=(e,t)=>{let r={...aP(ao(e))};return t.forEach(n=>n.configure(r)),{...e,...co(r)}};var ms=class e extends jt{constructor(...[t]){let r=nC(t||{}),n=Gp(r),o=Vr(n),s=Yr(o),i=Qr(s),a=i,c=qp(a,{stsClientCtor:e}),d=$r(c),l=oC(d,t?.extensions||[]);super(l),this.config=l,this.middlewareStack.use(Zr(this.config)),this.middlewareStack.use(Wr(this.config)),this.middlewareStack.use(Dr(this.config)),this.middlewareStack.use(Br(this.config)),this.middlewareStack.use(Mr(this.config)),this.middlewareStack.use(qr(this.config))}destroy(){super.destroy()}};var sC=(e,t)=>t?class extends e{constructor(n){super(n);for(let o of t)this.middlewareStack.use(o)}}:e,cP=(e={},t)=>sl(e,sC(ms,t)),dP=(e={},t)=>il(e,sC(ms,t)),iC=e=>t=>e({roleAssumer:cP(t),roleAssumerWithWebIdentity:dP(t),...t});var lP="AWS_S3_USE_ARN_REGION",fP="s3_use_arn_region",aC={environmentVariableSelector:e=>Ft(e,lP,xt.ENV),configFileSelector:e=>Ft(e,fP,xt.CONFIG),default:!1};function cC(e){let t=0,r=0,n=null,o=null,s=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},i=async function*(){let a=e[Symbol.asyncIterator]();for(;;){let{value:c,done:d}=await a.next();if(d){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}let l=c.length,f=0;for(;f<l;){if(!n){let y=l-f;o||(o=new Uint8Array(4));let x=Math.min(4-r,y);if(o.set(c.slice(f,f+x),r),r+=x,f+=x,r<4)break;s(new DataView(o.buffer).getUint32(0,!1)),o=null}let u=Math.min(t-r,l-f);n.set(c.slice(f,f+u),r),r+=u,f+=u,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:i}}function dC(e,t){return async function(r){let{value:n}=r.headers[":message-type"];if(n==="error"){let o=new Error(r.headers[":error-message"].value||"UnknownError");throw o.name=r.headers[":error-code"].value,o}else if(n==="exception"){let o=r.headers[":exception-type"].value,s={[o]:r},i=await e(s);if(i.$unknown){let a=new Error(t(r.body));throw a.name=o,a}throw i[o]}else if(n==="event"){let o={[r.headers[":event-type"].value]:r},s=await e(o);return s.$unknown?void 0:s}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}var hs=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new ci(t,r),this.utfEncoder=t}deserialize(t,r){let n=cC(t);return new fi({messageStream:new di({inputStream:n,decoder:this.eventStreamCodec}),deserializer:dC(r,this.utfEncoder)})}serialize(t,r){return new li({messageStream:new ui({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};import{Readable as wP}from"stream";async function*lC(e){let t=!1,r=!1,n=new Array;for(e.on("error",o=>{if(t||(t=!0),o)throw o}),e.on("data",o=>{n.push(o)}),e.on("end",()=>{t=!0});!r;){let o=await new Promise(s=>setTimeout(()=>s(n.shift()),0));o&&(yield o),r=t&&n.length===0}}var ba=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new hs({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=typeof t[Symbol.asyncIterator]=="function"?t:lC(t);return this.universalMarshaller.deserialize(n,r)}serialize(t,r){return wP.from(this.universalMarshaller.serialize(t,r))}};var fC=e=>new ba(e);import{Writable as bP}from"stream";var ps=class extends bP{constructor(t,r){super(r),this.hash=t}_write(t,r,n){try{this.hash.update(nt(t))}catch(o){return n(o)}n()}};var uC=(e,t)=>{if(t.readableFlowing!==null)throw new Error("Unable to calculate hash for flowing readable stream");let r=new e,n=new ps(r);return t.pipe(n),new Promise((o,s)=>{t.on("error",i=>{n.end(),s(i)}),n.on("error",s),n.on("finish",()=>{r.digest().then(o).catch(s)})})};var Sa=class{constructor(t){this.sigv4Signer=new kn(t),this.signerOptions=t}async sign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(t,r)}return this.sigv4Signer.sign(t,r)}async presign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(t,r)}return this.sigv4Signer.presign(t,r)}getSigv4aSigner(){if(!this.sigv4aSigner){let t;try{if(t=typeof I=="function"&&I("@aws-sdk/signature-v4-crt").CrtSignerV4,typeof t!="function")throw new Error}catch(r){throw r.message=`${r.message}
Please check if you have installed "@aws-sdk/signature-v4-crt" package explicitly. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,r}this.sigv4aSigner=new t({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}};var tf="required",m="type",h="conditions",E="fn",C="argv",F="ref",Me="assign",N="url",P="properties",Cr="authSchemes",xr="disableDoubleEncoding",wr="signingName",gn="signingRegion",O="headers";var Zt="isSet",b="tree",qe="booleanEquals",k="error",va="aws.partition",he="stringEquals",ge="getAttr",At="name",ys="substring",sx="hardwareType",ix="regionPrefix",mC="bucketAliasSuffix",Jl="outpostId",Dn="isValidHostLabel",Nt="not",ax="parseURL",rf="s3-outposts",S="endpoint",hC="aws.isVirtualHostableS3Bucket",Eo="s3",cx="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",dx="{url#scheme}://{Bucket}.{url#authority}{url#path}",lx="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",pC="https://{Bucket}.s3.{partitionResult#dnsSuffix}",fx="aws.parseArn",ux="bucketArn",mx="arnType",Ta="",nf="s3-object-lambda",hx="accesspoint",of="accessPointName",yC="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",gC="mrapPartition",EC="outpostType",CC="arnPrefix",px="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",xC="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",Zl="{url#scheme}://{url#authority}{url#path}",wC="https://s3.{partitionResult#dnsSuffix}",kl={[tf]:!1,[m]:"String"},go={[tf]:!0,default:!1,[m]:"Boolean"},Nl={[tf]:!1,[m]:"Boolean"},kt={[E]:qe,[C]:[{[F]:"Accelerate"},!0]},de={[E]:qe,[C]:[{[F]:"UseFIPS"},!0]},ne={[E]:qe,[C]:[{[F]:"UseDualStack"},!0]},ye={[E]:Zt,[C]:[{[F]:"Endpoint"}]},yx={[E]:va,[C]:[{[F]:"Region"}],[Me]:"partitionResult"},bC={[E]:he,[C]:[{[E]:ge,[C]:[{[F]:"partitionResult"},At]},"aws-cn"]},gx={[E]:Zt,[C]:[{[F]:"Bucket"}]},Er={[F]:"Bucket"},SC={[F]:sx},AC={[h]:[{[E]:Nt,[C]:[ye]}],[k]:"Expected a endpoint to be specified but no endpoint was found",[m]:k},L={[E]:Nt,[C]:[ye]},Ve={[E]:ax,[C]:[{[F]:"Endpoint"}],[Me]:"url"},Aa={[Cr]:[{[xr]:!0,[At]:"sigv4",[wr]:rf,[gn]:"{Region}"}]},U={},Pl={[E]:qe,[C]:[{[F]:"ForcePathStyle"},!1]},SP={[F]:"ForcePathStyle"},xe={[E]:qe,[C]:[{[F]:"Accelerate"},!1]},Se={[E]:he,[C]:[{[F]:"Region"},"aws-global"]},Re={[Cr]:[{[xr]:!0,[At]:"sigv4",[wr]:Eo,[gn]:"us-east-1"}]},H={[E]:Nt,[C]:[Se]},ve={[E]:qe,[C]:[{[F]:"UseGlobalEndpoint"},!0]},_C={[N]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[P]:{[Cr]:[{[xr]:!0,[At]:"sigv4",[wr]:Eo,[gn]:"{Region}"}]},[O]:{}},we={[Cr]:[{[xr]:!0,[At]:"sigv4",[wr]:Eo,[gn]:"{Region}"}]},Te={[E]:qe,[C]:[{[F]:"UseGlobalEndpoint"},!1]},q={[E]:qe,[C]:[{[F]:"UseDualStack"},!1]},RC={[N]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[P]:we,[O]:{}},$={[E]:qe,[C]:[{[F]:"UseFIPS"},!1]},vC={[N]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[P]:we,[O]:{}},TC={[N]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[P]:we,[O]:{}},Ol={[E]:qe,[C]:[{[E]:ge,[C]:[{[F]:"url"},"isIp"]},!0]},Ex={[F]:"url"},Il={[E]:qe,[C]:[{[E]:ge,[C]:[Ex,"isIp"]},!1]},Dl={[N]:cx,[P]:we,[O]:{}},ef={[N]:dx,[P]:we,[O]:{}},kC={[S]:ef,[m]:S},Bl={[N]:lx,[P]:we,[O]:{}},NC={[N]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[P]:we,[O]:{}},_a={[k]:"Invalid region: region was not a valid DNS name.",[m]:k},it={[F]:ux},Cx={[F]:mx},Ml={[E]:ge,[C]:[it,"service"]},sf={[F]:of},PC={[h]:[ne],[k]:"S3 Object Lambda does not support Dual-stack",[m]:k},OC={[h]:[kt],[k]:"S3 Object Lambda does not support S3 Accelerate",[m]:k},IC={[h]:[{[E]:Zt,[C]:[{[F]:"DisableAccessPoints"}]},{[E]:qe,[C]:[{[F]:"DisableAccessPoints"},!0]}],[k]:"Access points are not supported for this operation",[m]:k},Ll={[h]:[{[E]:Zt,[C]:[{[F]:"UseArnRegion"}]},{[E]:qe,[C]:[{[F]:"UseArnRegion"},!1]},{[E]:Nt,[C]:[{[E]:he,[C]:[{[E]:ge,[C]:[it,"region"]},"{Region}"]}]}],[k]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[m]:k},xx={[E]:ge,[C]:[{[F]:"bucketPartition"},At]},wx={[E]:ge,[C]:[it,"accountId"]},Fl={[Cr]:[{[xr]:!0,[At]:"sigv4",[wr]:nf,[gn]:"{bucketArn#region}"}]},DC={[k]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[m]:k},zl={[k]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[m]:k},$l={[k]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[m]:k},Ul={[k]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[m]:k},BC={[k]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[m]:k},MC={[k]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[m]:k},gs={[Cr]:[{[xr]:!0,[At]:"sigv4",[wr]:Eo,[gn]:"{bucketArn#region}"}]},LC={[Cr]:[{[xr]:!0,[At]:"sigv4",[wr]:rf,[gn]:"{bucketArn#region}"}]},FC={[E]:fx,[C]:[Er]},zC={[N]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:we,[O]:{}},$C={[N]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:we,[O]:{}},UC={[N]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:we,[O]:{}},jl={[N]:px,[P]:we,[O]:{}},jC={[N]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:we,[O]:{}},qC={[F]:"UseObjectLambdaEndpoint"},ql={[Cr]:[{[xr]:!0,[At]:"sigv4",[wr]:nf,[gn]:"{Region}"}]},GC={[N]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[P]:we,[O]:{}},KC={[N]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[P]:we,[O]:{}},HC={[N]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[P]:we,[O]:{}},Gl={[N]:Zl,[P]:we,[O]:{}},VC={[N]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[P]:we,[O]:{}},Kl=[{[F]:"Region"}],AP=[{[F]:"Endpoint"}],WC=[Er],YC=[{[E]:Dn,[C]:[{[F]:Jl},!1]}],XC=[{[E]:he,[C]:[{[F]:ix},"beta"]}],Es=[ye,Ve],QC=[gx],pn=[yx],JC=[{[E]:Dn,[C]:[{[F]:"Region"},!1]}],yn=[{[E]:he,[C]:[{[F]:"Region"},"us-east-1"]}],Hl=[{[E]:he,[C]:[Cx,hx]}],ZC=[{[E]:ge,[C]:[it,"resourceId[1]"],[Me]:of},{[E]:Nt,[C]:[{[E]:he,[C]:[sf,Ta]}]}],_P=[it,"resourceId[1]"],ex=[ne],Vl=[kt],Wl=[{[E]:Nt,[C]:[{[E]:he,[C]:[{[E]:ge,[C]:[it,"region"]},Ta]}]}],tx=[{[E]:Nt,[C]:[{[E]:Zt,[C]:[{[E]:ge,[C]:[it,"resourceId[2]"]}]}]}],RP=[it,"resourceId[2]"],Yl=[{[E]:va,[C]:[{[E]:ge,[C]:[it,"region"]}],[Me]:"bucketPartition"}],rx=[{[E]:he,[C]:[xx,{[E]:ge,[C]:[{[F]:"partitionResult"},At]}]}],Xl=[{[E]:Dn,[C]:[{[E]:ge,[C]:[it,"region"]},!0]}],Ql=[{[E]:Dn,[C]:[wx,!1]}],nx=[{[E]:Dn,[C]:[sf,!1]}],Ra=[de],ox=[{[E]:Dn,[C]:[{[F]:"Region"},!0]}],vP={version:"1.0",parameters:{Bucket:kl,Region:kl,UseFIPS:go,UseDualStack:go,Endpoint:kl,ForcePathStyle:go,Accelerate:go,UseGlobalEndpoint:go,UseObjectLambdaEndpoint:Nl,DisableAccessPoints:Nl,DisableMultiRegionAccessPoints:go,UseArnRegion:Nl},rules:[{[h]:[{[E]:Zt,[C]:Kl}],[m]:b,rules:[{[h]:[kt,de],error:"Accelerate cannot be used with FIPS",[m]:k},{[h]:[ne,ye],error:"Cannot set dual-stack in combination with a custom endpoint.",[m]:k},{[h]:[ye,de],error:"A custom endpoint cannot be combined with FIPS",[m]:k},{[h]:[ye,kt],error:"A custom endpoint cannot be combined with S3 Accelerate",[m]:k},{[h]:[de,yx,bC],error:"Partition does not support FIPS",[m]:k},{[h]:[gx,{[E]:ys,[C]:[Er,49,50,!0],[Me]:sx},{[E]:ys,[C]:[Er,8,12,!0],[Me]:ix},{[E]:ys,[C]:[Er,0,7,!0],[Me]:mC},{[E]:ys,[C]:[Er,32,49,!0],[Me]:Jl},{[E]:va,[C]:Kl,[Me]:"regionPartition"},{[E]:he,[C]:[{[F]:mC},"--op-s3"]}],[m]:b,rules:[{[h]:YC,[m]:b,rules:[{[h]:[{[E]:he,[C]:[SC,"e"]}],[m]:b,rules:[{[h]:XC,[m]:b,rules:[AC,{[h]:Es,endpoint:{[N]:"https://{Bucket}.ec2.{url#authority}",[P]:Aa,[O]:U},[m]:S}]},{endpoint:{[N]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[P]:Aa,[O]:U},[m]:S}]},{[h]:[{[E]:he,[C]:[SC,"o"]}],[m]:b,rules:[{[h]:XC,[m]:b,rules:[AC,{[h]:Es,endpoint:{[N]:"https://{Bucket}.op-{outpostId}.{url#authority}",[P]:Aa,[O]:U},[m]:S}]},{endpoint:{[N]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[P]:Aa,[O]:U},[m]:S}]},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[m]:k}]},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[m]:k}]},{[h]:QC,[m]:b,rules:[{[h]:[ye,{[E]:Nt,[C]:[{[E]:Zt,[C]:[{[E]:ax,[C]:AP}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[m]:k},{[h]:[Pl,{[E]:hC,[C]:[Er,!1]}],[m]:b,rules:[{[h]:pn,[m]:b,rules:[{[h]:JC,[m]:b,rules:[{[h]:[kt,bC],error:"S3 Accelerate cannot be used in this region",[m]:k},{[h]:[ne,de,xe,L,Se],endpoint:{[N]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:Re,[O]:U},[m]:S},{[h]:[ne,de,xe,L,H,ve],[m]:b,rules:[{endpoint:_C,[m]:S}]},{[h]:[ne,de,xe,L,H,Te],endpoint:_C,[m]:S},{[h]:[q,de,xe,L,Se],endpoint:{[N]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[P]:Re,[O]:U},[m]:S},{[h]:[q,de,xe,L,H,ve],[m]:b,rules:[{endpoint:RC,[m]:S}]},{[h]:[q,de,xe,L,H,Te],endpoint:RC,[m]:S},{[h]:[ne,$,kt,L,Se],endpoint:{[N]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:Re,[O]:U},[m]:S},{[h]:[ne,$,kt,L,H,ve],[m]:b,rules:[{endpoint:vC,[m]:S}]},{[h]:[ne,$,kt,L,H,Te],endpoint:vC,[m]:S},{[h]:[ne,$,xe,L,Se],endpoint:{[N]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:Re,[O]:U},[m]:S},{[h]:[ne,$,xe,L,H,ve],[m]:b,rules:[{endpoint:TC,[m]:S}]},{[h]:[ne,$,xe,L,H,Te],endpoint:TC,[m]:S},{[h]:[q,$,xe,ye,Ve,Ol,Se],endpoint:{[N]:cx,[P]:Re,[O]:U},[m]:S},{[h]:[q,$,xe,ye,Ve,Il,Se],endpoint:{[N]:dx,[P]:Re,[O]:U},[m]:S},{[h]:[q,$,xe,ye,Ve,Ol,H,ve],[m]:b,rules:[{[h]:yn,endpoint:Dl,[m]:S},{endpoint:Dl,[m]:S}]},{[h]:[q,$,xe,ye,Ve,Il,H,ve],[m]:b,rules:[{[h]:yn,endpoint:ef,[m]:S},kC]},{[h]:[q,$,xe,ye,Ve,Ol,H,Te],endpoint:Dl,[m]:S},{[h]:[q,$,xe,ye,Ve,Il,H,Te],endpoint:ef,[m]:S},{[h]:[q,$,kt,L,Se],endpoint:{[N]:lx,[P]:Re,[O]:U},[m]:S},{[h]:[q,$,kt,L,H,ve],[m]:b,rules:[{[h]:yn,endpoint:Bl,[m]:S},{endpoint:Bl,[m]:S}]},{[h]:[q,$,kt,L,H,Te],endpoint:Bl,[m]:S},{[h]:[q,$,xe,L,Se],endpoint:{[N]:pC,[P]:Re,[O]:U},[m]:S},{[h]:[q,$,xe,L,H,ve],[m]:b,rules:[{[h]:yn,endpoint:{[N]:pC,[P]:we,[O]:U},[m]:S},{endpoint:NC,[m]:S}]},{[h]:[q,$,xe,L,H,Te],endpoint:NC,[m]:S}]},_a]}]},{[h]:[ye,Ve,{[E]:he,[C]:[{[E]:ge,[C]:[Ex,"scheme"]},"http"]},{[E]:hC,[C]:[Er,!0]},Pl,$,q,xe],[m]:b,rules:[{[h]:pn,[m]:b,rules:[{[h]:JC,[m]:b,rules:[kC]},_a]}]},{[h]:[Pl,{[E]:fx,[C]:WC,[Me]:ux}],[m]:b,rules:[{[h]:[{[E]:ge,[C]:[it,"resourceId[0]"],[Me]:mx},{[E]:Nt,[C]:[{[E]:he,[C]:[Cx,Ta]}]}],[m]:b,rules:[{[h]:[{[E]:he,[C]:[Ml,nf]}],[m]:b,rules:[{[h]:Hl,[m]:b,rules:[{[h]:ZC,[m]:b,rules:[PC,OC,{[h]:Wl,[m]:b,rules:[IC,{[h]:tx,[m]:b,rules:[Ll,{[h]:Yl,[m]:b,rules:[{[h]:pn,[m]:b,rules:[{[h]:rx,[m]:b,rules:[{[h]:Xl,[m]:b,rules:[{[h]:[{[E]:he,[C]:[wx,Ta]}],error:"Invalid ARN: Missing account id",[m]:k},{[h]:Ql,[m]:b,rules:[{[h]:nx,[m]:b,rules:[{[h]:Es,endpoint:{[N]:yC,[P]:Fl,[O]:U},[m]:S},{[h]:Ra,endpoint:{[N]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:Fl,[O]:U},[m]:S},{endpoint:{[N]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:Fl,[O]:U},[m]:S}]},DC]},zl]},$l]},Ul]}]}]},BC]},{error:"Invalid ARN: bucket ARN is missing a region",[m]:k}]},MC]},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[m]:k}]},{[h]:Hl,[m]:b,rules:[{[h]:ZC,[m]:b,rules:[{[h]:Wl,[m]:b,rules:[{[h]:Hl,[m]:b,rules:[{[h]:Wl,[m]:b,rules:[IC,{[h]:tx,[m]:b,rules:[Ll,{[h]:Yl,[m]:b,rules:[{[h]:pn,[m]:b,rules:[{[h]:[{[E]:he,[C]:[xx,"{partitionResult#name}"]}],[m]:b,rules:[{[h]:Xl,[m]:b,rules:[{[h]:[{[E]:he,[C]:[Ml,Eo]}],[m]:b,rules:[{[h]:Ql,[m]:b,rules:[{[h]:nx,[m]:b,rules:[{[h]:Vl,error:"Access Points do not support S3 Accelerate",[m]:k},{[h]:[de,ne],endpoint:{[N]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:gs,[O]:U},[m]:S},{[h]:[de,q],endpoint:{[N]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:gs,[O]:U},[m]:S},{[h]:[$,ne],endpoint:{[N]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:gs,[O]:U},[m]:S},{[h]:[$,q,ye,Ve],endpoint:{[N]:yC,[P]:gs,[O]:U},[m]:S},{[h]:[$,q],endpoint:{[N]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:gs,[O]:U},[m]:S}]},DC]},zl]},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[m]:k}]},$l]},Ul]}]}]},BC]}]}]},{[h]:[{[E]:Dn,[C]:[sf,!0]}],[m]:b,rules:[{[h]:ex,error:"S3 MRAP does not support dual-stack",[m]:k},{[h]:Ra,error:"S3 MRAP does not support FIPS",[m]:k},{[h]:Vl,error:"S3 MRAP does not support S3 Accelerate",[m]:k},{[h]:[{[E]:qe,[C]:[{[F]:"DisableMultiRegionAccessPoints"},!0]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[m]:k},{[h]:[{[E]:va,[C]:Kl,[Me]:gC}],[m]:b,rules:[{[h]:[{[E]:he,[C]:[{[E]:ge,[C]:[{[F]:gC},At]},{[E]:ge,[C]:[it,"partition"]}]}],[m]:b,rules:[{endpoint:{[N]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[P]:{[Cr]:[{[xr]:!0,name:"sigv4a",[wr]:Eo,signingRegionSet:["*"]}]},[O]:U},[m]:S}]},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[m]:k}]}]},{error:"Invalid Access Point Name",[m]:k}]},MC]},{[h]:[{[E]:he,[C]:[Ml,rf]}],[m]:b,rules:[{[h]:ex,error:"S3 Outposts does not support Dual-stack",[m]:k},{[h]:Ra,error:"S3 Outposts does not support FIPS",[m]:k},{[h]:Vl,error:"S3 Outposts does not support S3 Accelerate",[m]:k},{[h]:[{[E]:Zt,[C]:[{[E]:ge,[C]:[it,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[m]:k},{[h]:[{[E]:ge,[C]:_P,[Me]:Jl}],[m]:b,rules:[{[h]:YC,[m]:b,rules:[Ll,{[h]:Yl,[m]:b,rules:[{[h]:pn,[m]:b,rules:[{[h]:rx,[m]:b,rules:[{[h]:Xl,[m]:b,rules:[{[h]:Ql,[m]:b,rules:[{[h]:[{[E]:ge,[C]:RP,[Me]:EC}],[m]:b,rules:[{[h]:[{[E]:ge,[C]:[it,"resourceId[3]"],[Me]:of}],[m]:b,rules:[{[h]:[{[E]:he,[C]:[{[F]:EC},hx]}],[m]:b,rules:[{[h]:Es,endpoint:{[N]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[P]:LC,[O]:U},[m]:S},{endpoint:{[N]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:LC,[O]:U},[m]:S}]},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[m]:k}]},{error:"Invalid ARN: expected an access point name",[m]:k}]},{error:"Invalid ARN: Expected a 4-component resource",[m]:k}]},zl]},$l]},Ul]}]}]},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[m]:k}]},{error:"Invalid ARN: The Outpost Id was not set",[m]:k}]},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[m]:k}]},{error:"Invalid ARN: No ARN type specified",[m]:k}]},{[h]:[{[E]:ys,[C]:[Er,0,4,!1],[Me]:CC},{[E]:he,[C]:[{[F]:CC},"arn:"]},{[E]:Nt,[C]:[{[E]:Zt,[C]:[FC]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[m]:k},{[h]:[{[E]:qe,[C]:[SP,!0]},FC],error:"Path-style addressing cannot be used with ARN buckets",[m]:k},{[h]:[{[E]:"uriEncode",[C]:WC,[Me]:"uri_encoded_bucket"}],[m]:b,rules:[{[h]:pn,[m]:b,rules:[{[h]:[xe],[m]:b,rules:[{[h]:[ne,L,de,Se],endpoint:{[N]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:Re,[O]:U},[m]:S},{[h]:[ne,L,de,H,ve],[m]:b,rules:[{endpoint:zC,[m]:S}]},{[h]:[ne,L,de,H,Te],endpoint:zC,[m]:S},{[h]:[q,L,de,Se],endpoint:{[N]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:Re,[O]:U},[m]:S},{[h]:[q,L,de,H,ve],[m]:b,rules:[{endpoint:$C,[m]:S}]},{[h]:[q,L,de,H,Te],endpoint:$C,[m]:S},{[h]:[ne,L,$,Se],endpoint:{[N]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:Re,[O]:U},[m]:S},{[h]:[ne,L,$,H,ve],[m]:b,rules:[{endpoint:UC,[m]:S}]},{[h]:[ne,L,$,H,Te],endpoint:UC,[m]:S},{[h]:[q,ye,Ve,$,Se],endpoint:{[N]:px,[P]:Re,[O]:U},[m]:S},{[h]:[q,ye,Ve,$,H,ve],[m]:b,rules:[{[h]:yn,endpoint:jl,[m]:S},{endpoint:jl,[m]:S}]},{[h]:[q,ye,Ve,$,H,Te],endpoint:jl,[m]:S},{[h]:[q,L,$,Se],endpoint:{[N]:xC,[P]:Re,[O]:U},[m]:S},{[h]:[q,L,$,H,ve],[m]:b,rules:[{[h]:yn,endpoint:{[N]:xC,[P]:we,[O]:U},[m]:S},{endpoint:jC,[m]:S}]},{[h]:[q,L,$,H,Te],endpoint:jC,[m]:S}]},{error:"Path-style addressing cannot be used with S3 Accelerate",[m]:k}]}]}]},{[h]:[{[E]:Zt,[C]:[qC]},{[E]:qe,[C]:[qC,!0]}],[m]:b,rules:[{[h]:pn,[m]:b,rules:[{[h]:ox,[m]:b,rules:[PC,OC,{[h]:Es,endpoint:{[N]:Zl,[P]:ql,[O]:U},[m]:S},{[h]:Ra,endpoint:{[N]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[P]:ql,[O]:U},[m]:S},{endpoint:{[N]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[P]:ql,[O]:U},[m]:S}]},_a]}]},{[h]:[{[E]:Nt,[C]:QC}],[m]:b,rules:[{[h]:pn,[m]:b,rules:[{[h]:ox,[m]:b,rules:[{[h]:[de,ne,L,Se],endpoint:{[N]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:Re,[O]:U},[m]:S},{[h]:[de,ne,L,H,ve],[m]:b,rules:[{endpoint:GC,[m]:S}]},{[h]:[de,ne,L,H,Te],endpoint:GC,[m]:S},{[h]:[de,q,L,Se],endpoint:{[N]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[P]:Re,[O]:U},[m]:S},{[h]:[de,q,L,H,ve],[m]:b,rules:[{endpoint:KC,[m]:S}]},{[h]:[de,q,L,H,Te],endpoint:KC,[m]:S},{[h]:[$,ne,L,Se],endpoint:{[N]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:Re,[O]:U},[m]:S},{[h]:[$,ne,L,H,ve],[m]:b,rules:[{endpoint:HC,[m]:S}]},{[h]:[$,ne,L,H,Te],endpoint:HC,[m]:S},{[h]:[$,q,ye,Ve,Se],endpoint:{[N]:Zl,[P]:Re,[O]:U},[m]:S},{[h]:[$,q,ye,Ve,H,ve],[m]:b,rules:[{[h]:yn,endpoint:Gl,[m]:S},{endpoint:Gl,[m]:S}]},{[h]:[$,q,ye,Ve,H,Te],endpoint:Gl,[m]:S},{[h]:[$,q,L,Se],endpoint:{[N]:wC,[P]:Re,[O]:U},[m]:S},{[h]:[$,q,L,H,ve],[m]:b,rules:[{[h]:yn,endpoint:{[N]:wC,[P]:we,[O]:U},[m]:S},{endpoint:VC,[m]:S}]},{[h]:[$,q,L,H,Te],endpoint:VC,[m]:S}]},_a]}]}]},{error:"A region must be set when sending requests to S3.",[m]:k}]},bx=vP;var Sx=(e,t={})=>jr(bx,{endpointParams:e,logger:t.logger});var Ax=e=>({apiVersion:"2006-03-01",base64Decoder:e?.base64Decoder??qt,base64Encoder:e?.base64Encoder??Gt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Sx,extensions:e?.extensions??[],getAwsChunkedEncodingStream:e?.getAwsChunkedEncodingStream??wp,logger:e?.logger??new Ut,sdkStreamMixin:e?.sdkStreamMixin??Tp,serviceId:e?.serviceId??"S3",signerConstructor:e?.signerConstructor??Sa,signingEscapePath:e?.signingEscapePath??!1,urlParser:e?.urlParser??ot,useArnRegion:e?.useArnRegion??!1,utf8Decoder:e?.utf8Decoder??rt,utf8Encoder:e?.utf8Encoder??Et});var _x=e=>{sn(process.version);let t=un(e),r=()=>t().then(on),n=Ax(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??fn,credentialDefaultProvider:e?.credentialDefaultProvider??iC(wa),defaultUserAgentProvider:e?.defaultUserAgentProvider??ln({serviceId:n.serviceId,clientVersion:jp.version}),eventStreamSerdeProvider:e?.eventStreamSerdeProvider??fC,maxAttempts:e?.maxAttempts??W(Xr),md5:e?.md5??St.bind(null,"md5"),region:e?.region??W(zt,Hr),requestHandler:e?.requestHandler??new Kt(r),retryMode:e?.retryMode??W({...Jr,default:async()=>(await r()).retryMode||$t}),sha1:e?.sha1??St.bind(null,"sha1"),sha256:e?.sha256??St.bind(null,"sha256"),streamCollector:e?.streamCollector??Ht,streamHasher:e?.streamHasher??uC,useArnRegion:e?.useArnRegion??W(aC),useDualstackEndpoint:e?.useDualstackEndpoint??W(Gr),useFipsEndpoint:e?.useFipsEndpoint??W(Kr)}};var TP=e=>e,Rx=(e,t)=>{let r={...TP(ao(e))};return t.forEach(n=>n.configure(r)),{...e,...co(r)}};var ka=class extends jt{constructor(...[t]){let r=_x(t||{}),n=Up(r),o=Vr(n),s=Yr(o),i=Qr(s),a=i,c=xi(a),d=Fm(c),l=$r(d),f=Yh(l),u=Rx(f,t?.extensions||[]);super(u),this.config=u,this.middlewareStack.use(Zr(this.config)),this.middlewareStack.use(Wr(this.config)),this.middlewareStack.use(Dr(this.config)),this.middlewareStack.use(Br(this.config)),this.middlewareStack.use(Mr(this.config)),this.middlewareStack.use(bi(this.config)),this.middlewareStack.use(zm(this.config)),this.middlewareStack.use(Mm(this.config)),this.middlewareStack.use(qr(this.config))}destroy(){super.destroy()}};var kx=tr(nl());var En=class e extends Wt{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var af;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(af||(af={}));var cf;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.ObjectSizeGreaterThan!==void 0?r.ObjectSizeGreaterThan(t.ObjectSizeGreaterThan):t.ObjectSizeLessThan!==void 0?r.ObjectSizeLessThan(t.ObjectSizeLessThan):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(cf||(cf={}));var df;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.AccessPointArn!==void 0?r.AccessPointArn(t.AccessPointArn):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(df||(df={}));var lf;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(lf||(lf={}));var Na=class e extends En{constructor(t){super({name:"InvalidObjectState",$fault:"client",...t}),this.name="InvalidObjectState",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.StorageClass=t.StorageClass,this.AccessTier=t.AccessTier}},Pa=class e extends En{constructor(t){super({name:"NoSuchKey",$fault:"client",...t}),this.name="NoSuchKey",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var Oa=class e extends En{constructor(t){super({name:"NoSuchBucket",$fault:"client",...t}),this.name="NoSuchBucket",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var vx=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:Vt}}),Tx=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:Vt}});var Nx=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i=V({},Cs,{"if-match":e.IfMatch,"if-modified-since":[()=>Cs(e.IfModifiedSince),()=>zi(e.IfModifiedSince).toString()],"if-none-match":e.IfNoneMatch,"if-unmodified-since":[()=>Cs(e.IfUnmodifiedSince),()=>zi(e.IfUnmodifiedSince).toString()],range:e.Range,"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5,"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"x-amz-checksum-mode":e.ChecksumMode}),a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/{Key+}`;a=Ui(a,e,"Bucket",()=>e.Bucket,"{Bucket}",!1),a=Ui(a,e,"Key",()=>e.Key,"{Key+}",!0);let c=V({"x-id":[,"GetObject"],"response-cache-control":[,e.ResponseCacheControl],"response-content-disposition":[,e.ResponseContentDisposition],"response-content-encoding":[,e.ResponseContentEncoding],"response-content-language":[,e.ResponseContentLanguage],"response-content-type":[,e.ResponseContentType],"response-expires":[()=>e.ResponseExpires!==void 0,()=>zi(e.ResponseExpires).toString()],versionId:[,e.VersionId],partNumber:[()=>e.PartNumber!==void 0,()=>e.PartNumber.toString()]}),d;return new K({protocol:n,hostname:r,port:o,method:"GET",headers:i,path:a,query:c,body:d})};var Px=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i=V({},Cs,{"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"x-amz-optional-object-attributes":[()=>Cs(e.OptionalObjectAttributes),()=>(e.OptionalObjectAttributes||[]).map(l=>l).join(", ")]}),a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/`;a=Ui(a,e,"Bucket",()=>e.Bucket,"{Bucket}",!1);let c=V({"list-type":[,"2"],delimiter:[,e.Delimiter],"encoding-type":[,e.EncodingType],"max-keys":[()=>e.MaxKeys!==void 0,()=>e.MaxKeys.toString()],prefix:[,e.Prefix],"continuation-token":[,e.ContinuationToken],"fetch-owner":[()=>e.FetchOwner!==void 0,()=>e.FetchOwner.toString()],"start-after":[,e.StartAfter]}),d;return new K({protocol:n,hostname:r,port:o,method:"GET",headers:i,path:a,query:c,body:d})};var Ox=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return NP(e,t);let r=V({$metadata:xs(e),DeleteMarker:[()=>e.headers["x-amz-delete-marker"]!==void 0,()=>Ho(e.headers["x-amz-delete-marker"])],AcceptRanges:[,e.headers["accept-ranges"]],Expiration:[,e.headers["x-amz-expiration"]],Restore:[,e.headers["x-amz-restore"]],LastModified:[()=>e.headers["last-modified"]!==void 0,()=>Ie(Hd(e.headers["last-modified"]))],ContentLength:[()=>e.headers["content-length"]!==void 0,()=>qd(e.headers["content-length"])],ETag:[,e.headers.etag],ChecksumCRC32:[,e.headers["x-amz-checksum-crc32"]],ChecksumCRC32C:[,e.headers["x-amz-checksum-crc32c"]],ChecksumSHA1:[,e.headers["x-amz-checksum-sha1"]],ChecksumSHA256:[,e.headers["x-amz-checksum-sha256"]],MissingMeta:[()=>e.headers["x-amz-missing-meta"]!==void 0,()=>dr(e.headers["x-amz-missing-meta"])],VersionId:[,e.headers["x-amz-version-id"]],CacheControl:[,e.headers["cache-control"]],ContentDisposition:[,e.headers["content-disposition"]],ContentEncoding:[,e.headers["content-encoding"]],ContentLanguage:[,e.headers["content-language"]],ContentRange:[,e.headers["content-range"]],ContentType:[,e.headers["content-type"]],Expires:[()=>e.headers.expires!==void 0,()=>Ie(Hd(e.headers.expires))],WebsiteRedirectLocation:[,e.headers["x-amz-website-redirect-location"]],ServerSideEncryption:[,e.headers["x-amz-server-side-encryption"]],SSECustomerAlgorithm:[,e.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,e.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,e.headers["x-amz-server-side-encryption-aws-kms-key-id"]],BucketKeyEnabled:[()=>e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0,()=>Ho(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])],StorageClass:[,e.headers["x-amz-storage-class"]],RequestCharged:[,e.headers["x-amz-request-charged"]],ReplicationStatus:[,e.headers["x-amz-replication-status"]],PartsCount:[()=>e.headers["x-amz-mp-parts-count"]!==void 0,()=>dr(e.headers["x-amz-mp-parts-count"])],TagCount:[()=>e.headers["x-amz-tagging-count"]!==void 0,()=>dr(e.headers["x-amz-tagging-count"])],ObjectLockMode:[,e.headers["x-amz-object-lock-mode"]],ObjectLockRetainUntilDate:[()=>e.headers["x-amz-object-lock-retain-until-date"]!==void 0,()=>Ie(io(e.headers["x-amz-object-lock-retain-until-date"]))],ObjectLockLegalHoldStatus:[,e.headers["x-amz-object-lock-legal-hold"]],Metadata:[,Object.keys(e.headers).filter(o=>o.startsWith("x-amz-meta-")).reduce((o,s)=>(o[s.substring(11)]=e.headers[s],o),{})]}),n=e.body;return t.sdkStreamMixin(n),r.Body=n,r},NP=async(e,t)=>{let r={...e,body:await Mx(e.body,t)},n=Lx(e,r.body);switch(n){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await OP(r,t);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await DP(r,t);default:let o=r.body;return Dx({output:e,parsedBody:o,errorCode:n})}};var Ix=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return PP(e,t);let r=V({$metadata:xs(e),RequestCharged:[,e.headers["x-amz-request-charged"]]}),n=Ie(tn(await Bx(e.body,t)),"body");return n.CommonPrefixes===""?r.CommonPrefixes=[]:n.CommonPrefixes!==void 0&&(r.CommonPrefixes=LP($i(n.CommonPrefixes),t)),n.Contents===""?r.Contents=[]:n.Contents!==void 0&&(r.Contents=zP($i(n.Contents),t)),n.ContinuationToken!==void 0&&(r.ContinuationToken=_(n.ContinuationToken)),n.Delimiter!==void 0&&(r.Delimiter=_(n.Delimiter)),n.EncodingType!==void 0&&(r.EncodingType=_(n.EncodingType)),n.IsTruncated!==void 0&&(r.IsTruncated=Ho(n.IsTruncated)),n.KeyCount!==void 0&&(r.KeyCount=dr(n.KeyCount)),n.MaxKeys!==void 0&&(r.MaxKeys=dr(n.MaxKeys)),n.Name!==void 0&&(r.Name=_(n.Name)),n.NextContinuationToken!==void 0&&(r.NextContinuationToken=_(n.NextContinuationToken)),n.Prefix!==void 0&&(r.Prefix=_(n.Prefix)),n.StartAfter!==void 0&&(r.StartAfter=_(n.StartAfter)),r},PP=async(e,t)=>{let r={...e,body:await Mx(e.body,t)},n=Lx(e,r.body);switch(n){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await IP(r,t);default:let o=r.body;return Dx({output:e,parsedBody:o,errorCode:n})}};var Dx=nn(En);var OP=async(e,t)=>{let r=V({}),n=e.body;n.AccessTier!==void 0&&(r.AccessTier=_(n.AccessTier)),n.StorageClass!==void 0&&(r.StorageClass=_(n.StorageClass));let o=new Na({$metadata:xs(e),...r});return Y(o,e.body)},IP=async(e,t)=>{let r=V({}),n=e.body,o=new Oa({$metadata:xs(e),...r});return Y(o,e.body)},DP=async(e,t)=>{let r=V({}),n=e.body,o=new Pa({$metadata:xs(e),...r});return Y(o,e.body)};var BP=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>_(r)),MP=(e,t)=>{let r={};return e.Prefix!==void 0&&(r.Prefix=_(e.Prefix)),r},LP=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>MP(r,t));var FP=(e,t)=>{let r={};return e.Key!==void 0&&(r.Key=_(e.Key)),e.LastModified!==void 0&&(r.LastModified=Ie(io(e.LastModified))),e.ETag!==void 0&&(r.ETag=_(e.ETag)),e.ChecksumAlgorithm===""?r.ChecksumAlgorithm=[]:e.ChecksumAlgorithm!==void 0&&(r.ChecksumAlgorithm=BP($i(e.ChecksumAlgorithm),t)),e.Size!==void 0&&(r.Size=qd(e.Size)),e.StorageClass!==void 0&&(r.StorageClass=_(e.StorageClass)),e.Owner!==void 0&&(r.Owner=$P(e.Owner,t)),e.RestoreStatus!==void 0&&(r.RestoreStatus=UP(e.RestoreStatus,t)),r},zP=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>FP(r,t));var $P=(e,t)=>{let r={};return e.DisplayName!==void 0&&(r.DisplayName=_(e.DisplayName)),e.ID!==void 0&&(r.ID=_(e.ID)),r};var UP=(e,t)=>{let r={};return e.IsRestoreInProgress!==void 0&&(r.IsRestoreInProgress=Ho(e.IsRestoreInProgress)),e.RestoreExpiryDate!==void 0&&(r.RestoreExpiryDate=Ie(io(e.RestoreExpiryDate))),r};var xs=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),jP=(e,t)=>en(e,t).then(r=>t.utf8Encoder(r)),Cs=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),Bx=(e,t)=>jP(e,t).then(r=>{if(r.length){let n=new kx.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o=n.parse(r),s="#text",i=Object.keys(o)[0],a=o[i];return a[s]&&(a[i]=a[s],delete a[s]),Xo(a)}return{}}),Mx=async(e,t)=>{let r=await Bx(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Lx=(e,t)=>{if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"};function qP(e){return t=>async r=>{let n={...r.input},o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(let s of o){let i=n[s.target];if(i){let a=ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):typeof i=="string"?e.utf8Decoder(i):new Uint8Array(i),c=e.base64Encoder(a),d=new e.md5;d.update(a),n={...n,[s.target]:c,[s.hash]:e.base64Encoder(await d.digest())}}}return t({...r,input:n})}}var GP={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Fx=e=>({applyToStack:t=>{t.add(qP(e),GP)}});var Ee;(function(e){e.MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.SHA1="SHA1",e.SHA256="SHA256"})(Ee||(Ee={}));var zx;(function(e){e.HEADER="header",e.TRAILER="trailer"})(zx||(zx={}));var ws=[Ee.CRC32,Ee.CRC32C,Ee.SHA1,Ee.SHA256],$x=[Ee.CRC32,Ee.CRC32C,Ee.SHA1,Ee.SHA256];var Ux=(e,{requestChecksumRequired:t,requestAlgorithmMember:r})=>{if(!r||!e[r])return t?Ee.MD5:void 0;let n=e[r];if(!ws.includes(n))throw new Error(`The checksum algorithm "${n}" is not supported by the client. Select one of ${ws}.`);return n};var Ia=e=>e===Ee.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`;var jx=(e,t)=>{let r=e.toLowerCase();for(let n of Object.keys(t))if(r===n.toLowerCase())return!0;return!1};var Co=e=>e!==void 0&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!Jn(e);var Vx=tr(jo()),Wx=tr(uf());var Ba=(e,t)=>({[Ee.MD5]:t.md5,[Ee.CRC32]:Vx.AwsCrc32,[Ee.CRC32C]:Wx.AwsCrc32c,[Ee.SHA1]:t.sha1,[Ee.SHA256]:t.sha256})[e];var Ma=(e,t)=>{let r=new e;return r.update(nt(t||"")),r.digest()};var Yx=(e,t)=>r=>async n=>{if(!K.isInstance(n.request))return r(n);let{request:o}=n,{body:s,headers:i}=o,{base64Encoder:a,streamHasher:c}=e,{input:d,requestChecksumRequired:l,requestAlgorithmMember:f}=t,u=Ux(d,{requestChecksumRequired:l,requestAlgorithmMember:f}),y=s,x=i;if(u){let A=Ia(u),G=Ba(u,e);if(Co(s)){let{getAwsChunkedEncodingStream:le,bodyLengthChecker:We}=e;y=le(s,{base64Encoder:a,bodyLengthChecker:We,checksumLocationName:A,checksumAlgorithmFn:G,streamHasher:c}),x={...i,"content-encoding":i["content-encoding"]?`${i["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":i["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":A},delete x["content-length"]}else if(!jx(A,i)){let le=await Ma(G,s);x={...i,[A]:a(le)}}}return await r({...n,request:{...o,headers:x,body:y}})};import{Transform as JP}from"stream";function mf(e){let t=new JP;return t.push(e),t.push(null),t}var Xx=async(e,{streamHasher:t,checksumAlgorithmFn:r,base64Encoder:n})=>{let o=Co(e)?t(r,e):Ma(r,e);return n(await o)};var Qx=(e=[])=>{let t=[];for(let r of $x)!e.includes(r)||!ws.includes(r)||t.push(r);return t};var Jx=async(e,{config:t,responseAlgorithms:r})=>{let n=Qx(r),{body:o,headers:s}=e;for(let i of n){let a=Ia(i),c=s[a];if(c){let d=Ba(i,t),{streamHasher:l,base64Encoder:f}=t,u=await Xx(o,{streamHasher:l,checksumAlgorithmFn:d,base64Encoder:f});if(u===c)break;throw new Error(`Checksum mismatch: expected "${u}" but received "${c}" in response header "${a}".`)}}};var Zx={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},ew=(e,t)=>r=>async n=>{if(!K.isInstance(n.request))return r(n);let o=n.input,s=await r(n),i=s.response,a,{requestValidationModeMember:c,responseAlgorithms:d}=t;if(c&&o[c]==="ENABLED"){let l=Co(i.body);l&&(a=await e.streamCollector(i.body),i.body=mf(a)),await Jx(s.response,{config:e,responseAlgorithms:d}),l&&a&&(i.body=mf(a))}return s};var ZP={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},tw=(e,t)=>({applyToStack:r=>{r.add(Yx(e,t),ZP),r.addRelativeTo(ew(e,t),Zx)}});var bs=class e extends _e{static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(ze(r,this.serialize,this.deserialize)),this.middlewareStack.use($e(r,e.getEndpointParameterInstructions())),this.middlewareStack.use(Fx(r)),this.middlewareStack.use(tw(r,{input:this.input,requestChecksumRequired:!1,requestValidationModeMember:"ChecksumMode",responseAlgorithms:["CRC32","CRC32C","SHA256","SHA1"]}));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:Tx,outputFilterSensitiveLog:vx},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Nx(t,r)}deserialize(t,r){return Ox(t,r)}};var La=class e extends _e{static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(ze(r,this.serialize,this.deserialize)),this.middlewareStack.use($e(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"S3Client",commandName:"ListObjectsV2Command",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Px(t,r)}deserialize(t,r){return Ix(t,r)}};var hf=new ka,rO=async()=>{let e=Pt.default.getInput("key",{required:!0}),t=Pt.default.getInput("restore-keys").split(`
`).map(i=>i.trim()).filter(i=>!!i);Pt.default.saveState("key",e);let r;try{r=await hf.send(new bs({Bucket:"penxle-artifacts",Key:`actions-cache/${e}`})),Pt.default.saveState("exact-matched","true"),Pt.default.info("Cache found (exact match)")}catch{for(let i of t){let a=await hf.send(new La({Bucket:"penxle-artifacts",Prefix:`actions-cache/${i}`}));if(!a.Contents?.length)continue;let c=a.Contents.sort((d,l)=>l.LastModified.getTime()-d.LastModified.getTime())[0];r=await hf.send(new bs({Bucket:"penxle-artifacts",Key:c.Key})),Pt.default.info(`Cache found (restore key: ${i})`);break}}if(!r){Pt.default.info("Cache not found");return}let n=await Fa.default.getCompressionMethod(),o=Fa.default.getCacheFileName(n),s=tO.join(await Fa.default.createTempDirectory(),o);Pt.default.info("Downloading cache..."),await eO.writeFile(s,await r.Body.transformToByteArray()),Pt.default.info("Extracting cache..."),await(0,rw.extractTar)(s,n),Pt.default.info("Cache restored successfully")};await rO();
/*! Bundled license information:

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
