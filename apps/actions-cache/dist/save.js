const require = await import('module').then($=>$.createRequire(import.meta.url));
var Gx=Object.create;var ys=Object.defineProperty;var Kx=Object.getOwnPropertyDescriptor;var Hx=Object.getOwnPropertyNames;var Vx=Object.getPrototypeOf,Wx=Object.prototype.hasOwnProperty;var I=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var be=(e,t)=>()=>(e&&(t=e(e=0)),t);var T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),yo=(e,t)=>{for(var r in t)ys(e,r,{get:t[r],enumerable:!0})},Jl=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Hx(t))!Wx.call(e,o)&&o!==r&&ys(e,o,{get:()=>t[o],enumerable:!(n=Kx(t,o))||n.enumerable});return e};var er=(e,t,r)=>(r=e!=null?Gx(Vx(e)):{},Jl(t||!e||!e.__esModule?ys(r,"default",{value:e,enumerable:!0}):r,e)),In=e=>Jl(ys({},"__esModule",{value:!0}),e);var gs=T(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.toCommandProperties=Dn.toCommandValue=void 0;function Yx(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}Dn.toCommandValue=Yx;function Xx(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}Dn.toCommandProperties=Xx});var rf=T(lt=>{"use strict";var Qx=lt&&lt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Jx=lt&&lt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Zx=lt&&lt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Qx(t,e,r);return Jx(t,e),t};Object.defineProperty(lt,"__esModule",{value:!0});lt.issue=lt.issueCommand=void 0;var ew=Zx(I("os")),ef=gs();function tf(e,t,r){let n=new Na(e,t,r);process.stdout.write(n.toString()+ew.EOL)}lt.issueCommand=tf;function tw(e,t=""){tf(e,{},t)}lt.issue=tw;var Zl="::",Na=class{constructor(t,r,n){t||(t="missing.command"),this.command=t,this.properties=r,this.message=n}toString(){let t=Zl+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let o=this.properties[n];o&&(r?r=!1:t+=",",t+=`${n}=${nw(o)}`)}}return t+=`${Zl}${rw(this.message)}`,t}};function rw(e){return ef.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function nw(e){return ef.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});import ow from"crypto";function go(){return Es>Cs.length-16&&(ow.randomFillSync(Cs),Es=0),Cs.slice(Es,Es+=16)}var Cs,Es,Pa=be(()=>{"use strict";Cs=new Uint8Array(256),Es=Cs.length});var nf,of=be(()=>{"use strict";nf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function sw(e){return typeof e=="string"&&nf.test(e)}var br,Eo=be(()=>{"use strict";of();br=sw});function iw(e,t=0){let r=(Te[e[t+0]]+Te[e[t+1]]+Te[e[t+2]]+Te[e[t+3]]+"-"+Te[e[t+4]]+Te[e[t+5]]+"-"+Te[e[t+6]]+Te[e[t+7]]+"-"+Te[e[t+8]]+Te[e[t+9]]+"-"+Te[e[t+10]]+Te[e[t+11]]+Te[e[t+12]]+Te[e[t+13]]+Te[e[t+14]]+Te[e[t+15]]).toLowerCase();if(!br(r))throw TypeError("Stringified UUID is invalid");return r}var Te,Sr,Co=be(()=>{"use strict";Eo();Te=[];for(let e=0;e<256;++e)Te.push((e+256).toString(16).substr(1));Sr=iw});function aw(e,t,r){let n=t&&r||0,o=t||new Array(16);e=e||{};let s=e.node||sf,i=e.clockseq!==void 0?e.clockseq:Oa;if(s==null||i==null){let u=e.random||(e.rng||go)();s==null&&(s=sf=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),i==null&&(i=Oa=(u[6]<<8|u[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:Da+1,d=a-Ia+(c-Da)/1e4;if(d<0&&e.clockseq===void 0&&(i=i+1&16383),(d<0||a>Ia)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ia=a,Da=c,Oa=i,a+=122192928e5;let l=((a&268435455)*1e4+c)%4294967296;o[n++]=l>>>24&255,o[n++]=l>>>16&255,o[n++]=l>>>8&255,o[n++]=l&255;let f=a/4294967296*1e4&268435455;o[n++]=f>>>8&255,o[n++]=f&255,o[n++]=f>>>24&15|16,o[n++]=f>>>16&255,o[n++]=i>>>8|128,o[n++]=i&255;for(let u=0;u<6;++u)o[n+u]=s[u];return t||Sr(o)}var sf,Oa,Ia,Da,af,cf=be(()=>{"use strict";Pa();Co();Ia=0,Da=0;af=aw});function cw(e){if(!br(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var xs,Ba=be(()=>{"use strict";Eo();xs=cw});function dw(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function ws(e,t,r){function n(o,s,i,a){if(typeof o=="string"&&(o=dw(o)),typeof s=="string"&&(s=xs(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+o.length);if(c.set(s),c.set(o,s.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,i){a=a||0;for(let d=0;d<16;++d)i[a+d]=c[d];return i}return Sr(c)}try{n.name=e}catch{}return n.DNS=lw,n.URL=fw,n}var lw,fw,Ma=be(()=>{"use strict";Co();Ba();lw="6ba7b810-9dad-11d1-80b4-00c04fd430c8",fw="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});import uw from"crypto";function mw(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),uw.createHash("md5").update(e).digest()}var df,lf=be(()=>{"use strict";df=mw});var hw,ff,uf=be(()=>{"use strict";Ma();lf();hw=ws("v3",48,df),ff=hw});function pw(e,t,r){e=e||{};let n=e.random||(e.rng||go)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return Sr(n)}var bs,mf=be(()=>{"use strict";Pa();Co();bs=pw});import yw from"crypto";function gw(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),yw.createHash("sha1").update(e).digest()}var hf,pf=be(()=>{"use strict";hf=gw});var Ew,yf,gf=be(()=>{"use strict";Ma();pf();Ew=ws("v5",80,hf),yf=Ew});var Ef,Cf=be(()=>{"use strict";Ef="00000000-0000-0000-0000-000000000000"});function Cw(e){if(!br(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var xf,wf=be(()=>{"use strict";Eo();xf=Cw});var bf={};yo(bf,{NIL:()=>Ef,parse:()=>xs,stringify:()=>Sr,v1:()=>af,v3:()=>ff,v4:()=>bs,v5:()=>yf,validate:()=>br,version:()=>xf});var La=be(()=>{"use strict";cf();uf();mf();gf();Cf();wf();Eo();Co();Ba()});var Rf=T(ft=>{"use strict";var xw=ft&&ft.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ww=ft&&ft.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Af=ft&&ft.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&xw(t,e,r);return ww(t,e),t};Object.defineProperty(ft,"__esModule",{value:!0});ft.prepareKeyValueMessage=ft.issueFileCommand=void 0;var Sf=Af(I("fs")),Fa=Af(I("os")),bw=(La(),In(bf)),_f=gs();function Sw(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!Sf.existsSync(r))throw new Error(`Missing file at path: ${r}`);Sf.appendFileSync(r,`${_f.toCommandValue(t)}${Fa.EOL}`,{encoding:"utf8"})}ft.issueFileCommand=Sw;function Aw(e,t){let r=`ghadelimiter_${bw.v4()}`,n=_f.toCommandValue(t);if(e.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${e}<<${r}${Fa.EOL}${n}${Fa.EOL}${r}`}ft.prepareKeyValueMessage=Aw});var Tf=T(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.checkBypass=Bn.getProxyUrl=void 0;function _w(e){let t=e.protocol==="https:";if(vf(e))return;let r=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)try{return new URL(r)}catch{if(!r.startsWith("http://")&&!r.startsWith("https://"))return new URL(`http://${r}`)}else return}Bn.getProxyUrl=_w;function vf(e){if(!e.hostname)return!1;let t=e.hostname;if(Rw(t))return!0;let r=process.env.no_proxy||process.env.NO_PROXY||"";if(!r)return!1;let n;e.port?n=Number(e.port):e.protocol==="http:"?n=80:e.protocol==="https:"&&(n=443);let o=[e.hostname.toUpperCase()];typeof n=="number"&&o.push(`${o[0]}:${n}`);for(let s of r.split(",").map(i=>i.trim().toUpperCase()).filter(i=>i))if(s==="*"||o.some(i=>i===s||i.endsWith(`.${s}`)||s.startsWith(".")&&i.endsWith(`${s}`)))return!0;return!1}Bn.checkBypass=vf;function Rw(e){let t=e.toLowerCase();return t==="localhost"||t.startsWith("127.")||t.startsWith("[::1]")||t.startsWith("[0:0:0:0:0:0:0:1]")}});var Of=T(Mn=>{"use strict";var _O=I("net"),vw=I("tls"),za=I("http"),kf=I("https"),Tw=I("events"),RO=I("assert"),kw=I("util");Mn.httpOverHttp=Nw;Mn.httpsOverHttp=Pw;Mn.httpOverHttps=Ow;Mn.httpsOverHttps=Iw;function Nw(e){var t=new tr(e);return t.request=za.request,t}function Pw(e){var t=new tr(e);return t.request=za.request,t.createSocket=Nf,t.defaultPort=443,t}function Ow(e){var t=new tr(e);return t.request=kf.request,t}function Iw(e){var t=new tr(e);return t.request=kf.request,t.createSocket=Nf,t.defaultPort=443,t}function tr(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||za.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,o,s,i){for(var a=Pf(o,s,i),c=0,d=t.requests.length;c<d;++c){var l=t.requests[c];if(l.host===a.host&&l.port===a.port){t.requests.splice(c,1),l.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}kw.inherits(tr,Tw.EventEmitter);tr.prototype.addRequest=function(t,r,n,o){var s=this,i=$a({request:t},s.options,Pf(r,n,o));if(s.sockets.length>=this.maxSockets){s.requests.push(i);return}s.createSocket(i,function(a){a.on("free",c),a.on("close",d),a.on("agentRemove",d),t.onSocket(a);function c(){s.emit("free",a,i)}function d(l){s.removeSocket(a),a.removeListener("free",c),a.removeListener("close",d),a.removeListener("agentRemove",d)}})};tr.prototype.createSocket=function(t,r){var n=this,o={};n.sockets.push(o);var s=$a({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(s.localAddress=t.localAddress),s.proxyAuth&&(s.headers=s.headers||{},s.headers["Proxy-Authorization"]="Basic "+new Buffer(s.proxyAuth).toString("base64")),Ar("making CONNECT request");var i=n.request(s);i.useChunkedEncodingByDefault=!1,i.once("response",a),i.once("upgrade",c),i.once("connect",d),i.once("error",l),i.end();function a(f){f.upgrade=!0}function c(f,u,y){process.nextTick(function(){d(f,u,y)})}function d(f,u,y){if(i.removeAllListeners(),u.removeAllListeners(),f.statusCode!==200){Ar("tunneling socket could not be established, statusCode=%d",f.statusCode),u.destroy();var x=new Error("tunneling socket could not be established, statusCode="+f.statusCode);x.code="ECONNRESET",t.request.emit("error",x),n.removeSocket(o);return}if(y.length>0){Ar("got illegal response body from proxy"),u.destroy();var x=new Error("got illegal response body from proxy");x.code="ECONNRESET",t.request.emit("error",x),n.removeSocket(o);return}return Ar("tunneling connection has established"),n.sockets[n.sockets.indexOf(o)]=u,r(u)}function l(f){i.removeAllListeners(),Ar(`tunneling socket could not be established, cause=%s
`,f.message,f.stack);var u=new Error("tunneling socket could not be established, cause="+f.message);u.code="ECONNRESET",t.request.emit("error",u),n.removeSocket(o)}};tr.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(o){n.request.onSocket(o)})}};function Nf(e,t){var r=this;tr.prototype.createSocket.call(r,e,function(n){var o=e.request.getHeader("host"),s=$a({},r.options,{socket:n,servername:o?o.replace(/:.*$/,""):e.host}),i=vw.connect(0,s);r.sockets[r.sockets.indexOf(n)]=i,t(i)})}function Pf(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function $a(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n=="object")for(var o=Object.keys(n),s=0,i=o.length;s<i;++s){var a=o[s];n[a]!==void 0&&(e[a]=n[a])}}return e}var Ar;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?Ar=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:Ar=function(){};Mn.debug=Ar});var Df=T((TO,If)=>{"use strict";If.exports=Of()});var Mf=T(ee=>{"use strict";var Dw=ee&&ee.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Bw=ee&&ee.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ts=ee&&ee.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Dw(t,e,r);return Bw(t,e),t},pe=ee&&ee.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(ee,"__esModule",{value:!0});ee.HttpClient=ee.isHttps=ee.HttpClientResponse=ee.HttpClientError=ee.getProxyUrl=ee.MediaTypes=ee.Headers=ee.HttpCodes=void 0;var Ss=Ts(I("http")),Ua=Ts(I("https")),Bf=Ts(Tf()),As=Ts(Df()),_t;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(_t=ee.HttpCodes||(ee.HttpCodes={}));var Ue;(function(e){e.Accept="accept",e.ContentType="content-type"})(Ue=ee.Headers||(ee.Headers={}));var _r;(function(e){e.ApplicationJson="application/json"})(_r=ee.MediaTypes||(ee.MediaTypes={}));function Mw(e){let t=Bf.getProxyUrl(new URL(e));return t?t.href:""}ee.getProxyUrl=Mw;var Lw=[_t.MovedPermanently,_t.ResourceMoved,_t.SeeOther,_t.TemporaryRedirect,_t.PermanentRedirect],Fw=[_t.BadGateway,_t.ServiceUnavailable,_t.GatewayTimeout],zw=["OPTIONS","GET","DELETE","HEAD"],$w=10,Uw=5,Rs=class e extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,e.prototype)}};ee.HttpClientError=Rs;var vs=class{constructor(t){this.message=t}readBody(){return pe(this,void 0,void 0,function*(){return new Promise(t=>pe(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{t(r.toString())})}))})}readBodyBuffer(){return pe(this,void 0,void 0,function*(){return new Promise(t=>pe(this,void 0,void 0,function*(){let r=[];this.message.on("data",n=>{r.push(n)}),this.message.on("end",()=>{t(Buffer.concat(r))})}))})}};ee.HttpClientResponse=vs;function jw(e){return new URL(e).protocol==="https:"}ee.isHttps=jw;var ja=class{constructor(t,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,r){return pe(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,r||{})})}get(t,r){return pe(this,void 0,void 0,function*(){return this.request("GET",t,null,r||{})})}del(t,r){return pe(this,void 0,void 0,function*(){return this.request("DELETE",t,null,r||{})})}post(t,r,n){return pe(this,void 0,void 0,function*(){return this.request("POST",t,r,n||{})})}patch(t,r,n){return pe(this,void 0,void 0,function*(){return this.request("PATCH",t,r,n||{})})}put(t,r,n){return pe(this,void 0,void 0,function*(){return this.request("PUT",t,r,n||{})})}head(t,r){return pe(this,void 0,void 0,function*(){return this.request("HEAD",t,null,r||{})})}sendStream(t,r,n,o){return pe(this,void 0,void 0,function*(){return this.request(t,r,n,o)})}getJson(t,r={}){return pe(this,void 0,void 0,function*(){r[Ue.Accept]=this._getExistingOrDefaultHeader(r,Ue.Accept,_r.ApplicationJson);let n=yield this.get(t,r);return this._processResponse(n,this.requestOptions)})}postJson(t,r,n={}){return pe(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Ue.Accept]=this._getExistingOrDefaultHeader(n,Ue.Accept,_r.ApplicationJson),n[Ue.ContentType]=this._getExistingOrDefaultHeader(n,Ue.ContentType,_r.ApplicationJson);let s=yield this.post(t,o,n);return this._processResponse(s,this.requestOptions)})}putJson(t,r,n={}){return pe(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Ue.Accept]=this._getExistingOrDefaultHeader(n,Ue.Accept,_r.ApplicationJson),n[Ue.ContentType]=this._getExistingOrDefaultHeader(n,Ue.ContentType,_r.ApplicationJson);let s=yield this.put(t,o,n);return this._processResponse(s,this.requestOptions)})}patchJson(t,r,n={}){return pe(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Ue.Accept]=this._getExistingOrDefaultHeader(n,Ue.Accept,_r.ApplicationJson),n[Ue.ContentType]=this._getExistingOrDefaultHeader(n,Ue.ContentType,_r.ApplicationJson);let s=yield this.patch(t,o,n);return this._processResponse(s,this.requestOptions)})}request(t,r,n,o){return pe(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let s=new URL(r),i=this._prepareRequest(t,s,o),a=this._allowRetries&&zw.includes(t)?this._maxRetries+1:1,c=0,d;do{if(d=yield this.requestRaw(i,n),d&&d.message&&d.message.statusCode===_t.Unauthorized){let f;for(let u of this.handlers)if(u.canHandleAuthentication(d)){f=u;break}return f?f.handleAuthentication(this,i,n):d}let l=this._maxRedirects;for(;d.message.statusCode&&Lw.includes(d.message.statusCode)&&this._allowRedirects&&l>0;){let f=d.message.headers.location;if(!f)break;let u=new URL(f);if(s.protocol==="https:"&&s.protocol!==u.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield d.readBody(),u.hostname!==s.hostname)for(let y in o)y.toLowerCase()==="authorization"&&delete o[y];i=this._prepareRequest(t,u,o),d=yield this.requestRaw(i,n),l--}if(!d.message.statusCode||!Fw.includes(d.message.statusCode))return d;c+=1,c<a&&(yield d.readBody(),yield this._performExponentialBackoff(c))}while(c<a);return d})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return pe(this,void 0,void 0,function*(){return new Promise((n,o)=>{function s(i,a){i?o(i):a?n(a):o(new Error("Unknown error"))}this.requestRawWithCallback(t,r,s)})})}requestRawWithCallback(t,r,n){typeof r=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let o=!1;function s(c,d){o||(o=!0,n(c,d))}let i=t.httpModule.request(t.options,c=>{let d=new vs(c);s(void 0,d)}),a;i.on("socket",c=>{a=c}),i.setTimeout(this._socketTimeout||3*6e4,()=>{a&&a.end(),s(new Error(`Request timeout: ${t.options.path}`))}),i.on("error",function(c){s(c)}),r&&typeof r=="string"&&i.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){i.end()}),r.pipe(i)):i.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){let o={};o.parsedUrl=r;let s=o.parsedUrl.protocol==="https:";o.httpModule=s?Ua:Ss;let i=s?443:80;if(o.options={},o.options.host=o.parsedUrl.hostname,o.options.port=o.parsedUrl.port?parseInt(o.parsedUrl.port):i,o.options.path=(o.parsedUrl.pathname||"")+(o.parsedUrl.search||""),o.options.method=t,o.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(o.options.headers["user-agent"]=this.userAgent),o.options.agent=this._getAgent(o.parsedUrl),this.handlers)for(let a of this.handlers)a.prepareRequest(o.options);return o}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},_s(this.requestOptions.headers),_s(t||{})):_s(t||{})}_getExistingOrDefaultHeader(t,r,n){let o;return this.requestOptions&&this.requestOptions.headers&&(o=_s(this.requestOptions.headers)[r]),t[r]||o||n}_getAgent(t){let r,n=Bf.getProxyUrl(t),o=n&&n.hostname;if(this._keepAlive&&o&&(r=this._proxyAgent),this._keepAlive&&!o&&(r=this._agent),r)return r;let s=t.protocol==="https:",i=100;if(this.requestOptions&&(i=this.requestOptions.maxSockets||Ss.globalAgent.maxSockets),n&&n.hostname){let a={maxSockets:i,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},c,d=n.protocol==="https:";s?c=d?As.httpsOverHttps:As.httpsOverHttp:c=d?As.httpOverHttps:As.httpOverHttp,r=c(a),this._proxyAgent=r}if(this._keepAlive&&!r){let a={keepAlive:this._keepAlive,maxSockets:i};r=s?new Ua.Agent(a):new Ss.Agent(a),this._agent=r}return r||(r=s?Ua.globalAgent:Ss.globalAgent),s&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){return pe(this,void 0,void 0,function*(){t=Math.min($w,t);let r=Uw*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(t,r){return pe(this,void 0,void 0,function*(){return new Promise((n,o)=>pe(this,void 0,void 0,function*(){let s=t.message.statusCode||0,i={statusCode:s,result:null,headers:{}};s===_t.NotFound&&n(i);function a(l,f){if(typeof f=="string"){let u=new Date(f);if(!isNaN(u.valueOf()))return u}return f}let c,d;try{d=yield t.readBody(),d&&d.length>0&&(r&&r.deserializeDates?c=JSON.parse(d,a):c=JSON.parse(d),i.result=c),i.headers=t.message.headers}catch{}if(s>299){let l;c&&c.message?l=c.message:d&&d.length>0?l=d:l=`Failed request: (${s})`;let f=new Rs(l,s);f.result=i.result,o(f)}else n(i)}))})}};ee.HttpClient=ja;var _s=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{})});var Lf=T(Ot=>{"use strict";var Ha=Ot&&Ot.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.PersonalAccessTokenCredentialHandler=Ot.BearerCredentialHandler=Ot.BasicCredentialHandler=void 0;var qa=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Ha(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ot.BasicCredentialHandler=qa;var Ga=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return Ha(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ot.BearerCredentialHandler=Ga;var Ka=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Ha(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ot.PersonalAccessTokenCredentialHandler=Ka});var $f=T(Ln=>{"use strict";var Ff=Ln&&Ln.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.OidcClient=void 0;var qw=Mf(),Gw=Lf(),zf=Fn(),Va=class e{static createHttpClient(t=!0,r=10){let n={allowRetries:t,maxRetries:r};return new qw.HttpClient("actions/oidc-client",[new Gw.BearerCredentialHandler(e.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return Ff(this,void 0,void 0,function*(){let s=(r=(yield e.createHttpClient().getJson(t).catch(i=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${i.statusCode}
 
        Error Message: ${i.result.message}`)})).result)===null||r===void 0?void 0:r.value;if(!s)throw new Error("Response json body do not have ID Token field");return s})}static getIDToken(t){return Ff(this,void 0,void 0,function*(){try{let r=e.getIDTokenUrl();if(t){let o=encodeURIComponent(t);r=`${r}&audience=${o}`}zf.debug(`ID token url is ${r}`);let n=yield e.getCall(r);return zf.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};Ln.OidcClient=Va});var Qa=T(He=>{"use strict";var Wa=He&&He.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(He,"__esModule",{value:!0});He.summary=He.markdownSummary=He.SUMMARY_DOCS_URL=He.SUMMARY_ENV_VAR=void 0;var Kw=I("os"),Ya=I("fs"),{access:Hw,appendFile:Vw,writeFile:Ww}=Ya.promises;He.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";He.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var Xa=class{constructor(){this._buffer=""}filePath(){return Wa(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[He.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${He.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield Hw(t,Ya.constants.R_OK|Ya.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,r,n={}){let o=Object.entries(n).map(([s,i])=>` ${s}="${i}"`).join("");return r?`<${t}${o}>${r}</${t}>`:`<${t}${o}>`}write(t){return Wa(this,void 0,void 0,function*(){let r=!!t?.overwrite,n=yield this.filePath();return yield(r?Ww:Vw)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return Wa(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,r=!1){return this._buffer+=t,r?this.addEOL():this}addEOL(){return this.addRaw(Kw.EOL)}addCodeBlock(t,r){let n=Object.assign({},r&&{lang:r}),o=this.wrap("pre",this.wrap("code",t),n);return this.addRaw(o).addEOL()}addList(t,r=!1){let n=r?"ol":"ul",o=t.map(i=>this.wrap("li",i)).join(""),s=this.wrap(n,o);return this.addRaw(s).addEOL()}addTable(t){let r=t.map(o=>{let s=o.map(i=>{if(typeof i=="string")return this.wrap("td",i);let{header:a,data:c,colspan:d,rowspan:l}=i,f=a?"th":"td",u=Object.assign(Object.assign({},d&&{colspan:d}),l&&{rowspan:l});return this.wrap(f,c,u)}).join("");return this.wrap("tr",s)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(t,r){let n=this.wrap("details",this.wrap("summary",t)+r);return this.addRaw(n).addEOL()}addImage(t,r,n){let{width:o,height:s}=n||{},i=Object.assign(Object.assign({},o&&{width:o}),s&&{height:s}),a=this.wrap("img",null,Object.assign({src:t,alt:r},i));return this.addRaw(a).addEOL()}addHeading(t,r){let n=`h${r}`,o=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",s=this.wrap(o,t);return this.addRaw(s).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,r){let n=Object.assign({},r&&{cite:r}),o=this.wrap("blockquote",t,n);return this.addRaw(o).addEOL()}addLink(t,r){let n=this.wrap("a",t,{href:r});return this.addRaw(n).addEOL()}},Uf=new Xa;He.markdownSummary=Uf;He.summary=Uf});var jf=T(Ve=>{"use strict";var Yw=Ve&&Ve.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Xw=Ve&&Ve.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Qw=Ve&&Ve.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Yw(t,e,r);return Xw(t,e),t};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.toPlatformPath=Ve.toWin32Path=Ve.toPosixPath=void 0;var Jw=Qw(I("path"));function Zw(e){return e.replace(/[\\]/g,"/")}Ve.toPosixPath=Zw;function eb(e){return e.replace(/[/]/g,"\\")}Ve.toWin32Path=eb;function tb(e){return e.replace(/[/\\]/g,Jw.sep)}Ve.toPlatformPath=tb});var Fn=T(v=>{"use strict";var rb=v&&v.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),nb=v&&v.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),qf=v&&v.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&rb(t,e,r);return nb(t,e),t},Gf=v&&v.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.getIDToken=v.getState=v.saveState=v.group=v.endGroup=v.startGroup=v.info=v.notice=v.warning=v.error=v.debug=v.isDebug=v.setFailed=v.setCommandEcho=v.setOutput=v.getBooleanInput=v.getMultilineInput=v.getInput=v.addPath=v.setSecret=v.exportVariable=v.ExitCode=void 0;var ut=rf(),gn=Rf(),zn=gs(),Kf=qf(I("os")),ob=qf(I("path")),sb=$f(),Hf;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(Hf=v.ExitCode||(v.ExitCode={}));function ib(e,t){let r=zn.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||"")return gn.issueFileCommand("ENV",gn.prepareKeyValueMessage(e,t));ut.issueCommand("set-env",{name:e},r)}v.exportVariable=ib;function ab(e){ut.issueCommand("add-mask",{},e)}v.setSecret=ab;function cb(e){process.env.GITHUB_PATH||""?gn.issueFileCommand("PATH",e):ut.issueCommand("add-path",{},e),process.env.PATH=`${e}${ob.delimiter}${process.env.PATH}`}v.addPath=cb;function Ja(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}v.getInput=Ja;function db(e,t){let r=Ja(e,t).split(`
`).filter(n=>n!=="");return t&&t.trimWhitespace===!1?r:r.map(n=>n.trim())}v.getMultilineInput=db;function lb(e,t){let r=["true","True","TRUE"],n=["false","False","FALSE"],o=Ja(e,t);if(r.includes(o))return!0;if(n.includes(o))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}v.getBooleanInput=lb;function fb(e,t){if(process.env.GITHUB_OUTPUT||"")return gn.issueFileCommand("OUTPUT",gn.prepareKeyValueMessage(e,t));process.stdout.write(Kf.EOL),ut.issueCommand("set-output",{name:e},zn.toCommandValue(t))}v.setOutput=fb;function ub(e){ut.issue("echo",e?"on":"off")}v.setCommandEcho=ub;function mb(e){process.exitCode=Hf.Failure,Vf(e)}v.setFailed=mb;function hb(){return process.env.RUNNER_DEBUG==="1"}v.isDebug=hb;function pb(e){ut.issueCommand("debug",{},e)}v.debug=pb;function Vf(e,t={}){ut.issueCommand("error",zn.toCommandProperties(t),e instanceof Error?e.toString():e)}v.error=Vf;function yb(e,t={}){ut.issueCommand("warning",zn.toCommandProperties(t),e instanceof Error?e.toString():e)}v.warning=yb;function gb(e,t={}){ut.issueCommand("notice",zn.toCommandProperties(t),e instanceof Error?e.toString():e)}v.notice=gb;function Eb(e){process.stdout.write(e+Kf.EOL)}v.info=Eb;function Wf(e){ut.issue("group",e)}v.startGroup=Wf;function Yf(){ut.issue("endgroup")}v.endGroup=Yf;function Cb(e,t){return Gf(this,void 0,void 0,function*(){Wf(e);let r;try{r=yield t()}finally{Yf()}return r})}v.group=Cb;function xb(e,t){if(process.env.GITHUB_STATE||"")return gn.issueFileCommand("STATE",gn.prepareKeyValueMessage(e,t));ut.issueCommand("save-state",{name:e},zn.toCommandValue(t))}v.saveState=xb;function wb(e){return process.env[`STATE_${e}`]||""}v.getState=wb;function bb(e){return Gf(this,void 0,void 0,function*(){return yield sb.OidcClient.getIDToken(e)})}v.getIDToken=bb;var Sb=Qa();Object.defineProperty(v,"summary",{enumerable:!0,get:function(){return Sb.summary}});var Ab=Qa();Object.defineProperty(v,"markdownSummary",{enumerable:!0,get:function(){return Ab.markdownSummary}});var Za=jf();Object.defineProperty(v,"toPosixPath",{enumerable:!0,get:function(){return Za.toPosixPath}});Object.defineProperty(v,"toWin32Path",{enumerable:!0,get:function(){return Za.toWin32Path}});Object.defineProperty(v,"toPlatformPath",{enumerable:!0,get:function(){return Za.toPlatformPath}})});var tc=T(_=>{"use strict";var _b=_&&_.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Rb=_&&_.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Qf=_&&_.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&_b(t,e,r);return Rb(t,e),t},ec=_&&_.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})},We;Object.defineProperty(_,"__esModule",{value:!0});_.getCmdPath=_.tryGetExecutablePath=_.isRooted=_.isDirectory=_.exists=_.READONLY=_.UV_FS_O_EXLOCK=_.IS_WINDOWS=_.unlink=_.symlink=_.stat=_.rmdir=_.rm=_.rename=_.readlink=_.readdir=_.open=_.mkdir=_.lstat=_.copyFile=_.chmod=void 0;var Jf=Qf(I("fs")),ks=Qf(I("path"));We=Jf.promises,_.chmod=We.chmod,_.copyFile=We.copyFile,_.lstat=We.lstat,_.mkdir=We.mkdir,_.open=We.open,_.readdir=We.readdir,_.readlink=We.readlink,_.rename=We.rename,_.rm=We.rm,_.rmdir=We.rmdir,_.stat=We.stat,_.symlink=We.symlink,_.unlink=We.unlink;_.IS_WINDOWS=process.platform==="win32";_.UV_FS_O_EXLOCK=268435456;_.READONLY=Jf.constants.O_RDONLY;function vb(e){return ec(this,void 0,void 0,function*(){try{yield _.stat(e)}catch(t){if(t.code==="ENOENT")return!1;throw t}return!0})}_.exists=vb;function Tb(e,t=!1){return ec(this,void 0,void 0,function*(){return(t?yield _.stat(e):yield _.lstat(e)).isDirectory()})}_.isDirectory=Tb;function kb(e){if(e=Pb(e),!e)throw new Error('isRooted() parameter "p" cannot be empty');return _.IS_WINDOWS?e.startsWith("\\")||/^[A-Z]:/i.test(e):e.startsWith("/")}_.isRooted=kb;function Nb(e,t){return ec(this,void 0,void 0,function*(){let r;try{r=yield _.stat(e)}catch(o){o.code!=="ENOENT"&&console.log(`Unexpected error attempting to determine if executable file exists '${e}': ${o}`)}if(r&&r.isFile()){if(_.IS_WINDOWS){let o=ks.extname(e).toUpperCase();if(t.some(s=>s.toUpperCase()===o))return e}else if(Xf(r))return e}let n=e;for(let o of t){e=n+o,r=void 0;try{r=yield _.stat(e)}catch(s){s.code!=="ENOENT"&&console.log(`Unexpected error attempting to determine if executable file exists '${e}': ${s}`)}if(r&&r.isFile()){if(_.IS_WINDOWS){try{let s=ks.dirname(e),i=ks.basename(e).toUpperCase();for(let a of yield _.readdir(s))if(i===a.toUpperCase()){e=ks.join(s,a);break}}catch(s){console.log(`Unexpected error attempting to determine the actual case of the file '${e}': ${s}`)}return e}else if(Xf(r))return e}}return""})}_.tryGetExecutablePath=Nb;function Pb(e){return e=e||"",_.IS_WINDOWS?(e=e.replace(/\//g,"\\"),e.replace(/\\\\+/g,"\\")):e.replace(/\/\/+/g,"/")}function Xf(e){return(e.mode&1)>0||(e.mode&8)>0&&e.gid===process.getgid()||(e.mode&64)>0&&e.uid===process.getuid()}function Ob(){var e;return(e=process.env.COMSPEC)!==null&&e!==void 0?e:"cmd.exe"}_.getCmdPath=Ob});var Ns=T(ue=>{"use strict";var Ib=ue&&ue.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Db=ue&&ue.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Zf=ue&&ue.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Ib(t,e,r);return Db(t,e),t},Rr=ue&&ue.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(ue,"__esModule",{value:!0});ue.findInPath=ue.which=ue.mkdirP=ue.rmRF=ue.mv=ue.cp=void 0;var Bb=I("assert"),It=Zf(I("path")),X=Zf(tc());function Mb(e,t,r={}){return Rr(this,void 0,void 0,function*(){let{force:n,recursive:o,copySourceDirectory:s}=Fb(r),i=(yield X.exists(t))?yield X.stat(t):null;if(i&&i.isFile()&&!n)return;let a=i&&i.isDirectory()&&s?It.join(t,It.basename(e)):t;if(!(yield X.exists(e)))throw new Error(`no such file or directory: ${e}`);if((yield X.stat(e)).isDirectory())if(o)yield nu(e,a,0,n);else throw new Error(`Failed to copy. ${e} is a directory, but tried to copy without recursive flag.`);else{if(It.relative(e,a)==="")throw new Error(`'${a}' and '${e}' are the same file`);yield ou(e,a,n)}})}ue.cp=Mb;function Lb(e,t,r={}){return Rr(this,void 0,void 0,function*(){if(yield X.exists(t)){let n=!0;if((yield X.isDirectory(t))&&(t=It.join(t,It.basename(e)),n=yield X.exists(t)),n)if(r.force==null||r.force)yield eu(t);else throw new Error("Destination already exists")}yield rc(It.dirname(t)),yield X.rename(e,t)})}ue.mv=Lb;function eu(e){return Rr(this,void 0,void 0,function*(){if(X.IS_WINDOWS&&/[*"<>|]/.test(e))throw new Error('File path must not contain `*`, `"`, `<`, `>` or `|` on Windows');try{yield X.rm(e,{force:!0,maxRetries:3,recursive:!0,retryDelay:300})}catch(t){throw new Error(`File was unable to be removed ${t}`)}})}ue.rmRF=eu;function rc(e){return Rr(this,void 0,void 0,function*(){Bb.ok(e,"a path argument must be provided"),yield X.mkdir(e,{recursive:!0})})}ue.mkdirP=rc;function tu(e,t){return Rr(this,void 0,void 0,function*(){if(!e)throw new Error("parameter 'tool' is required");if(t){let n=yield tu(e,!1);if(!n)throw X.IS_WINDOWS?new Error(`Unable to locate executable file: ${e}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`):new Error(`Unable to locate executable file: ${e}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`);return n}let r=yield ru(e);return r&&r.length>0?r[0]:""})}ue.which=tu;function ru(e){return Rr(this,void 0,void 0,function*(){if(!e)throw new Error("parameter 'tool' is required");let t=[];if(X.IS_WINDOWS&&process.env.PATHEXT)for(let o of process.env.PATHEXT.split(It.delimiter))o&&t.push(o);if(X.isRooted(e)){let o=yield X.tryGetExecutablePath(e,t);return o?[o]:[]}if(e.includes(It.sep))return[];let r=[];if(process.env.PATH)for(let o of process.env.PATH.split(It.delimiter))o&&r.push(o);let n=[];for(let o of r){let s=yield X.tryGetExecutablePath(It.join(o,e),t);s&&n.push(s)}return n})}ue.findInPath=ru;function Fb(e){let t=e.force==null?!0:e.force,r=!!e.recursive,n=e.copySourceDirectory==null?!0:!!e.copySourceDirectory;return{force:t,recursive:r,copySourceDirectory:n}}function nu(e,t,r,n){return Rr(this,void 0,void 0,function*(){if(r>=255)return;r++,yield rc(t);let o=yield X.readdir(e);for(let s of o){let i=`${e}/${s}`,a=`${t}/${s}`;(yield X.lstat(i)).isDirectory()?yield nu(i,a,r,n):yield ou(i,a,n)}yield X.chmod(t,(yield X.stat(e)).mode)})}function ou(e,t,r){return Rr(this,void 0,void 0,function*(){if((yield X.lstat(e)).isSymbolicLink()){try{yield X.lstat(t),yield X.unlink(t)}catch(o){o.code==="EPERM"&&(yield X.chmod(t,"0666"),yield X.unlink(t))}let n=yield X.readlink(e);yield X.symlink(n,t,X.IS_WINDOWS?"junction":null)}else(!(yield X.exists(t))||r)&&(yield X.copyFile(e,t))})}});var cu=T(Ye=>{"use strict";var zb=Ye&&Ye.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),$b=Ye&&Ye.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),$n=Ye&&Ye.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&zb(t,e,r);return $b(t,e),t},su=Ye&&Ye.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.argStringToArray=Ye.ToolRunner=void 0;var Ps=$n(I("os")),au=$n(I("events")),Ub=$n(I("child_process")),jb=$n(I("path")),qb=$n(Ns()),iu=$n(tc()),Gb=I("timers"),Os=process.platform==="win32",nc=class extends au.EventEmitter{constructor(t,r,n){if(super(),!t)throw new Error("Parameter 'toolPath' cannot be null or empty.");this.toolPath=t,this.args=r||[],this.options=n||{}}_debug(t){this.options.listeners&&this.options.listeners.debug&&this.options.listeners.debug(t)}_getCommandString(t,r){let n=this._getSpawnFileName(),o=this._getSpawnArgs(t),s=r?"":"[command]";if(Os)if(this._isCmdFile()){s+=n;for(let i of o)s+=` ${i}`}else if(t.windowsVerbatimArguments){s+=`"${n}"`;for(let i of o)s+=` ${i}`}else{s+=this._windowsQuoteCmdArg(n);for(let i of o)s+=` ${this._windowsQuoteCmdArg(i)}`}else{s+=n;for(let i of o)s+=` ${i}`}return s}_processLineBuffer(t,r,n){try{let o=r+t.toString(),s=o.indexOf(Ps.EOL);for(;s>-1;){let i=o.substring(0,s);n(i),o=o.substring(s+Ps.EOL.length),s=o.indexOf(Ps.EOL)}return o}catch(o){return this._debug(`error processing line. Failed with error ${o}`),""}}_getSpawnFileName(){return Os&&this._isCmdFile()?process.env.COMSPEC||"cmd.exe":this.toolPath}_getSpawnArgs(t){if(Os&&this._isCmdFile()){let r=`/D /S /C "${this._windowsQuoteCmdArg(this.toolPath)}`;for(let n of this.args)r+=" ",r+=t.windowsVerbatimArguments?n:this._windowsQuoteCmdArg(n);return r+='"',[r]}return this.args}_endsWith(t,r){return t.endsWith(r)}_isCmdFile(){let t=this.toolPath.toUpperCase();return this._endsWith(t,".CMD")||this._endsWith(t,".BAT")}_windowsQuoteCmdArg(t){if(!this._isCmdFile())return this._uvQuoteCmdArg(t);if(!t)return'""';let r=[" ","	","&","(",")","[","]","{","}","^","=",";","!","'","+",",","`","~","|","<",">",'"'],n=!1;for(let i of t)if(r.some(a=>a===i)){n=!0;break}if(!n)return t;let o='"',s=!0;for(let i=t.length;i>0;i--)o+=t[i-1],s&&t[i-1]==="\\"?o+="\\":t[i-1]==='"'?(s=!0,o+='"'):s=!1;return o+='"',o.split("").reverse().join("")}_uvQuoteCmdArg(t){if(!t)return'""';if(!t.includes(" ")&&!t.includes("	")&&!t.includes('"'))return t;if(!t.includes('"')&&!t.includes("\\"))return`"${t}"`;let r='"',n=!0;for(let o=t.length;o>0;o--)r+=t[o-1],n&&t[o-1]==="\\"?r+="\\":t[o-1]==='"'?(n=!0,r+="\\"):n=!1;return r+='"',r.split("").reverse().join("")}_cloneExecOptions(t){t=t||{};let r={cwd:t.cwd||process.cwd(),env:t.env||process.env,silent:t.silent||!1,windowsVerbatimArguments:t.windowsVerbatimArguments||!1,failOnStdErr:t.failOnStdErr||!1,ignoreReturnCode:t.ignoreReturnCode||!1,delay:t.delay||1e4};return r.outStream=t.outStream||process.stdout,r.errStream=t.errStream||process.stderr,r}_getSpawnOptions(t,r){t=t||{};let n={};return n.cwd=t.cwd,n.env=t.env,n.windowsVerbatimArguments=t.windowsVerbatimArguments||this._isCmdFile(),t.windowsVerbatimArguments&&(n.argv0=`"${r}"`),n}exec(){return su(this,void 0,void 0,function*(){return!iu.isRooted(this.toolPath)&&(this.toolPath.includes("/")||Os&&this.toolPath.includes("\\"))&&(this.toolPath=jb.resolve(process.cwd(),this.options.cwd||process.cwd(),this.toolPath)),this.toolPath=yield qb.which(this.toolPath,!0),new Promise((t,r)=>su(this,void 0,void 0,function*(){this._debug(`exec tool: ${this.toolPath}`),this._debug("arguments:");for(let d of this.args)this._debug(`   ${d}`);let n=this._cloneExecOptions(this.options);!n.silent&&n.outStream&&n.outStream.write(this._getCommandString(n)+Ps.EOL);let o=new oc(n,this.toolPath);if(o.on("debug",d=>{this._debug(d)}),this.options.cwd&&!(yield iu.exists(this.options.cwd)))return r(new Error(`The cwd: ${this.options.cwd} does not exist!`));let s=this._getSpawnFileName(),i=Ub.spawn(s,this._getSpawnArgs(n),this._getSpawnOptions(this.options,s)),a="";i.stdout&&i.stdout.on("data",d=>{this.options.listeners&&this.options.listeners.stdout&&this.options.listeners.stdout(d),!n.silent&&n.outStream&&n.outStream.write(d),a=this._processLineBuffer(d,a,l=>{this.options.listeners&&this.options.listeners.stdline&&this.options.listeners.stdline(l)})});let c="";if(i.stderr&&i.stderr.on("data",d=>{o.processStderr=!0,this.options.listeners&&this.options.listeners.stderr&&this.options.listeners.stderr(d),!n.silent&&n.errStream&&n.outStream&&(n.failOnStdErr?n.errStream:n.outStream).write(d),c=this._processLineBuffer(d,c,l=>{this.options.listeners&&this.options.listeners.errline&&this.options.listeners.errline(l)})}),i.on("error",d=>{o.processError=d.message,o.processExited=!0,o.processClosed=!0,o.CheckComplete()}),i.on("exit",d=>{o.processExitCode=d,o.processExited=!0,this._debug(`Exit code ${d} received from tool '${this.toolPath}'`),o.CheckComplete()}),i.on("close",d=>{o.processExitCode=d,o.processExited=!0,o.processClosed=!0,this._debug(`STDIO streams have closed for tool '${this.toolPath}'`),o.CheckComplete()}),o.on("done",(d,l)=>{a.length>0&&this.emit("stdline",a),c.length>0&&this.emit("errline",c),i.removeAllListeners(),d?r(d):t(l)}),this.options.input){if(!i.stdin)throw new Error("child process missing stdin");i.stdin.end(this.options.input)}}))})}};Ye.ToolRunner=nc;function Kb(e){let t=[],r=!1,n=!1,o="";function s(i){n&&i!=='"'&&(o+="\\"),o+=i,n=!1}for(let i=0;i<e.length;i++){let a=e.charAt(i);if(a==='"'){n?s(a):r=!r;continue}if(a==="\\"&&n){s(a);continue}if(a==="\\"&&r){n=!0;continue}if(a===" "&&!r){o.length>0&&(t.push(o),o="");continue}s(a)}return o.length>0&&t.push(o.trim()),t}Ye.argStringToArray=Kb;var oc=class e extends au.EventEmitter{constructor(t,r){if(super(),this.processClosed=!1,this.processError="",this.processExitCode=0,this.processExited=!1,this.processStderr=!1,this.delay=1e4,this.done=!1,this.timeout=null,!r)throw new Error("toolPath must not be empty");this.options=t,this.toolPath=r,t.delay&&(this.delay=t.delay)}CheckComplete(){this.done||(this.processClosed?this._setResult():this.processExited&&(this.timeout=Gb.setTimeout(e.HandleTimeout,this.delay,this)))}_debug(t){this.emit("debug",t)}_setResult(){let t;this.processExited&&(this.processError?t=new Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`):this.processExitCode!==0&&!this.options.ignoreReturnCode?t=new Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`):this.processStderr&&this.options.failOnStdErr&&(t=new Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`))),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.done=!0,this.emit("done",t,this.processExitCode)}static HandleTimeout(t){if(!t.done){if(!t.processClosed&&t.processExited){let r=`The STDIO streams did not close within ${t.delay/1e3} seconds of the exit event from process '${t.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;t._debug(r)}t._setResult()}}}});var sc=T(Xe=>{"use strict";var Hb=Xe&&Xe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Vb=Xe&&Xe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Wb=Xe&&Xe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Hb(t,e,r);return Vb(t,e),t},fu=Xe&&Xe.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.getExecOutput=Xe.exec=void 0;var du=I("string_decoder"),lu=Wb(cu());function uu(e,t,r){return fu(this,void 0,void 0,function*(){let n=lu.argStringToArray(e);if(n.length===0)throw new Error("Parameter 'commandLine' cannot be null or empty.");let o=n[0];return t=n.slice(1).concat(t||[]),new lu.ToolRunner(o,t,r).exec()})}Xe.exec=uu;function Yb(e,t,r){var n,o;return fu(this,void 0,void 0,function*(){let s="",i="",a=new du.StringDecoder("utf8"),c=new du.StringDecoder("utf8"),d=(n=r?.listeners)===null||n===void 0?void 0:n.stdout,l=(o=r?.listeners)===null||o===void 0?void 0:o.stderr,f=w=>{i+=c.write(w),l&&l(w)},u=w=>{s+=a.write(w),d&&d(w)},y=Object.assign(Object.assign({},r?.listeners),{stdout:u,stderr:f}),x=yield uu(e,t,Object.assign(Object.assign({},r),{listeners:y}));return s+=a.end(),i+=c.end(),{exitCode:x,stdout:s,stderr:i}})}Xe.getExecOutput=Yb});var mu=T(Dt=>{"use strict";var Xb=Dt&&Dt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Qb=Dt&&Dt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Jb=Dt&&Dt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Xb(t,e,r);return Qb(t,e),t};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.getOptions=void 0;var ic=Jb(Fn());function Zb(e){let t={followSymbolicLinks:!0,implicitDescendants:!0,omitBrokenSymbolicLinks:!0};return e&&(typeof e.followSymbolicLinks=="boolean"&&(t.followSymbolicLinks=e.followSymbolicLinks,ic.debug(`followSymbolicLinks '${t.followSymbolicLinks}'`)),typeof e.implicitDescendants=="boolean"&&(t.implicitDescendants=e.implicitDescendants,ic.debug(`implicitDescendants '${t.implicitDescendants}'`)),typeof e.omitBrokenSymbolicLinks=="boolean"&&(t.omitBrokenSymbolicLinks=e.omitBrokenSymbolicLinks,ic.debug(`omitBrokenSymbolicLinks '${t.omitBrokenSymbolicLinks}'`))),t}Dt.getOptions=Zb});var Ds=T(me=>{"use strict";var eS=me&&me.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),tS=me&&me.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),rS=me&&me.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&eS(t,e,r);return tS(t,e),t},nS=me&&me.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(me,"__esModule",{value:!0});me.safeTrimTrailingSeparator=me.normalizeSeparators=me.hasRoot=me.hasAbsoluteRoot=me.ensureAbsoluteRoot=me.dirname=void 0;var Is=rS(I("path")),En=nS(I("assert")),vr=process.platform==="win32";function oS(e){if(e=cc(e),vr&&/^\\\\[^\\]+(\\[^\\]+)?$/.test(e))return e;let t=Is.dirname(e);return vr&&/^\\\\[^\\]+\\[^\\]+\\$/.test(t)&&(t=cc(t)),t}me.dirname=oS;function sS(e,t){if(En.default(e,"ensureAbsoluteRoot parameter 'root' must not be empty"),En.default(t,"ensureAbsoluteRoot parameter 'itemPath' must not be empty"),ac(t))return t;if(vr){if(t.match(/^[A-Z]:[^\\/]|^[A-Z]:$/i)){let r=process.cwd();return En.default(r.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${r}'`),t[0].toUpperCase()===r[0].toUpperCase()?t.length===2?`${t[0]}:\\${r.substr(3)}`:(r.endsWith("\\")||(r+="\\"),`${t[0]}:\\${r.substr(3)}${t.substr(2)}`):`${t[0]}:\\${t.substr(2)}`}else if(xo(t).match(/^\\$|^\\[^\\]/)){let r=process.cwd();return En.default(r.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${r}'`),`${r[0]}:\\${t.substr(1)}`}}return En.default(ac(e),"ensureAbsoluteRoot parameter 'root' must have an absolute root"),e.endsWith("/")||vr&&e.endsWith("\\")||(e+=Is.sep),e+t}me.ensureAbsoluteRoot=sS;function ac(e){return En.default(e,"hasAbsoluteRoot parameter 'itemPath' must not be empty"),e=xo(e),vr?e.startsWith("\\\\")||/^[A-Z]:\\/i.test(e):e.startsWith("/")}me.hasAbsoluteRoot=ac;function iS(e){return En.default(e,"isRooted parameter 'itemPath' must not be empty"),e=xo(e),vr?e.startsWith("\\")||/^[A-Z]:/i.test(e):e.startsWith("/")}me.hasRoot=iS;function xo(e){return e=e||"",vr?(e=e.replace(/\//g,"\\"),(/^\\\\+[^\\]/.test(e)?"\\":"")+e.replace(/\\\\+/g,"\\")):e.replace(/\/\/+/g,"/")}me.normalizeSeparators=xo;function cc(e){return e?(e=xo(e),!e.endsWith(Is.sep)||e===Is.sep||vr&&/^[A-Z]:\\$/i.test(e)?e:e.substr(0,e.length-1)):""}me.safeTrimTrailingSeparator=cc});var Bs=T(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.MatchKind=void 0;var aS;(function(e){e[e.None=0]="None",e[e.Directory=1]="Directory",e[e.File=2]="File",e[e.All=3]="All"})(aS=wo.MatchKind||(wo.MatchKind={}))});var yu=T(Qe=>{"use strict";var cS=Qe&&Qe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),dS=Qe&&Qe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),lS=Qe&&Qe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&cS(t,e,r);return dS(t,e),t};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.partialMatch=Qe.match=Qe.getSearchPaths=void 0;var hu=lS(Ds()),fS=Bs(),pu=process.platform==="win32";function uS(e){e=e.filter(n=>!n.negate);let t={};for(let n of e){let o=pu?n.searchPath.toUpperCase():n.searchPath;t[o]="candidate"}let r=[];for(let n of e){let o=pu?n.searchPath.toUpperCase():n.searchPath;if(t[o]==="included")continue;let s=!1,i=o,a=hu.dirname(i);for(;a!==i;){if(t[a]){s=!0;break}i=a,a=hu.dirname(i)}s||(r.push(n.searchPath),t[o]="included")}return r}Qe.getSearchPaths=uS;function mS(e,t){let r=fS.MatchKind.None;for(let n of e)n.negate?r&=~n.match(t):r|=n.match(t);return r}Qe.match=mS;function hS(e,t){return e.some(r=>!r.negate&&r.partialMatch(t))}Qe.partialMatch=hS});var Eu=T((qO,gu)=>{"use strict";gu.exports=function(e,t){for(var r=[],n=0;n<e.length;n++){var o=t(e[n],n);pS(o)?r.push.apply(r,o):r.push(o)}return r};var pS=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}});var Su=T((GO,bu)=>{"use strict";bu.exports=xu;function xu(e,t,r){e instanceof RegExp&&(e=Cu(e,r)),t instanceof RegExp&&(t=Cu(t,r));var n=wu(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function Cu(e,t){var r=t.match(e);return r?r[0]:null}xu.range=wu;function wu(e,t,r){var n,o,s,i,a,c=r.indexOf(e),d=r.indexOf(t,c+1),l=c;if(c>=0&&d>0){if(e===t)return[c,d];for(n=[],s=r.length;l>=0&&!a;)l==c?(n.push(l),c=r.indexOf(e,l+1)):n.length==1?a=[n.pop(),d]:(o=n.pop(),o<s&&(s=o,i=d),d=r.indexOf(t,l+1)),l=c<d&&c>=0?c:d;n.length&&(a=[s,i])}return a}});var Pu=T((KO,Nu)=>{"use strict";var yS=Eu(),Au=Su();Nu.exports=CS;var _u="\0SLASH"+Math.random()+"\0",Ru="\0OPEN"+Math.random()+"\0",lc="\0CLOSE"+Math.random()+"\0",vu="\0COMMA"+Math.random()+"\0",Tu="\0PERIOD"+Math.random()+"\0";function dc(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function gS(e){return e.split("\\\\").join(_u).split("\\{").join(Ru).split("\\}").join(lc).split("\\,").join(vu).split("\\.").join(Tu)}function ES(e){return e.split(_u).join("\\").split(Ru).join("{").split(lc).join("}").split(vu).join(",").split(Tu).join(".")}function ku(e){if(!e)return[""];var t=[],r=Au("{","}",e);if(!r)return e.split(",");var n=r.pre,o=r.body,s=r.post,i=n.split(",");i[i.length-1]+="{"+o+"}";var a=ku(s);return s.length&&(i[i.length-1]+=a.shift(),i.push.apply(i,a)),t.push.apply(t,i),t}function CS(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),Un(gS(e),!0).map(ES)):[]}function xS(e){return"{"+e+"}"}function wS(e){return/^-?0\d/.test(e)}function bS(e,t){return e<=t}function SS(e,t){return e>=t}function Un(e,t){var r=[],n=Au("{","}",e);if(!n||/\$$/.test(n.pre))return[e];var o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),i=o||s,a=n.body.indexOf(",")>=0;if(!i&&!a)return n.post.match(/,.*\}/)?(e=n.pre+"{"+n.body+lc+n.post,Un(e)):[e];var c;if(i)c=n.body.split(/\.\./);else if(c=ku(n.body),c.length===1&&(c=Un(c[0],!1).map(xS),c.length===1)){var l=n.post.length?Un(n.post,!1):[""];return l.map(function(Ra){return n.pre+c[0]+Ra})}var d=n.pre,l=n.post.length?Un(n.post,!1):[""],f;if(i){var u=dc(c[0]),y=dc(c[1]),x=Math.max(c[0].length,c[1].length),w=c.length==3?Math.abs(dc(c[2])):1,A=bS,G=y<u;G&&(w*=-1,A=SS);var le=c.some(wS);f=[];for(var Ke=u;A(Ke,y);Ke+=w){var Be;if(s)Be=String.fromCharCode(Ke),Be==="\\"&&(Be="");else if(Be=String(Ke),le){var wr=x-Be.length;if(wr>0){var hs=new Array(wr+1).join("0");Ke<0?Be="-"+hs+Be.slice(1):Be=hs+Be}}f.push(Be)}}else f=yS(c,function(ps){return Un(ps,!1)});for(var On=0;On<f.length;On++)for(var yn=0;yn<l.length;yn++){var Zt=d+f[On]+l[yn];(!t||i||Zt)&&r.push(Zt)}return r}});var Lu=T((HO,Mu)=>{"use strict";Mu.exports=it;it.Minimatch=ke;var bo=function(){try{return I("path")}catch{}}()||{sep:"/"};it.sep=bo.sep;var mc=it.GLOBSTAR=ke.GLOBSTAR={},AS=Pu(),Ou={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},fc="[^/]",uc=fc+"*?",_S="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",RS="(?:(?!(?:\\/|^)\\.).)*?",Iu=vS("().*{}+?[]^$\\!");function vS(e){return e.split("").reduce(function(t,r){return t[r]=!0,t},{})}var Du=/\/+/;it.filter=TS;function TS(e,t){return t=t||{},function(r,n,o){return it(r,e,t)}}function Tr(e,t){t=t||{};var r={};return Object.keys(e).forEach(function(n){r[n]=e[n]}),Object.keys(t).forEach(function(n){r[n]=t[n]}),r}it.defaults=function(e){if(!e||typeof e!="object"||!Object.keys(e).length)return it;var t=it,r=function(o,s,i){return t(o,s,Tr(e,i))};return r.Minimatch=function(o,s){return new t.Minimatch(o,Tr(e,s))},r.Minimatch.defaults=function(o){return t.defaults(Tr(e,o)).Minimatch},r.filter=function(o,s){return t.filter(o,Tr(e,s))},r.defaults=function(o){return t.defaults(Tr(e,o))},r.makeRe=function(o,s){return t.makeRe(o,Tr(e,s))},r.braceExpand=function(o,s){return t.braceExpand(o,Tr(e,s))},r.match=function(n,o,s){return t.match(n,o,Tr(e,s))},r};ke.defaults=function(e){return it.defaults(e).Minimatch};function it(e,t,r){return Ls(t),r||(r={}),!r.nocomment&&t.charAt(0)==="#"?!1:new ke(t,r).match(e)}function ke(e,t){if(!(this instanceof ke))return new ke(e,t);Ls(e),t||(t={}),e=e.trim(),!t.allowWindowsEscape&&bo.sep!=="/"&&(e=e.split(bo.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}ke.prototype.debug=function(){};ke.prototype.make=kS;function kS(){var e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,r),r=this.globParts=r.map(function(n){return n.split(Du)}),this.debug(this.pattern,r),r=r.map(function(n,o,s){return n.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}ke.prototype.parseNegate=NS;function NS(){var e=this.pattern,t=!1,r=this.options,n=0;if(!r.nonegate){for(var o=0,s=e.length;o<s&&e.charAt(o)==="!";o++)t=!t,n++;n&&(this.pattern=e.substr(n)),this.negate=t}}it.braceExpand=function(e,t){return Bu(e,t)};ke.prototype.braceExpand=Bu;function Bu(e,t){return t||(this instanceof ke?t=this.options:t={}),e=typeof e>"u"?this.pattern:e,Ls(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:AS(e)}var PS=1024*64,Ls=function(e){if(typeof e!="string")throw new TypeError("invalid pattern");if(e.length>PS)throw new TypeError("pattern is too long")};ke.prototype.parse=OS;var Ms={};function OS(e,t){Ls(e);var r=this.options;if(e==="**")if(r.noglobstar)e="*";else return mc;if(e==="")return"";var n="",o=!!r.nocase,s=!1,i=[],a=[],c,d=!1,l=-1,f=-1,u=e.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",y=this;function x(){if(c){switch(c){case"*":n+=uc,o=!0;break;case"?":n+=fc,o=!0;break;default:n+="\\"+c;break}y.debug("clearStateChar %j %j",c,n),c=!1}}for(var w=0,A=e.length,G;w<A&&(G=e.charAt(w));w++){if(this.debug("%s	%s %s %j",e,w,n,G),s&&Iu[G]){n+="\\"+G,s=!1;continue}switch(G){case"/":return!1;case"\\":x(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,w,n,G),d){this.debug("  in class"),G==="!"&&w===f+1&&(G="^"),n+=G;continue}y.debug("call clearStateChar %j",c),x(),c=G,r.noext&&x();continue;case"(":if(d){n+="(";continue}if(!c){n+="\\(";continue}i.push({type:c,start:w-1,reStart:n.length,open:Ou[c].open,close:Ou[c].close}),n+=c==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",c,n),c=!1;continue;case")":if(d||!i.length){n+="\\)";continue}x(),o=!0;var le=i.pop();n+=le.close,le.type==="!"&&a.push(le),le.reEnd=n.length;continue;case"|":if(d||!i.length||s){n+="\\|",s=!1;continue}x(),n+="|";continue;case"[":if(x(),d){n+="\\"+G;continue}d=!0,f=w,l=n.length,n+=G;continue;case"]":if(w===f+1||!d){n+="\\"+G,s=!1;continue}var Ke=e.substring(f+1,w);try{RegExp("["+Ke+"]")}catch{var Be=this.parse(Ke,Ms);n=n.substr(0,l)+"\\["+Be[0]+"\\]",o=o||Be[1],d=!1;continue}o=!0,d=!1,n+=G;continue;default:x(),s?s=!1:Iu[G]&&!(G==="^"&&d)&&(n+="\\"),n+=G}}for(d&&(Ke=e.substr(f+1),Be=this.parse(Ke,Ms),n=n.substr(0,l)+"\\["+Be[0],o=o||Be[1]),le=i.pop();le;le=i.pop()){var wr=n.slice(le.reStart+le.open.length);this.debug("setting tail",n,le),wr=wr.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Xl,Ql,ka){return ka||(ka="\\"),Ql+Ql+ka+"|"}),this.debug(`tail=%j
   %s`,wr,wr,le,n);var hs=le.type==="*"?uc:le.type==="?"?fc:"\\"+le.type;o=!0,n=n.slice(0,le.reStart)+hs+"\\("+wr}x(),s&&(n+="\\\\");var On=!1;switch(n.charAt(0)){case"[":case".":case"(":On=!0}for(var yn=a.length-1;yn>-1;yn--){var Zt=a[yn],ps=n.slice(0,Zt.reStart),Ra=n.slice(Zt.reStart,Zt.reEnd-8),Wl=n.slice(Zt.reEnd-8,Zt.reEnd),po=n.slice(Zt.reEnd);Wl+=po;var Ux=ps.split("(").length-1,va=po;for(w=0;w<Ux;w++)va=va.replace(/\)[+*?]?/,"");po=va;var Yl="";po===""&&t!==Ms&&(Yl="$");var jx=ps+Ra+po+Yl+Wl;n=jx}if(n!==""&&o&&(n="(?=.)"+n),On&&(n=u+n),t===Ms)return[n,o];if(!o)return DS(e);var qx=r.nocase?"i":"";try{var Ta=new RegExp("^"+n+"$",qx)}catch{return new RegExp("$.")}return Ta._glob=e,Ta._src=n,Ta}it.makeRe=function(e,t){return new ke(e,t||{}).makeRe()};ke.prototype.makeRe=IS;function IS(){if(this.regexp||this.regexp===!1)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?uc:t.dot?_S:RS,n=t.nocase?"i":"",o=e.map(function(s){return s.map(function(i){return i===mc?r:typeof i=="string"?BS(i):i._src}).join("\\/")}).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,n)}catch{this.regexp=!1}return this.regexp}it.match=function(e,t,r){r=r||{};var n=new ke(t,r);return e=e.filter(function(o){return n.match(o)}),n.options.nonull&&!e.length&&e.push(t),e};ke.prototype.match=function(t,r){if(typeof r>"u"&&(r=this.partial),this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&r)return!0;var n=this.options;bo.sep!=="/"&&(t=t.split(bo.sep).join("/")),t=t.split(Du),this.debug(this.pattern,"split",t);var o=this.set;this.debug(this.pattern,"set",o);var s,i;for(i=t.length-1;i>=0&&(s=t[i],!s);i--);for(i=0;i<o.length;i++){var a=o[i],c=t;n.matchBase&&a.length===1&&(c=[s]);var d=this.matchOne(c,a,r);if(d)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate};ke.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,i=e.length,a=t.length;o<i&&s<a;o++,s++){this.debug("matchOne loop");var c=t[s],d=e[o];if(this.debug(t,c,d),c===!1)return!1;if(c===mc){this.debug("GLOBSTAR",[t,c,d]);var l=o,f=s+1;if(f===a){for(this.debug("** at the end");o<i;o++)if(e[o]==="."||e[o]===".."||!n.dot&&e[o].charAt(0)===".")return!1;return!0}for(;l<i;){var u=e[l];if(this.debug(`
globstar while`,e,l,t,f,u),this.matchOne(e.slice(l),t.slice(f),r))return this.debug("globstar found match!",l,i,u),!0;if(u==="."||u===".."||!n.dot&&u.charAt(0)==="."){this.debug("dot detected!",e,l,t,f);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,l,t,f),l===i))}var y;if(typeof c=="string"?(y=d===c,this.debug("string match",c,d,y)):(y=d.match(c),this.debug("pattern match",c,d,y)),!y)return!1}if(o===i&&s===a)return!0;if(o===i)return r;if(s===a)return o===i-1&&e[o]==="";throw new Error("wtf?")};function DS(e){return e.replace(/\\(.)/g,"$1")}function BS(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var zu=T(mt=>{"use strict";var MS=mt&&mt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),LS=mt&&mt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Fu=mt&&mt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&MS(t,e,r);return LS(t,e),t},FS=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mt,"__esModule",{value:!0});mt.Path=void 0;var So=Fu(I("path")),kr=Fu(Ds()),Ao=FS(I("assert")),zS=process.platform==="win32",hc=class{constructor(t){if(this.segments=[],typeof t=="string")if(Ao.default(t,"Parameter 'itemPath' must not be empty"),t=kr.safeTrimTrailingSeparator(t),!kr.hasRoot(t))this.segments=t.split(So.sep);else{let r=t,n=kr.dirname(r);for(;n!==r;){let o=So.basename(r);this.segments.unshift(o),r=n,n=kr.dirname(r)}this.segments.unshift(r)}else{Ao.default(t.length>0,"Parameter 'itemPath' must not be an empty array");for(let r=0;r<t.length;r++){let n=t[r];Ao.default(n,"Parameter 'itemPath' must not contain any empty segments"),n=kr.normalizeSeparators(t[r]),r===0&&kr.hasRoot(n)?(n=kr.safeTrimTrailingSeparator(n),Ao.default(n===kr.dirname(n),"Parameter 'itemPath' root segment contains information for multiple segments"),this.segments.push(n)):(Ao.default(!n.includes(So.sep),"Parameter 'itemPath' contains unexpected path separators"),this.segments.push(n))}}}toString(){let t=this.segments[0],r=t.endsWith(So.sep)||zS&&/^[A-Z]:$/i.test(t);for(let n=1;n<this.segments.length;n++)r?r=!1:t+=So.sep,t+=this.segments[n];return t}};mt.Path=hc});var $u=T(ht=>{"use strict";var $S=ht&&ht.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),US=ht&&ht.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),gc=ht&&ht.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&$S(t,e,r);return US(t,e),t},jS=ht&&ht.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ht,"__esModule",{value:!0});ht.Pattern=void 0;var qS=gc(I("os")),_o=gc(I("path")),Je=gc(Ds()),Cn=jS(I("assert")),GS=Lu(),pc=Bs(),Fs=zu(),rr=process.platform==="win32",yc=class e{constructor(t,r=!1,n,o){this.negate=!1;let s;if(typeof t=="string")s=t.trim();else{n=n||[],Cn.default(n.length,"Parameter 'segments' must not empty");let d=e.getLiteral(n[0]);Cn.default(d&&Je.hasAbsoluteRoot(d),"Parameter 'segments' first element must be a root path"),s=new Fs.Path(n).toString().trim(),t&&(s=`!${s}`)}for(;s.startsWith("!");)this.negate=!this.negate,s=s.substr(1).trim();s=e.fixupPattern(s,o),this.segments=new Fs.Path(s).segments,this.trailingSeparator=Je.normalizeSeparators(s).endsWith(_o.sep),s=Je.safeTrimTrailingSeparator(s);let i=!1,a=this.segments.map(d=>e.getLiteral(d)).filter(d=>!i&&!(i=d===""));this.searchPath=new Fs.Path(a).toString(),this.rootRegExp=new RegExp(e.regExpEscape(a[0]),rr?"i":""),this.isImplicitPattern=r;let c={dot:!0,nobrace:!0,nocase:rr,nocomment:!0,noext:!0,nonegate:!0};s=rr?s.replace(/\\/g,"/"):s,this.minimatch=new GS.Minimatch(s,c)}match(t){return this.segments[this.segments.length-1]==="**"?(t=Je.normalizeSeparators(t),!t.endsWith(_o.sep)&&this.isImplicitPattern===!1&&(t=`${t}${_o.sep}`)):t=Je.safeTrimTrailingSeparator(t),this.minimatch.match(t)?this.trailingSeparator?pc.MatchKind.Directory:pc.MatchKind.All:pc.MatchKind.None}partialMatch(t){return t=Je.safeTrimTrailingSeparator(t),Je.dirname(t)===t?this.rootRegExp.test(t):this.minimatch.matchOne(t.split(rr?/\\+/:/\/+/),this.minimatch.set[0],!0)}static globEscape(t){return(rr?t:t.replace(/\\/g,"\\\\")).replace(/(\[)(?=[^/]+\])/g,"[[]").replace(/\?/g,"[?]").replace(/\*/g,"[*]")}static fixupPattern(t,r){Cn.default(t,"pattern cannot be empty");let n=new Fs.Path(t).segments.map(o=>e.getLiteral(o));if(Cn.default(n.every((o,s)=>(o!=="."||s===0)&&o!==".."),`Invalid pattern '${t}'. Relative pathing '.' and '..' is not allowed.`),Cn.default(!Je.hasRoot(t)||n[0],`Invalid pattern '${t}'. Root segment must not contain globs.`),t=Je.normalizeSeparators(t),t==="."||t.startsWith(`.${_o.sep}`))t=e.globEscape(process.cwd())+t.substr(1);else if(t==="~"||t.startsWith(`~${_o.sep}`))r=r||qS.homedir(),Cn.default(r,"Unable to determine HOME directory"),Cn.default(Je.hasAbsoluteRoot(r),`Expected HOME directory to be a rooted path. Actual '${r}'`),t=e.globEscape(r)+t.substr(1);else if(rr&&(t.match(/^[A-Z]:$/i)||t.match(/^[A-Z]:[^\\]/i))){let o=Je.ensureAbsoluteRoot("C:\\dummy-root",t.substr(0,2));t.length>2&&!o.endsWith("\\")&&(o+="\\"),t=e.globEscape(o)+t.substr(2)}else if(rr&&(t==="\\"||t.match(/^\\[^\\]/))){let o=Je.ensureAbsoluteRoot("C:\\dummy-root","\\");o.endsWith("\\")||(o+="\\"),t=e.globEscape(o)+t.substr(1)}else t=Je.ensureAbsoluteRoot(e.globEscape(process.cwd()),t);return Je.normalizeSeparators(t)}static getLiteral(t){let r="";for(let n=0;n<t.length;n++){let o=t[n];if(o==="\\"&&!rr&&n+1<t.length){r+=t[++n];continue}else{if(o==="*"||o==="?")return"";if(o==="["&&n+1<t.length){let s="",i=-1;for(let a=n+1;a<t.length;a++){let c=t[a];if(c==="\\"&&!rr&&a+1<t.length){s+=t[++a];continue}else if(c==="]"){i=a;break}else s+=c}if(i>=0){if(s.length>1)return"";if(s){r+=s,n=i;continue}}}}r+=o}return r}static regExpEscape(t){return t.replace(/[[\\^$.|?*+()]/g,"\\$&")}};ht.Pattern=yc});var Uu=T(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.SearchState=void 0;var Ec=class{constructor(t,r){this.path=t,this.level=r}};zs.SearchState=Ec});var Hu=T(Ae=>{"use strict";var KS=Ae&&Ae.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),HS=Ae&&Ae.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),vo=Ae&&Ae.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&KS(t,e,r);return HS(t,e),t},Cc=Ae&&Ae.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})},VS=Ae&&Ae.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,c){i=e[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},i)}},Nr=Ae&&Ae.__await||function(e){return this instanceof Nr?(this.v=e,this):new Nr(e)},WS=Ae&&Ae.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o;function i(u){n[u]&&(o[u]=function(y){return new Promise(function(x,w){s.push([u,y,x,w])>1||a(u,y)})})}function a(u,y){try{c(n[u](y))}catch(x){f(s[0][3],x)}}function c(u){u.value instanceof Nr?Promise.resolve(u.value.v).then(d,l):f(s[0][2],u)}function d(u){a("next",u)}function l(u){a("throw",u)}function f(u,y){u(y),s.shift(),s.length&&a(s[0][0],s[0][1])}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.DefaultGlobber=void 0;var xc=vo(Fn()),Ro=vo(I("fs")),ju=vo(mu()),YS=vo(I("path")),$s=vo(yu()),qu=Bs(),Gu=$u(),Ku=Uu(),XS=process.platform==="win32",wc=class e{constructor(t){this.patterns=[],this.searchPaths=[],this.options=ju.getOptions(t)}getSearchPaths(){return this.searchPaths.slice()}glob(){var t,r;return Cc(this,void 0,void 0,function*(){let n=[];try{for(var o=VS(this.globGenerator()),s;s=yield o.next(),!s.done;){let i=s.value;n.push(i)}}catch(i){t={error:i}}finally{try{s&&!s.done&&(r=o.return)&&(yield r.call(o))}finally{if(t)throw t.error}}return n})}globGenerator(){return WS(this,arguments,function*(){let r=ju.getOptions(this.options),n=[];for(let i of this.patterns)n.push(i),r.implicitDescendants&&(i.trailingSeparator||i.segments[i.segments.length-1]!=="**")&&n.push(new Gu.Pattern(i.negate,!0,i.segments.concat("**")));let o=[];for(let i of $s.getSearchPaths(n)){xc.debug(`Search path '${i}'`);try{yield Nr(Ro.promises.lstat(i))}catch(a){if(a.code==="ENOENT")continue;throw a}o.unshift(new Ku.SearchState(i,1))}let s=[];for(;o.length;){let i=o.pop(),a=$s.match(n,i.path),c=!!a||$s.partialMatch(n,i.path);if(!a&&!c)continue;let d=yield Nr(e.stat(i,r,s));if(d)if(d.isDirectory()){if(a&qu.MatchKind.Directory)yield yield Nr(i.path);else if(!c)continue;let l=i.level+1,f=(yield Nr(Ro.promises.readdir(i.path))).map(u=>new Ku.SearchState(YS.join(i.path,u),l));o.push(...f.reverse())}else a&qu.MatchKind.File&&(yield yield Nr(i.path))}})}static create(t,r){return Cc(this,void 0,void 0,function*(){let n=new e(r);XS&&(t=t.replace(/\r\n/g,`
`),t=t.replace(/\r/g,`
`));let o=t.split(`
`).map(s=>s.trim());for(let s of o)!s||s.startsWith("#")||n.patterns.push(new Gu.Pattern(s));return n.searchPaths.push(...$s.getSearchPaths(n.patterns)),n})}static stat(t,r,n){return Cc(this,void 0,void 0,function*(){let o;if(r.followSymbolicLinks)try{o=yield Ro.promises.stat(t.path)}catch(s){if(s.code==="ENOENT"){if(r.omitBrokenSymbolicLinks){xc.debug(`Broken symlink '${t.path}'`);return}throw new Error(`No information found for the path '${t.path}'. This may indicate a broken symbolic link.`)}throw s}else o=yield Ro.promises.lstat(t.path);if(o.isDirectory()&&r.followSymbolicLinks){let s=yield Ro.promises.realpath(t.path);for(;n.length>=t.level;)n.pop();if(n.some(i=>i===s)){xc.debug(`Symlink cycle detected for path '${t.path}' and realpath '${s}'`);return}n.push(s)}return o})}};Ae.DefaultGlobber=wc});var Vu=T(jn=>{"use strict";var QS=jn&&jn.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(jn,"__esModule",{value:!0});jn.create=void 0;var JS=Hu();function ZS(e,t){return QS(this,void 0,void 0,function*(){return yield JS.DefaultGlobber.create(e,t)})}jn.create=ZS});var Zu=T((B,Ju)=>{"use strict";B=Ju.exports=z;var J;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?J=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:J=function(){};B.SEMVER_SPEC_VERSION="2.0.0";var To=256,Us=Number.MAX_SAFE_INTEGER||9007199254740991,bc=16,e0=To-6,qn=B.re=[],Q=B.safeRe=[],g=B.src=[],p=B.tokens={},Xu=0;function j(e){p[e]=Xu++}var Ac="[a-zA-Z0-9-]",Sc=[["\\s",1],["\\d",To],[Ac,e0]];function No(e){for(var t=0;t<Sc.length;t++){var r=Sc[t][0],n=Sc[t][1];e=e.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return e}j("NUMERICIDENTIFIER");g[p.NUMERICIDENTIFIER]="0|[1-9]\\d*";j("NUMERICIDENTIFIERLOOSE");g[p.NUMERICIDENTIFIERLOOSE]="\\d+";j("NONNUMERICIDENTIFIER");g[p.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-]"+Ac+"*";j("MAINVERSION");g[p.MAINVERSION]="("+g[p.NUMERICIDENTIFIER]+")\\.("+g[p.NUMERICIDENTIFIER]+")\\.("+g[p.NUMERICIDENTIFIER]+")";j("MAINVERSIONLOOSE");g[p.MAINVERSIONLOOSE]="("+g[p.NUMERICIDENTIFIERLOOSE]+")\\.("+g[p.NUMERICIDENTIFIERLOOSE]+")\\.("+g[p.NUMERICIDENTIFIERLOOSE]+")";j("PRERELEASEIDENTIFIER");g[p.PRERELEASEIDENTIFIER]="(?:"+g[p.NUMERICIDENTIFIER]+"|"+g[p.NONNUMERICIDENTIFIER]+")";j("PRERELEASEIDENTIFIERLOOSE");g[p.PRERELEASEIDENTIFIERLOOSE]="(?:"+g[p.NUMERICIDENTIFIERLOOSE]+"|"+g[p.NONNUMERICIDENTIFIER]+")";j("PRERELEASE");g[p.PRERELEASE]="(?:-("+g[p.PRERELEASEIDENTIFIER]+"(?:\\."+g[p.PRERELEASEIDENTIFIER]+")*))";j("PRERELEASELOOSE");g[p.PRERELEASELOOSE]="(?:-?("+g[p.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+g[p.PRERELEASEIDENTIFIERLOOSE]+")*))";j("BUILDIDENTIFIER");g[p.BUILDIDENTIFIER]=Ac+"+";j("BUILD");g[p.BUILD]="(?:\\+("+g[p.BUILDIDENTIFIER]+"(?:\\."+g[p.BUILDIDENTIFIER]+")*))";j("FULL");j("FULLPLAIN");g[p.FULLPLAIN]="v?"+g[p.MAINVERSION]+g[p.PRERELEASE]+"?"+g[p.BUILD]+"?";g[p.FULL]="^"+g[p.FULLPLAIN]+"$";j("LOOSEPLAIN");g[p.LOOSEPLAIN]="[v=\\s]*"+g[p.MAINVERSIONLOOSE]+g[p.PRERELEASELOOSE]+"?"+g[p.BUILD]+"?";j("LOOSE");g[p.LOOSE]="^"+g[p.LOOSEPLAIN]+"$";j("GTLT");g[p.GTLT]="((?:<|>)?=?)";j("XRANGEIDENTIFIERLOOSE");g[p.XRANGEIDENTIFIERLOOSE]=g[p.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*";j("XRANGEIDENTIFIER");g[p.XRANGEIDENTIFIER]=g[p.NUMERICIDENTIFIER]+"|x|X|\\*";j("XRANGEPLAIN");g[p.XRANGEPLAIN]="[v=\\s]*("+g[p.XRANGEIDENTIFIER]+")(?:\\.("+g[p.XRANGEIDENTIFIER]+")(?:\\.("+g[p.XRANGEIDENTIFIER]+")(?:"+g[p.PRERELEASE]+")?"+g[p.BUILD]+"?)?)?";j("XRANGEPLAINLOOSE");g[p.XRANGEPLAINLOOSE]="[v=\\s]*("+g[p.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+g[p.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+g[p.XRANGEIDENTIFIERLOOSE]+")(?:"+g[p.PRERELEASELOOSE]+")?"+g[p.BUILD]+"?)?)?";j("XRANGE");g[p.XRANGE]="^"+g[p.GTLT]+"\\s*"+g[p.XRANGEPLAIN]+"$";j("XRANGELOOSE");g[p.XRANGELOOSE]="^"+g[p.GTLT]+"\\s*"+g[p.XRANGEPLAINLOOSE]+"$";j("COERCE");g[p.COERCE]="(^|[^\\d])(\\d{1,"+bc+"})(?:\\.(\\d{1,"+bc+"}))?(?:\\.(\\d{1,"+bc+"}))?(?:$|[^\\d])";j("COERCERTL");qn[p.COERCERTL]=new RegExp(g[p.COERCE],"g");Q[p.COERCERTL]=new RegExp(No(g[p.COERCE]),"g");j("LONETILDE");g[p.LONETILDE]="(?:~>?)";j("TILDETRIM");g[p.TILDETRIM]="(\\s*)"+g[p.LONETILDE]+"\\s+";qn[p.TILDETRIM]=new RegExp(g[p.TILDETRIM],"g");Q[p.TILDETRIM]=new RegExp(No(g[p.TILDETRIM]),"g");var t0="$1~";j("TILDE");g[p.TILDE]="^"+g[p.LONETILDE]+g[p.XRANGEPLAIN]+"$";j("TILDELOOSE");g[p.TILDELOOSE]="^"+g[p.LONETILDE]+g[p.XRANGEPLAINLOOSE]+"$";j("LONECARET");g[p.LONECARET]="(?:\\^)";j("CARETTRIM");g[p.CARETTRIM]="(\\s*)"+g[p.LONECARET]+"\\s+";qn[p.CARETTRIM]=new RegExp(g[p.CARETTRIM],"g");Q[p.CARETTRIM]=new RegExp(No(g[p.CARETTRIM]),"g");var r0="$1^";j("CARET");g[p.CARET]="^"+g[p.LONECARET]+g[p.XRANGEPLAIN]+"$";j("CARETLOOSE");g[p.CARETLOOSE]="^"+g[p.LONECARET]+g[p.XRANGEPLAINLOOSE]+"$";j("COMPARATORLOOSE");g[p.COMPARATORLOOSE]="^"+g[p.GTLT]+"\\s*("+g[p.LOOSEPLAIN]+")$|^$";j("COMPARATOR");g[p.COMPARATOR]="^"+g[p.GTLT]+"\\s*("+g[p.FULLPLAIN]+")$|^$";j("COMPARATORTRIM");g[p.COMPARATORTRIM]="(\\s*)"+g[p.GTLT]+"\\s*("+g[p.LOOSEPLAIN]+"|"+g[p.XRANGEPLAIN]+")";qn[p.COMPARATORTRIM]=new RegExp(g[p.COMPARATORTRIM],"g");Q[p.COMPARATORTRIM]=new RegExp(No(g[p.COMPARATORTRIM]),"g");var n0="$1$2$3";j("HYPHENRANGE");g[p.HYPHENRANGE]="^\\s*("+g[p.XRANGEPLAIN]+")\\s+-\\s+("+g[p.XRANGEPLAIN]+")\\s*$";j("HYPHENRANGELOOSE");g[p.HYPHENRANGELOOSE]="^\\s*("+g[p.XRANGEPLAINLOOSE]+")\\s+-\\s+("+g[p.XRANGEPLAINLOOSE]+")\\s*$";j("STAR");g[p.STAR]="(<|>)?=?\\s*\\*";for(Bt=0;Bt<Xu;Bt++)J(Bt,g[Bt]),qn[Bt]||(qn[Bt]=new RegExp(g[Bt]),Q[Bt]=new RegExp(No(g[Bt])));var Bt;B.parse=wn;function wn(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof z)return e;if(typeof e!="string"||e.length>To)return null;var r=t.loose?Q[p.LOOSE]:Q[p.FULL];if(!r.test(e))return null;try{return new z(e,t)}catch{return null}}B.valid=o0;function o0(e,t){var r=wn(e,t);return r?r.version:null}B.clean=s0;function s0(e,t){var r=wn(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}B.SemVer=z;function z(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof z){if(e.loose===t.loose)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>To)throw new TypeError("version is longer than "+To+" characters");if(!(this instanceof z))return new z(e,t);J("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?Q[p.LOOSE]:Q[p.FULL]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Us||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Us||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Us||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var o=+n;if(o>=0&&o<Us)return o}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}z.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};z.prototype.toString=function(){return this.version};z.prototype.compare=function(e){return J("SemVer.compare",this.version,this.options,e),e instanceof z||(e=new z(e,this.options)),this.compareMain(e)||this.comparePre(e)};z.prototype.compareMain=function(e){return e instanceof z||(e=new z(e,this.options)),xn(this.major,e.major)||xn(this.minor,e.minor)||xn(this.patch,e.patch)};z.prototype.comparePre=function(e){if(e instanceof z||(e=new z(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(J("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return xn(r,n)}while(++t)};z.prototype.compareBuild=function(e){e instanceof z||(e=new z(e,this.options));var t=0;do{var r=this.build[t],n=e.build[t];if(J("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return xn(r,n)}while(++t)};z.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};B.inc=i0;function i0(e,t,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new z(e,r).inc(t,n).version}catch{return null}}B.diff=a0;function a0(e,t){if(_c(e,t))return null;var r=wn(e),n=wn(t),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var s="prerelease"}for(var i in r)if((i==="major"||i==="minor"||i==="patch")&&r[i]!==n[i])return o+i;return s}B.compareIdentifiers=xn;var Wu=/^[0-9]+$/;function xn(e,t){var r=Wu.test(e),n=Wu.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}B.rcompareIdentifiers=c0;function c0(e,t){return xn(t,e)}B.major=d0;function d0(e,t){return new z(e,t).major}B.minor=l0;function l0(e,t){return new z(e,t).minor}B.patch=f0;function f0(e,t){return new z(e,t).patch}B.compare=nr;function nr(e,t,r){return new z(e,r).compare(new z(t,r))}B.compareLoose=u0;function u0(e,t){return nr(e,t,!0)}B.compareBuild=m0;function m0(e,t,r){var n=new z(e,r),o=new z(t,r);return n.compare(o)||n.compareBuild(o)}B.rcompare=h0;function h0(e,t,r){return nr(t,e,r)}B.sort=p0;function p0(e,t){return e.sort(function(r,n){return B.compareBuild(r,n,t)})}B.rsort=y0;function y0(e,t){return e.sort(function(r,n){return B.compareBuild(n,r,t)})}B.gt=ko;function ko(e,t,r){return nr(e,t,r)>0}B.lt=js;function js(e,t,r){return nr(e,t,r)<0}B.eq=_c;function _c(e,t,r){return nr(e,t,r)===0}B.neq=Qu;function Qu(e,t,r){return nr(e,t,r)!==0}B.gte=Rc;function Rc(e,t,r){return nr(e,t,r)>=0}B.lte=vc;function vc(e,t,r){return nr(e,t,r)<=0}B.cmp=qs;function qs(e,t,r,n){switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return _c(e,r,n);case"!=":return Qu(e,r,n);case">":return ko(e,r,n);case">=":return Rc(e,r,n);case"<":return js(e,r,n);case"<=":return vc(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}B.Comparator=pt;function pt(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof pt){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof pt))return new pt(e,t);e=e.trim().split(/\s+/).join(" "),J("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Gn?this.value="":this.value=this.operator+this.semver.version,J("comp",this)}var Gn={};pt.prototype.parse=function(e){var t=this.options.loose?Q[p.COMPARATORLOOSE]:Q[p.COMPARATOR],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new z(r[2],this.options.loose):this.semver=Gn};pt.prototype.toString=function(){return this.value};pt.prototype.test=function(e){if(J("Comparator.test",e,this.options.loose),this.semver===Gn||e===Gn)return!0;if(typeof e=="string")try{e=new z(e,this.options)}catch{return!1}return qs(e,this.operator,this.semver,this.options)};pt.prototype.intersects=function(e,t){if(!(e instanceof pt))throw new TypeError("a Comparator is required");(!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1});var r;if(this.operator==="")return this.value===""?!0:(r=new fe(e.value,t),Gs(this.value,r,t));if(e.operator==="")return e.value===""?!0:(r=new fe(this.value,t),Gs(e.semver,r,t));var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),o=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),s=this.semver.version===e.semver.version,i=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=qs(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=qs(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||o||s&&i||a||c};B.Range=fe;function fe(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof fe)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new fe(e.raw,t);if(e instanceof pt)return new fe(e.value,t);if(!(this instanceof fe))return new fe(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}fe.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range};fe.prototype.toString=function(){return this.range};fe.prototype.parseRange=function(e){var t=this.options.loose,r=t?Q[p.HYPHENRANGELOOSE]:Q[p.HYPHENRANGE];e=e.replace(r,R0),J("hyphen replace",e),e=e.replace(Q[p.COMPARATORTRIM],n0),J("comparator trim",e,Q[p.COMPARATORTRIM]),e=e.replace(Q[p.TILDETRIM],t0),e=e.replace(Q[p.CARETTRIM],r0),e=e.split(/\s+/).join(" ");var n=t?Q[p.COMPARATORLOOSE]:Q[p.COMPARATOR],o=e.split(" ").map(function(s){return E0(s,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter(function(s){return!!s.match(n)})),o=o.map(function(s){return new pt(s,this.options)},this),o};fe.prototype.intersects=function(e,t){if(!(e instanceof fe))throw new TypeError("a Range is required");return this.set.some(function(r){return Yu(r,t)&&e.set.some(function(n){return Yu(n,t)&&r.every(function(o){return n.every(function(s){return o.intersects(s,t)})})})})};function Yu(e,t){for(var r=!0,n=e.slice(),o=n.pop();r&&n.length;)r=n.every(function(s){return o.intersects(s,t)}),o=n.pop();return r}B.toComparators=g0;function g0(e,t){return new fe(e,t).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function E0(e,t){return J("comp",e,t),e=w0(e,t),J("caret",e),e=C0(e,t),J("tildes",e),e=S0(e,t),J("xrange",e),e=_0(e,t),J("stars",e),e}function je(e){return!e||e.toLowerCase()==="x"||e==="*"}function C0(e,t){return e.trim().split(/\s+/).map(function(r){return x0(r,t)}).join(" ")}function x0(e,t){var r=t.loose?Q[p.TILDELOOSE]:Q[p.TILDE];return e.replace(r,function(n,o,s,i,a){J("tilde",e,n,o,s,i,a);var c;return je(o)?c="":je(s)?c=">="+o+".0.0 <"+(+o+1)+".0.0":je(i)?c=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0":a?(J("replaceTilde pr",a),c=">="+o+"."+s+"."+i+"-"+a+" <"+o+"."+(+s+1)+".0"):c=">="+o+"."+s+"."+i+" <"+o+"."+(+s+1)+".0",J("tilde return",c),c})}function w0(e,t){return e.trim().split(/\s+/).map(function(r){return b0(r,t)}).join(" ")}function b0(e,t){J("caret",e,t);var r=t.loose?Q[p.CARETLOOSE]:Q[p.CARET];return e.replace(r,function(n,o,s,i,a){J("caret",e,n,o,s,i,a);var c;return je(o)?c="":je(s)?c=">="+o+".0.0 <"+(+o+1)+".0.0":je(i)?o==="0"?c=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0":c=">="+o+"."+s+".0 <"+(+o+1)+".0.0":a?(J("replaceCaret pr",a),o==="0"?s==="0"?c=">="+o+"."+s+"."+i+"-"+a+" <"+o+"."+s+"."+(+i+1):c=">="+o+"."+s+"."+i+"-"+a+" <"+o+"."+(+s+1)+".0":c=">="+o+"."+s+"."+i+"-"+a+" <"+(+o+1)+".0.0"):(J("no pr"),o==="0"?s==="0"?c=">="+o+"."+s+"."+i+" <"+o+"."+s+"."+(+i+1):c=">="+o+"."+s+"."+i+" <"+o+"."+(+s+1)+".0":c=">="+o+"."+s+"."+i+" <"+(+o+1)+".0.0"),J("caret return",c),c})}function S0(e,t){return J("replaceXRanges",e,t),e.split(/\s+/).map(function(r){return A0(r,t)}).join(" ")}function A0(e,t){e=e.trim();var r=t.loose?Q[p.XRANGELOOSE]:Q[p.XRANGE];return e.replace(r,function(n,o,s,i,a,c){J("xRange",e,n,o,s,i,a,c);var d=je(s),l=d||je(i),f=l||je(a),u=f;return o==="="&&u&&(o=""),c=t.includePrerelease?"-0":"",d?o===">"||o==="<"?n="<0.0.0-0":n="*":o&&u?(l&&(i=0),a=0,o===">"?(o=">=",l?(s=+s+1,i=0,a=0):(i=+i+1,a=0)):o==="<="&&(o="<",l?s=+s+1:i=+i+1),n=o+s+"."+i+"."+a+c):l?n=">="+s+".0.0"+c+" <"+(+s+1)+".0.0"+c:f&&(n=">="+s+"."+i+".0"+c+" <"+s+"."+(+i+1)+".0"+c),J("xRange return",n),n})}function _0(e,t){return J("replaceStars",e,t),e.trim().replace(Q[p.STAR],"")}function R0(e,t,r,n,o,s,i,a,c,d,l,f,u){return je(r)?t="":je(n)?t=">="+r+".0.0":je(o)?t=">="+r+"."+n+".0":t=">="+t,je(c)?a="":je(d)?a="<"+(+c+1)+".0.0":je(l)?a="<"+c+"."+(+d+1)+".0":f?a="<="+c+"."+d+"."+l+"-"+f:a="<="+a,(t+" "+a).trim()}fe.prototype.test=function(e){if(!e)return!1;if(typeof e=="string")try{e=new z(e,this.options)}catch{return!1}for(var t=0;t<this.set.length;t++)if(v0(this.set[t],e,this.options))return!0;return!1};function v0(e,t,r){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++)if(J(e[n].semver),e[n].semver!==Gn&&e[n].semver.prerelease.length>0){var o=e[n].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}B.satisfies=Gs;function Gs(e,t,r){try{t=new fe(t,r)}catch{return!1}return t.test(e)}B.maxSatisfying=T0;function T0(e,t,r){var n=null,o=null;try{var s=new fe(t,r)}catch{return null}return e.forEach(function(i){s.test(i)&&(!n||o.compare(i)===-1)&&(n=i,o=new z(n,r))}),n}B.minSatisfying=k0;function k0(e,t,r){var n=null,o=null;try{var s=new fe(t,r)}catch{return null}return e.forEach(function(i){s.test(i)&&(!n||o.compare(i)===1)&&(n=i,o=new z(n,r))}),n}B.minVersion=N0;function N0(e,t){e=new fe(e,t);var r=new z("0.0.0");if(e.test(r)||(r=new z("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){var o=e.set[n];o.forEach(function(s){var i=new z(s.semver.version);switch(s.operator){case">":i.prerelease.length===0?i.patch++:i.prerelease.push(0),i.raw=i.format();case"":case">=":(!r||ko(r,i))&&(r=i);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+s.operator)}})}return r&&e.test(r)?r:null}B.validRange=P0;function P0(e,t){try{return new fe(e,t).range||"*"}catch{return null}}B.ltr=O0;function O0(e,t,r){return Tc(e,t,"<",r)}B.gtr=I0;function I0(e,t,r){return Tc(e,t,">",r)}B.outside=Tc;function Tc(e,t,r,n){e=new z(e,n),t=new fe(t,n);var o,s,i,a,c;switch(r){case">":o=ko,s=vc,i=js,a=">",c=">=";break;case"<":o=js,s=Rc,i=ko,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Gs(e,t,n))return!1;for(var d=0;d<t.set.length;++d){var l=t.set[d],f=null,u=null;if(l.forEach(function(y){y.semver===Gn&&(y=new pt(">=0.0.0")),f=f||y,u=u||y,o(y.semver,f.semver,n)?f=y:i(y.semver,u.semver,n)&&(u=y)}),f.operator===a||f.operator===c||(!u.operator||u.operator===a)&&s(e,u.semver))return!1;if(u.operator===c&&i(e,u.semver))return!1}return!0}B.prerelease=D0;function D0(e,t){var r=wn(e,t);return r&&r.prerelease.length?r.prerelease:null}B.intersects=B0;function B0(e,t,r){return e=new fe(e,r),t=new fe(t,r),e.intersects(t)}B.coerce=M0;function M0(e,t){if(e instanceof z)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};var r=null;if(!t.rtl)r=e.match(Q[p.COERCE]);else{for(var n;(n=Q[p.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Q[p.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Q[p.COERCERTL].lastIndex=-1}return r===null?null:wn(r[2]+"."+(r[3]||"0")+"."+(r[4]||"0"),t)}});var kc=T((JO,em)=>{"use strict";var L0=I("crypto");em.exports=function(){return L0.randomBytes(16)}});var Nc=T((ZO,rm)=>{"use strict";var tm=[];for(Po=0;Po<256;++Po)tm[Po]=(Po+256).toString(16).substr(1);var Po;function F0(e,t){var r=t||0,n=tm;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}rm.exports=F0});var sm=T((eI,om)=>{"use strict";var z0=kc(),$0=Nc(),nm,Pc,Oc=0,Ic=0;function U0(e,t,r){var n=t&&r||0,o=t||[];e=e||{};var s=e.node||nm,i=e.clockseq!==void 0?e.clockseq:Pc;if(s==null||i==null){var a=z0();s==null&&(s=nm=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),i==null&&(i=Pc=(a[6]<<8|a[7])&16383)}var c=e.msecs!==void 0?e.msecs:new Date().getTime(),d=e.nsecs!==void 0?e.nsecs:Ic+1,l=c-Oc+(d-Ic)/1e4;if(l<0&&e.clockseq===void 0&&(i=i+1&16383),(l<0||c>Oc)&&e.nsecs===void 0&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Oc=c,Ic=d,Pc=i,c+=122192928e5;var f=((c&268435455)*1e4+d)%4294967296;o[n++]=f>>>24&255,o[n++]=f>>>16&255,o[n++]=f>>>8&255,o[n++]=f&255;var u=c/4294967296*1e4&268435455;o[n++]=u>>>8&255,o[n++]=u&255,o[n++]=u>>>24&15|16,o[n++]=u>>>16&255,o[n++]=i>>>8|128,o[n++]=i&255;for(var y=0;y<6;++y)o[n+y]=s[y];return t||$0(o)}om.exports=U0});var am=T((tI,im)=>{"use strict";var j0=kc(),q0=Nc();function G0(e,t,r){var n=t&&r||0;typeof e=="string"&&(t=e==="binary"?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||j0)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t)for(var s=0;s<16;++s)t[n+s]=o[s];return t||q0(o)}im.exports=G0});var lm=T((rI,dm)=>{"use strict";var K0=sm(),cm=am(),Dc=cm;Dc.v1=K0;Dc.v4=cm;dm.exports=Dc});var Bc=T(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.ManifestFilename=oe.TarFilename=oe.SystemTarPathOnWindows=oe.GnuTarPathOnWindows=oe.SocketTimeout=oe.DefaultRetryDelay=oe.DefaultRetryAttempts=oe.ArchiveToolType=oe.CompressionMethod=oe.CacheFilename=void 0;var H0;(function(e){e.Gzip="cache.tgz",e.Zstd="cache.tzst"})(H0=oe.CacheFilename||(oe.CacheFilename={}));var V0;(function(e){e.Gzip="gzip",e.ZstdWithoutLong="zstd-without-long",e.Zstd="zstd"})(V0=oe.CompressionMethod||(oe.CompressionMethod={}));var W0;(function(e){e.GNU="gnu",e.BSD="bsd"})(W0=oe.ArchiveToolType||(oe.ArchiveToolType={}));oe.DefaultRetryAttempts=2;oe.DefaultRetryDelay=5e3;oe.SocketTimeout=5e3;oe.GnuTarPathOnWindows=`${process.env.PROGRAMFILES}\\Git\\usr\\bin\\tar.exe`;oe.SystemTarPathOnWindows=`${process.env.SYSTEMDRIVE}\\Windows\\System32\\tar.exe`;oe.TarFilename="cache.tar";oe.ManifestFilename="manifest.txt"});var Lc=T(Z=>{"use strict";var Y0=Z&&Z.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),X0=Z&&Z.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Pr=Z&&Z.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Y0(t,e,r);return X0(t,e),t},Kn=Z&&Z.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})},Q0=Z&&Z.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,c){i=e[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},i)}};Object.defineProperty(Z,"__esModule",{value:!0});Z.isGhes=Z.assertDefined=Z.getGnuTarPathOnWindows=Z.getCacheFileName=Z.getCompressionMethod=Z.unlinkFile=Z.resolvePaths=Z.getArchiveFileSizeInBytes=Z.createTempDirectory=void 0;var Oo=Pr(Fn()),J0=Pr(sc()),Z0=Pr(Vu()),fm=Pr(Ns()),Mc=Pr(I("fs")),Ks=Pr(I("path")),eA=Pr(Zu()),tA=Pr(I("util")),rA=lm(),bn=Bc();function nA(){return Kn(this,void 0,void 0,function*(){let e=process.platform==="win32",t=process.env.RUNNER_TEMP||"";if(!t){let n;e?n=process.env.USERPROFILE||"C:\\":process.platform==="darwin"?n="/Users":n="/home",t=Ks.join(n,"actions","temp")}let r=Ks.join(t,(0,rA.v4)());return yield fm.mkdirP(r),r})}Z.createTempDirectory=nA;function oA(e){return Mc.statSync(e).size}Z.getArchiveFileSizeInBytes=oA;function sA(e){var t,r,n,o,s;return Kn(this,void 0,void 0,function*(){let i=[],a=(s=process.env.GITHUB_WORKSPACE)!==null&&s!==void 0?s:process.cwd(),c=yield Z0.create(e.join(`
`),{implicitDescendants:!1});try{for(var d=!0,l=Q0(c.globGenerator()),f;f=yield l.next(),t=f.done,!t;){o=f.value,d=!1;try{let u=o,y=Ks.relative(a,u).replace(new RegExp(`\\${Ks.sep}`,"g"),"/");Oo.debug(`Matched: ${y}`),y===""?i.push("."):i.push(`${y}`)}finally{d=!0}}}catch(u){r={error:u}}finally{try{!d&&!t&&(n=l.return)&&(yield n.call(l))}finally{if(r)throw r.error}}return i})}Z.resolvePaths=sA;function iA(e){return Kn(this,void 0,void 0,function*(){return tA.promisify(Mc.unlink)(e)})}Z.unlinkFile=iA;function um(e,t=[]){return Kn(this,void 0,void 0,function*(){let r="";t.push("--version"),Oo.debug(`Checking ${e} ${t.join(" ")}`);try{yield J0.exec(`${e}`,t,{ignoreReturnCode:!0,silent:!0,listeners:{stdout:n=>r+=n.toString(),stderr:n=>r+=n.toString()}})}catch(n){Oo.debug(n.message)}return r=r.trim(),Oo.debug(r),r})}function aA(){return Kn(this,void 0,void 0,function*(){let e=yield um("zstd",["--quiet"]),t=eA.clean(e);return Oo.debug(`zstd version: ${t}`),e===""?bn.CompressionMethod.Gzip:bn.CompressionMethod.ZstdWithoutLong})}Z.getCompressionMethod=aA;function cA(e){return e===bn.CompressionMethod.Gzip?bn.CacheFilename.Gzip:bn.CacheFilename.Zstd}Z.getCacheFileName=cA;function dA(){return Kn(this,void 0,void 0,function*(){return Mc.existsSync(bn.GnuTarPathOnWindows)?bn.GnuTarPathOnWindows:(yield um("tar")).toLowerCase().includes("gnu tar")?fm.which("tar"):""})}Z.getGnuTarPathOnWindows=dA;function lA(e,t){if(t===void 0)throw Error(`Expected ${e} but value was undefiend`);return t}Z.assertDefined=lA;function fA(){return new URL(process.env.GITHUB_SERVER_URL||"https://github.com").hostname.toUpperCase()!=="GITHUB.COM"}Z.isGhes=fA});var pm=T(Me=>{"use strict";var uA=Me&&Me.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),mA=Me&&Me.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Fc=Me&&Me.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&uA(t,e,r);return mA(t,e),t},or=Me&&Me.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Me,"__esModule",{value:!0});Me.createTar=Me.extractTar=Me.listTar=void 0;var hA=sc(),Hs=Fc(Ns()),mm=I("fs"),Rt=Fc(I("path")),zc=Fc(Lc()),se=Bc(),Or=process.platform==="win32";function pA(){return or(this,void 0,void 0,function*(){switch(process.platform){case"win32":{let e=yield zc.getGnuTarPathOnWindows(),t=se.SystemTarPathOnWindows;if(e)return{path:e,type:se.ArchiveToolType.GNU};if((0,mm.existsSync)(t))return{path:t,type:se.ArchiveToolType.BSD};break}case"darwin":{let e=yield Hs.which("gtar",!1);return e?{path:e,type:se.ArchiveToolType.GNU}:{path:yield Hs.which("tar",!0),type:se.ArchiveToolType.BSD}}default:break}return{path:yield Hs.which("tar",!0),type:se.ArchiveToolType.GNU}})}function yA(e,t,r,n=""){return or(this,void 0,void 0,function*(){let o=[`"${e.path}"`],s=zc.getCacheFileName(t),i="cache.tar",a=hm(),c=e.type===se.ArchiveToolType.BSD&&t!==se.CompressionMethod.Gzip&&Or;switch(r){case"create":o.push("--posix","-cf",c?i:s.replace(new RegExp(`\\${Rt.sep}`,"g"),"/"),"--exclude",c?i:s.replace(new RegExp(`\\${Rt.sep}`,"g"),"/"),"-P","-C",a.replace(new RegExp(`\\${Rt.sep}`,"g"),"/"),"--files-from",se.ManifestFilename);break;case"extract":o.push("-xf",c?i:n.replace(new RegExp(`\\${Rt.sep}`,"g"),"/"),"-P","-C",a.replace(new RegExp(`\\${Rt.sep}`,"g"),"/"));break;case"list":o.push("-tf",c?i:n.replace(new RegExp(`\\${Rt.sep}`,"g"),"/"),"-P");break}if(e.type===se.ArchiveToolType.GNU)switch(process.platform){case"win32":o.push("--force-local");break;case"darwin":o.push("--delay-directory-restore");break}return o})}function $c(e,t,r=""){return or(this,void 0,void 0,function*(){let n,o=yield pA(),s=yield yA(o,e,t,r),i=t!=="create"?yield gA(o,e,r):yield EA(o,e),a=o.type===se.ArchiveToolType.BSD&&e!==se.CompressionMethod.Gzip&&Or;return a&&t!=="create"?n=[[...i].join(" "),[...s].join(" ")]:n=[[...s].join(" "),[...i].join(" ")],a?n:[n.join(" ")]})}function hm(){var e;return(e=process.env.GITHUB_WORKSPACE)!==null&&e!==void 0?e:process.cwd()}function gA(e,t,r){return or(this,void 0,void 0,function*(){let n=e.type===se.ArchiveToolType.BSD&&t!==se.CompressionMethod.Gzip&&Or;switch(t){case se.CompressionMethod.Zstd:return n?["zstd -d --long=30 --force -o",se.TarFilename,r.replace(new RegExp(`\\${Rt.sep}`,"g"),"/")]:["--use-compress-program",Or?'"zstd -d --long=30"':"unzstd --long=30"];case se.CompressionMethod.ZstdWithoutLong:return n?["zstd -d --force -o",se.TarFilename,r.replace(new RegExp(`\\${Rt.sep}`,"g"),"/")]:["--use-compress-program",Or?'"zstd -d"':"unzstd"];default:return["-z"]}})}function EA(e,t){return or(this,void 0,void 0,function*(){let r=zc.getCacheFileName(t),n=e.type===se.ArchiveToolType.BSD&&t!==se.CompressionMethod.Gzip&&Or;switch(t){case se.CompressionMethod.Zstd:return n?["zstd -T0 --long=30 --force -o",r.replace(new RegExp(`\\${Rt.sep}`,"g"),"/"),se.TarFilename]:["--use-compress-program",Or?'"zstd -T0 --long=30"':"zstdmt --long=30"];case se.CompressionMethod.ZstdWithoutLong:return n?["zstd -T0 --force -o",r.replace(new RegExp(`\\${Rt.sep}`,"g"),"/"),se.TarFilename]:["--use-compress-program",Or?'"zstd -T0"':"zstdmt"];default:return["-z"]}})}function Uc(e,t){return or(this,void 0,void 0,function*(){for(let r of e)try{yield(0,hA.exec)(r,void 0,{cwd:t,env:Object.assign(Object.assign({},process.env),{MSYS:"winsymlinks:nativestrict"})})}catch(n){throw new Error(`${r.split(" ")[0]} failed with error: ${n?.message}`)}})}function CA(e,t){return or(this,void 0,void 0,function*(){let r=yield $c(t,"list",e);yield Uc(r)})}Me.listTar=CA;function xA(e,t){return or(this,void 0,void 0,function*(){let r=hm();yield Hs.mkdirP(r);let n=yield $c(t,"extract",e);yield Uc(n)})}Me.extractTar=xA;function wA(e,t,r){return or(this,void 0,void 0,function*(){(0,mm.writeFileSync)(Rt.join(e,se.ManifestFilename),t.join(`
`));let n=yield $c(r,"create");yield Uc(n,e)})}Me.createTar=wA});var Do={};yo(Do,{__assign:()=>Vc,__asyncDelegator:()=>XA,__asyncGenerator:()=>YA,__asyncValues:()=>QA,__await:()=>Io,__awaiter:()=>qA,__classPrivateFieldGet:()=>t_,__classPrivateFieldSet:()=>r_,__createBinding:()=>KA,__decorate:()=>$A,__exportStar:()=>HA,__extends:()=>FA,__generator:()=>GA,__importDefault:()=>e_,__importStar:()=>ZA,__makeTemplateObject:()=>JA,__metadata:()=>jA,__param:()=>UA,__read:()=>bm,__rest:()=>zA,__spread:()=>VA,__spreadArrays:()=>WA,__values:()=>Wc});function FA(e,t){Hc(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function zA(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function $A(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function UA(e,t){return function(r,n){t(r,n,e)}}function jA(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function qA(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})}function GA(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(l){return c([d,l])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(l){d=[6,l],o=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function KA(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function HA(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function Wc(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function bm(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s}function VA(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(bm(arguments[t]));return e}function WA(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function Io(e){return this instanceof Io?(this.v=e,this):new Io(e)}function YA(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o;function i(u){n[u]&&(o[u]=function(y){return new Promise(function(x,w){s.push([u,y,x,w])>1||a(u,y)})})}function a(u,y){try{c(n[u](y))}catch(x){f(s[0][3],x)}}function c(u){u.value instanceof Io?Promise.resolve(u.value.v).then(d,l):f(s[0][2],u)}function d(u){a("next",u)}function l(u){a("throw",u)}function f(u,y){u(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function XA(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,s){t[o]=e[o]?function(i){return(r=!r)?{value:Io(e[o](i)),done:o==="return"}:s?s(i):i}:s}}function QA(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Wc=="function"?Wc(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,c){i=e[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},i)}}function JA(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function ZA(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function e_(e){return e&&e.__esModule?e:{default:e}}function t_(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function r_(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}var Hc,Vc,Bo=be(()=>{"use strict";Hc=function(e,t){return Hc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},Hc(e,t)};Vc=function(){return Vc=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Vc.apply(this,arguments)}});var Sm,Am,_m=be(()=>{"use strict";Sm=e=>{let t=[];for(let r=0,n=e.length;r<n;r++){let o=e.charCodeAt(r);if(o<128)t.push(o);else if(o<2048)t.push(o>>6|192,o&63|128);else if(r+1<e.length&&(o&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){let s=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else t.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(t)},Am=e=>{let t="";for(let r=0,n=e.length;r<n;r++){let o=e[r];if(o<128)t+=String.fromCharCode(o);else if(192<=o&&o<224){let s=e[++r];t+=String.fromCharCode((o&31)<<6|s&63)}else if(240<=o&&o<365){let i="%"+[o,e[++r],e[++r],e[++r]].map(a=>a.toString(16)).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((o&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t}});function Rm(e){return new TextEncoder().encode(e)}function vm(e){return new TextDecoder("utf-8").decode(e)}var Tm=be(()=>{"use strict"});var km={};yo(km,{fromUtf8:()=>n_,toUtf8:()=>o_});var n_,o_,Nm=be(()=>{"use strict";_m();Tm();n_=e=>typeof TextEncoder=="function"?Rm(e):Sm(e),o_=e=>typeof TextDecoder=="function"?vm(e):Am(e)});var Pm=T(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.convertToBuffer=void 0;var s_=(Nm(),In(km)),i_=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:s_.fromUtf8;function a_(e){return e instanceof Uint8Array?e:typeof e=="string"?i_(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}Ws.convertToBuffer=a_});var Om=T(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.isEmptyData=void 0;function c_(e){return typeof e=="string"?e.length===0:e.byteLength===0}Ys.isEmptyData=c_});var Im=T(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.numToUint8=void 0;function d_(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}Xs.numToUint8=d_});var Dm=T(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.uint32ArrayFrom=void 0;function l_(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}Qs.uint32ArrayFrom=l_});var Mo=T(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.uint32ArrayFrom=Mt.numToUint8=Mt.isEmptyData=Mt.convertToBuffer=void 0;var f_=Pm();Object.defineProperty(Mt,"convertToBuffer",{enumerable:!0,get:function(){return f_.convertToBuffer}});var u_=Om();Object.defineProperty(Mt,"isEmptyData",{enumerable:!0,get:function(){return u_.isEmptyData}});var m_=Im();Object.defineProperty(Mt,"numToUint8",{enumerable:!0,get:function(){return m_.numToUint8}});var h_=Dm();Object.defineProperty(Mt,"uint32ArrayFrom",{enumerable:!0,get:function(){return h_.uint32ArrayFrom}})});var Lm=T(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.AwsCrc32=void 0;var Bm=(Bo(),In(Do)),Yc=Mo(),Mm=Lo(),p_=function(){function e(){this.crc32=new Mm.Crc32}return e.prototype.update=function(t){(0,Yc.isEmptyData)(t)||this.crc32.update((0,Yc.convertToBuffer)(t))},e.prototype.digest=function(){return Bm.__awaiter(this,void 0,void 0,function(){return Bm.__generator(this,function(t){return[2,(0,Yc.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new Mm.Crc32},e}();Js.AwsCrc32=p_});var Lo=T(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.AwsCrc32=Lr.Crc32=Lr.crc32=void 0;var y_=(Bo(),In(Do)),g_=Mo();function E_(e){return new Fm().update(e).digest()}Lr.crc32=E_;var Fm=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=y_.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^x_[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();Lr.Crc32=Fm;var C_=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],x_=(0,g_.uint32ArrayFrom)(C_),w_=Lm();Object.defineProperty(Lr,"AwsCrc32",{enumerable:!0,get:function(){return w_.AwsCrc32}})});var zi=T(dr=>{"use strict";var Mp=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",ev=Mp+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Lp="["+Mp+"]["+ev+"]*",tv=new RegExp("^"+Lp+"$"),rv=function(e,t){let r=[],n=t.exec(e);for(;n;){let o=[];o.startIndex=t.lastIndex-n[0].length;let s=n.length;for(let i=0;i<s;i++)o.push(n[i]);r.push(o),n=t.exec(e)}return r},nv=function(e){let t=tv.exec(e);return!(t===null||typeof t>"u")};dr.isExist=function(e){return typeof e<"u"};dr.isEmptyObject=function(e){return Object.keys(e).length===0};dr.merge=function(e,t,r){if(t){let n=Object.keys(t),o=n.length;for(let s=0;s<o;s++)r==="strict"?e[n[s]]=[t[n[s]]]:e[n[s]]=t[n[s]]}};dr.getValue=function(e){return dr.isExist(e)?e:""};dr.isName=nv;dr.getAllMatches=rv;dr.nameRegexp=Lp});var Dd=T(jp=>{"use strict";var Id=zi(),ov={allowBooleanAttributes:!1,unpairedTags:[]};jp.validate=function(e,t){t=Object.assign({},ov,t);let r=[],n=!1,o=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=zp(e,s),s.err)return s}else if(e[s]==="<"){let i=s;if(s++,e[s]==="!"){s=$p(e,s);continue}else{let a=!1;e[s]==="/"&&(a=!0,s++);let c="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)c+=e[s];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),s--),!uv(c)){let f;return c.trim().length===0?f="Invalid space after '<'.":f="Tag '"+c+"' is an invalid name.",Ce("InvalidTag",f,ot(e,s))}let d=av(e,s);if(d===!1)return Ce("InvalidAttr","Attributes for '"+c+"' have open quote.",ot(e,s));let l=d.value;if(s=d.index,l[l.length-1]==="/"){let f=s-l.length;l=l.substring(0,l.length-1);let u=Up(l,t);if(u===!0)n=!0;else return Ce(u.err.code,u.err.msg,ot(e,f+u.err.line))}else if(a)if(d.tagClosed){if(l.trim().length>0)return Ce("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",ot(e,i));{let f=r.pop();if(c!==f.tagName){let u=ot(e,f.tagStartPos);return Ce("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+u.line+", col "+u.col+") instead of closing tag '"+c+"'.",ot(e,i))}r.length==0&&(o=!0)}}else return Ce("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",ot(e,s));else{let f=Up(l,t);if(f!==!0)return Ce(f.err.code,f.err.msg,ot(e,s-l.length+f.err.line));if(o===!0)return Ce("InvalidXml","Multiple possible root nodes found.",ot(e,s));t.unpairedTags.indexOf(c)!==-1||r.push({tagName:c,tagStartPos:i}),n=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=$p(e,s);continue}else if(e[s+1]==="?"){if(s=zp(e,++s),s.err)return s}else break;else if(e[s]==="&"){let f=lv(e,s);if(f==-1)return Ce("InvalidChar","char '&' is not expected.",ot(e,s));s=f}else if(o===!0&&!Fp(e[s]))return Ce("InvalidXml","Extra text at the end",ot(e,s));e[s]==="<"&&s--}}else{if(Fp(e[s]))continue;return Ce("InvalidChar","char '"+e[s]+"' is not expected.",ot(e,s))}if(n){if(r.length==1)return Ce("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",ot(e,r[0].tagStartPos));if(r.length>0)return Ce("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Ce("InvalidXml","Start tag expected.",1);return!0};function Fp(e){return e===" "||e==="	"||e===`
`||e==="\r"}function zp(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return Ce("InvalidXml","XML declaration allowed only at the start of the document.",ot(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function $p(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var sv='"',iv="'";function av(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if(e[t]===sv||e[t]===iv)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){o=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:o}}var cv=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Up(e,t){let r=Id.getAllMatches(e,cv),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return Ce("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",qo(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return Ce("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",qo(r[o]));if(r[o][3]===void 0&&!t.allowBooleanAttributes)return Ce("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",qo(r[o]));let s=r[o][2];if(!fv(s))return Ce("InvalidAttr","Attribute '"+s+"' is an invalid name.",qo(r[o]));if(!n.hasOwnProperty(s))n[s]=1;else return Ce("InvalidAttr","Attribute '"+s+"' is repeated.",qo(r[o]))}return!0}function dv(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function lv(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,dv(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function Ce(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function fv(e){return Id.isName(e)}function uv(e){return Id.isName(e)}function ot(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function qo(e){return e.startIndex+e[1].length}});var Gp=T(Bd=>{"use strict";var qp={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},mv=function(e){return Object.assign({},qp,e)};Bd.buildOptions=mv;Bd.defaultOptions=qp});var Hp=T((tq,Kp)=>{"use strict";var Md=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};Kp.exports=Md});var Wp=T((rq,Vp)=>{"use strict";var hv=zi();function pv(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,o=!1,s=!1,i="";for(;t<e.length;t++)if(e[t]==="<"&&!s){if(o&&Ev(e,t))t+=7,[entityName,val,t]=yv(e,t+1),val.indexOf("&")===-1&&(r[bv(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(o&&Cv(e,t))t+=8;else if(o&&xv(e,t))t+=8;else if(o&&wv(e,t))t+=9;else if(gv)s=!0;else throw new Error("Invalid DOCTYPE");n++,i=""}else if(e[t]===">"){if(s?e[t-1]==="-"&&e[t-2]==="-"&&(s=!1,n--):n--,n===0)break}else e[t]==="["?o=!0:i+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function yv(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=e[t++],o="";for(;t<e.length&&e[t]!==n;t++)o+=e[t];return[r,o,t]}function gv(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function Ev(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function Cv(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function xv(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function wv(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function bv(e){if(hv.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}Vp.exports=pv});var Xp=T((nq,Yp)=>{"use strict";var Sv=/^[-+]?0x[a-fA-F0-9]+$/,Av=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var _v={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Rv(e,t={}){if(t=Object.assign({},_v,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&Sv.test(r))return Number.parseInt(r,16);{let n=Av.exec(r);if(n){let o=n[1],s=n[2],i=vv(n[3]),a=n[4]||n[6];if(!t.leadingZeros&&s.length>0&&o&&r[2]!==".")return e;if(!t.leadingZeros&&s.length>0&&!o&&r[1]!==".")return e;{let c=Number(r),d=""+c;return d.search(/[eE]/)!==-1||a?t.eNotation?c:e:r.indexOf(".")!==-1?d==="0"&&i===""||d===i||o&&d==="-"+i?c:e:s?i===d||o+i===d?c:e:r===d||r===o+d?c:e}}else return e}}function vv(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}Yp.exports=Rv});var Jp=T((sq,Qp)=>{"use strict";var $d=zi(),Go=Hp(),Tv=Wp(),kv=Xp(),oq="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,$d.nameRegexp),Ld=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=Nv,this.parseXml=Bv,this.parseTextData=Pv,this.resolveNameSpace=Ov,this.buildAttributesMap=Dv,this.isItStopNode=zv,this.replaceEntitiesValue=Lv,this.readStopNodeData=Uv,this.saveTextToParentTag=Fv,this.addChild=Mv}};function Nv(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function Pv(e,t,r,n,o,s,i){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){i||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,o,s);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?zd(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?zd(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function Ov(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var Iv=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Dv(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){let n=$d.getAllMatches(e,Iv),o=n.length,s={};for(let i=0;i<o;i++){let a=this.resolveNameSpace(n[i][1]),c=n[i][4],d=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);let l=this.options.attributeValueProcessor(a,c,t);l==null?s[d]=c:typeof l!=typeof c||l!==c?s[d]=l:s[d]=zd(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let i={};return i[this.options.attributesGroupName]=s,i}return s}}var Bv=function(e){e=e.replace(/\r\n?/g,`
`);let t=new Go("!xml"),r=t,n="",o="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let a=kn(e,">",s,"Closing Tag is not closed."),c=e.substring(s+2,a).trim();if(this.options.removeNSPrefix){let f=c.indexOf(":");f!==-1&&(c=c.substr(f+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(n=this.saveTextToParentTag(n,r,o));let d=o.substring(o.lastIndexOf(".")+1);if(c&&this.options.unpairedTags.indexOf(c)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${c}>`);let l=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(l=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=o.lastIndexOf("."),o=o.substring(0,l),r=this.tagsNodeStack.pop(),n="",s=a}else if(e[s+1]==="?"){let a=Fd(e,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let c=new Go(a.tagName);c.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(c[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(r,c,o)}s=a.closeIndex+1}else if(e.substr(s+1,3)==="!--"){let a=kn(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){let c=e.substring(s+4,a-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}s=a}else if(e.substr(s+1,2)==="!D"){let a=Tv(e,s);this.docTypeEntities=a.entities,s=a.i}else if(e.substr(s+1,2)==="!["){let a=kn(e,"]]>",s,"CDATA is not closed.")-2,c=e.substring(s+9,a);if(n=this.saveTextToParentTag(n,r,o),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]);else{let d=this.parseTextData(c,r.tagname,o,!0,!1,!0);d==null&&(d=""),r.add(this.options.textNodeName,d)}s=a+2}else{let a=Fd(e,s,this.options.removeNSPrefix),c=a.tagName,d=a.tagExp,l=a.attrExpPresent,f=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1));let u=r;if(u&&this.options.unpairedTags.indexOf(u.tagname)!==-1&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),c!==t.tagname&&(o+=o?"."+c:c),this.isItStopNode(this.options.stopNodes,o,c)){let y="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)s=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)s=a.closeIndex;else{let w=this.readStopNodeData(e,c,f+1);if(!w)throw new Error(`Unexpected end of ${c}`);s=w.i,y=w.tagContent}let x=new Go(c);c!==d&&l&&(x[":@"]=this.buildAttributesMap(d,o,c)),y&&(y=this.parseTextData(y,c,o,!0,l,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),x.add(this.options.textNodeName,y),this.addChild(r,x,o)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),d=c):d=d.substr(0,d.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let y=new Go(c);c!==d&&l&&(y[":@"]=this.buildAttributesMap(d,o,c)),this.addChild(r,y,o),o=o.substr(0,o.lastIndexOf("."))}else{let y=new Go(c);this.tagsNodeStack.push(r),c!==d&&l&&(y[":@"]=this.buildAttributesMap(d,o,c)),this.addChild(r,y,o),r=y}n="",s=f}}else n+=e[s];return t.child};function Mv(e,t,r){let n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}var Lv=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function Fv(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function zv(e,t,r){let n="*."+r;for(let o in e){let s=e[o];if(n===s||t===s)return!0}return!1}function $v(e,t,r=">"){let n,o="";for(let s=t;s<e.length;s++){let i=e[s];if(n)i===n&&(n="");else if(i==='"'||i==="'")n=i;else if(i===r[0])if(r[1]){if(e[s+1]===r[1])return{data:o,index:s}}else return{data:o,index:s};else i==="	"&&(i=" ");o+=i}}function kn(e,t,r,n){let o=e.indexOf(t,r);if(o===-1)throw new Error(n);return o+t.length-1}function Fd(e,t,r,n=">"){let o=$v(e,t+1,n);if(!o)return;let s=o.data,i=o.index,a=s.search(/\s/),c=s,d=!0;if(a!==-1&&(c=s.substr(0,a).replace(/\s\s*$/,""),s=s.substr(a+1)),r){let l=c.indexOf(":");l!==-1&&(c=c.substr(l+1),d=c!==o.data.substr(l+1))}return{tagName:c,tagExp:s,closeIndex:i,attrExpPresent:d}}function Uv(e,t,r){let n=r,o=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=kn(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(o--,o===0))return{tagContent:e.substring(n,r),i:s};r=s}else if(e[r+1]==="?")r=kn(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=kn(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=kn(e,"]]>",r,"StopNode is not closed.")-2;else{let s=Fd(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,r=s.closeIndex)}}function zd(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:kv(e,r)}else return $d.isExist(e)?e:""}Qp.exports=Ld});var ty=T(ey=>{"use strict";function jv(e,t){return Zp(e,t)}function Zp(e,t,r){let n,o={};for(let s=0;s<e.length;s++){let i=e[s],a=qv(i),c="";if(r===void 0?c=a:c=r+"."+a,a===t.textNodeName)n===void 0?n=i[a]:n+=""+i[a];else{if(a===void 0)continue;if(i[a]){let d=Zp(i[a],t,c),l=Kv(d,t);i[":@"]?Gv(d,i[":@"],c,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(d)):t.isArray(a,c,l)?o[a]=[d]:o[a]=d}}}return typeof n=="string"?n.length>0&&(o[t.textNodeName]=n):n!==void 0&&(o[t.textNodeName]=n),o}function qv(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function Gv(e,t,r,n){if(t){let o=Object.keys(t),s=o.length;for(let i=0;i<s;i++){let a=o[i];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function Kv(e,t){let{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}ey.prettify=jv});var ny=T((aq,ry)=>{"use strict";var{buildOptions:Hv}=Gp(),Vv=Jp(),{prettify:Wv}=ty(),Yv=Dd(),Ud=class{constructor(t){this.externalEntities={},this.options=Hv(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=Yv.validate(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let n=new Vv(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(t);return this.options.preserveOrder||o===void 0?o:Wv(o,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};ry.exports=Ud});var cy=T((cq,ay)=>{"use strict";var Xv=`
`;function Qv(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=Xv),sy(e,t,"",r)}function sy(e,t,r,n){let o="",s=!1;for(let i=0;i<e.length;i++){let a=e[i],c=Jv(a),d="";if(r.length===0?d=c:d=`${r}.${c}`,c===t.textNodeName){let x=a[c];Zv(d,t)||(x=t.tagValueProcessor(c,x),x=iy(x,t)),s&&(o+=n),o+=x,s=!1;continue}else if(c===t.cdataPropName){s&&(o+=n),o+=`<![CDATA[${a[c][0][t.textNodeName]}]]>`,s=!1;continue}else if(c===t.commentPropName){o+=n+`<!--${a[c][0][t.textNodeName]}-->`,s=!0;continue}else if(c[0]==="?"){let x=oy(a[":@"],t),w=c==="?xml"?"":n,A=a[c][0][t.textNodeName];A=A.length!==0?" "+A:"",o+=w+`<${c}${A}${x}?>`,s=!0;continue}let l=n;l!==""&&(l+=t.indentBy);let f=oy(a[":@"],t),u=n+`<${c}${f}`,y=sy(a[c],t,d,l);t.unpairedTags.indexOf(c)!==-1?t.suppressUnpairedNode?o+=u+">":o+=u+"/>":(!y||y.length===0)&&t.suppressEmptyNode?o+=u+"/>":y&&y.endsWith(">")?o+=u+`>${y}${n}</${c}>`:(o+=u+">",y&&n!==""&&(y.includes("/>")||y.includes("</"))?o+=n+t.indentBy+y+n:o+=y,o+=`</${c}>`),s=!0}return o}function Jv(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function oy(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){let o=t.attributeValueProcessor(n,e[n]);o=iy(o,t),o===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${o}"`}return r}function Zv(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function iy(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}ay.exports=Qv});var ly=T((dq,dy)=>{"use strict";var eT=cy(),tT={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function rn(e){this.options=Object.assign({},tT,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=oT),this.processTextOrObjNode=rT,this.options.format?(this.indentate=nT,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}rn.prototype.build=function(e){return this.options.preserveOrder?eT(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};rn.prototype.j2x=function(e,t){let r="",n="";for(let o in e)if(!(typeof e[o]>"u"))if(e[o]===null)o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextValNode(e[o],o,"",t);else if(typeof e[o]!="object"){let s=this.isAttribute(o);if(s)r+=this.buildAttrPairStr(s,""+e[o]);else if(o===this.options.textNodeName){let i=this.options.tagValueProcessor(o,""+e[o]);n+=this.replaceEntitiesValue(i)}else n+=this.buildTextValNode(e[o],o,"",t)}else if(Array.isArray(e[o])){let s=e[o].length,i="";for(let a=0;a<s;a++){let c=e[o][a];typeof c>"u"||(c===null?o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar:typeof c=="object"?this.options.oneListGroup?i+=this.j2x(c,t+1).val:i+=this.processTextOrObjNode(c,o,t):i+=this.buildTextValNode(c,o,"",t))}this.options.oneListGroup&&(i=this.buildObjectNode(i,o,"",t)),n+=i}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let s=Object.keys(e[o]),i=s.length;for(let a=0;a<i;a++)r+=this.buildAttrPairStr(s[a],""+e[o][s[a]])}else n+=this.processTextOrObjNode(e[o],o,t);return{attrStr:r,val:n}};rn.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function rT(e,t,r){let n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}rn.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let o="</"+t+this.tagEndChar,s="";return t[0]==="?"&&(s="?",o=""),r&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+s+">"+e+o:this.options.commentPropName!==!1&&t===this.options.commentPropName&&s.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+s+this.tagEndChar+e+this.indentate(n)+o}};rn.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};rn.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let o=this.options.tagValueProcessor(t,e);return o=this.replaceEntitiesValue(o),o===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+o+"</"+t+this.tagEndChar}};rn.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function nT(e){return this.options.indentBy.repeat(e)}function oT(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}dy.exports=rn});var jd=T((lq,fy)=>{"use strict";var sT=Dd(),iT=ny(),aT=ly();fy.exports={XMLParser:iT,XMLValidator:sT,XMLBuilder:aT}});var kx=T(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.AwsCrc32c=void 0;var vx=(Bo(),In(Do)),Kl=Mo(),Tx=Hl(),wP=function(){function e(){this.crc32c=new Tx.Crc32c}return e.prototype.update=function(t){(0,Kl.isEmptyData)(t)||this.crc32c.update((0,Kl.convertToBuffer)(t))},e.prototype.digest=function(){return vx.__awaiter(this,void 0,void 0,function(){return vx.__generator(this,function(t){return[2,(0,Kl.numToUint8)(this.crc32c.digest())]})})},e.prototype.reset=function(){this.crc32c=new Tx.Crc32c},e}();ba.AwsCrc32c=wP});var Hl=T(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.AwsCrc32c=hn.Crc32c=hn.crc32c=void 0;var bP=(Bo(),In(Do)),SP=Mo();function AP(e){return new Nx().update(e).digest()}hn.crc32c=AP;var Nx=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=bP.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^RP[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();hn.Crc32c=Nx;var _P=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],RP=(0,SP.uint32ArrayFrom)(_P),vP=kx();Object.defineProperty(hn,"AwsCrc32c",{enumerable:!0,get:function(){return vP.AwsCrc32c}})});var ms=er(Lc(),1),$x=er(pm(),1),pn=er(Fn(),1);import NP from"node:fs/promises";import PP from"node:path";var jc;(function(e){e.HEADER="header",e.QUERY="query"})(jc||(jc={}));var Sn;(function(e){e.HTTP="http",e.HTTPS="https"})(Sn||(Sn={}));var Hn;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Hn||(Hn={}));var qc;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(qc||(qc={}));var Gc;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(Gc||(Gc={}));var K=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new e({...this,headers:{...this.headers}});return t.query&&(t.query=bA(t.query)),t}};function bA(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var vt=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function SA(e){return t=>async r=>{let{request:n}=r;return K.isInstance(n)&&n.body&&e.runtime==="node"&&(n.headers={...n.headers,Expect:"100-continue"}),t({...r,request:n})}}var AA={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},ym=e=>({applyToStack:t=>{t.add(SA(e),AA)}});var _A=e=>t=>async r=>{if(!K.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]="";else if(!n.headers.host){let s=n.hostname;n.port!=null&&(s+=`:${n.port}`),n.headers.host=s}return t(r)},RA={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Ir=e=>({applyToStack:t=>{t.add(_A(e),RA)}});var vA=()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:d}=a,l=c??t.inputFilterSensitiveLog,f=d??t.outputFilterSensitiveLog,{$metadata:u,...y}=n.output;return i?.info?.({clientName:o,commandName:s,input:l(r.input),output:f(y),metadata:u}),n}catch(n){let{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c}=a,d=c??t.inputFilterSensitiveLog;throw i?.error?.({clientName:o,commandName:s,input:d(r.input),error:n,metadata:n.$metadata}),n}},TA={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Dr=e=>({applyToStack:t=>{t.add(vA(),TA)}});var gm="X-Amzn-Trace-Id",kA="AWS_LAMBDA_FUNCTION_NAME",NA="_X_AMZN_TRACE_ID",PA=e=>t=>async r=>{let{request:n}=r;if(!K.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(gm))return t(r);let o=process.env[kA],s=process.env[NA],i=a=>typeof a=="string"&&a.length>0;return i(o)&&i(s)&&(n.headers[gm]=s),t({...r,request:n})},OA={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Br=e=>({applyToStack:t=>{t.add(PA(e),OA)}});var IA="content-length";function DA(){return(e,t)=>async r=>{let{request:n}=r;if(K.isInstance(n)&&!n.headers[IA]){let o="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof t?.logger?.warn=="function"?t.logger.warn(o):console.warn(o)}return e({...r})}}var BA={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},Em=e=>({applyToStack:t=>{t.add(DA(),BA)}});var Cm=e=>({...e,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1});var Kc=e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6;function MA(){return e=>async t=>{let{input:{Bucket:r}}=t;if(typeof r=="string"&&!Kc(r)&&r.indexOf("/")>=0){let n=new Error(`Bucket name shouldn't contain '/', received '${r}'`);throw n.name="InvalidBucketName",n}return e({...t})}}var LA={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},xm=e=>({applyToStack:t=>{t.add(MA(),LA)}});var yt=class e extends Error{constructor(t,r=!0){super(t),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,e.prototype)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}};var D=class e extends yt{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,e.prototype)}};var gt=class e extends yt{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,e.prototype)}};function Vs(...e){return()=>{let t=Promise.reject(new yt("No providers in chain"));for(let r of e)t=t.catch(n=>{if(n?.tryNextLink)return r();throw n});return t}}var wm=e=>()=>Promise.resolve(e);var Mr=(e,t,r)=>{let n,o,s,i=!1,a=async()=>{o||(o=e());try{n=await o,s=!0,i=!1}finally{o=void 0}return n};return t===void 0?async c=>((!s||c?.forceRefresh)&&(n=await a()),n):async c=>((!s||c?.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await a(),n))};var Vm=er(Lo());var zm={},Xc={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),zm[e]=t,Xc[t]=e}function $m(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in Xc)t[r/2]=Xc[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function Ne(e){let t="";for(let r=0;r<e.byteLength;r++)t+=zm[e[r]];return t}var Vn=class e{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&Um(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&Um(t),parseInt(Ne(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function Um(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var Wn=class{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let s of Object.keys(t)){let i=this.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=this.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let d=new Uint8Array(c.buffer);return d.set(a,3),d;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(Vn.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!N_.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let f=new Uint8Array(17);return f[0]=9,f.set($m(t.value.replace(/\-/g,"")),1),f}}parse(t){let r={},n=0;for(;n<t.byteLength;){let o=t.getUint8(n++),s=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,o));switch(n+=o,t.getUint8(n++)){case 0:r[s]={type:qm,value:!0};break;case 1:r[s]={type:qm,value:!1};break;case 2:r[s]={type:b_,value:t.getInt8(n++)};break;case 3:r[s]={type:S_,value:t.getInt16(n,!1)},n+=2;break;case 4:r[s]={type:A_,value:t.getInt32(n,!1)},n+=4;break;case 5:r[s]={type:__,value:new Vn(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let i=t.getUint16(n,!1);n+=2,r[s]={type:R_,value:new Uint8Array(t.buffer,t.byteOffset+n,i)},n+=i;break;case 7:let a=t.getUint16(n,!1);n+=2,r[s]={type:v_,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[s]={type:T_,value:new Date(new Vn(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let c=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[s]={type:k_,value:`${Ne(c.subarray(0,4))}-${Ne(c.subarray(4,6))}-${Ne(c.subarray(6,8))}-${Ne(c.subarray(8,10))}-${Ne(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},jm;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(jm||(jm={}));var qm="boolean",b_="byte",S_="short",A_="integer",__="long",R_="binary",v_="string",T_="timestamp",k_="uuid",N_=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var Gm=er(Lo()),Km=4,Fr=Km*2,An=4,P_=Fr+An*2;function Hm({byteLength:e,byteOffset:t,buffer:r}){if(e<P_)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),o=n.getUint32(0,!1);if(e!==o)throw new Error("Reported message length does not match received message length");let s=n.getUint32(Km,!1),i=n.getUint32(Fr,!1),a=n.getUint32(e-An,!1),c=new Gm.Crc32().update(new Uint8Array(r,t,Fr));if(i!==c.digest())throw new Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(r,t+Fr,e-(Fr+An))),a!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+Fr+An,s),body:new Uint8Array(r,t+Fr+An+s,o-s-(Fr+An+An))}}var Zs=class{constructor(t,r){this.headerMarshaller=new Wn(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){let t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){let t=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){let n=this.headerMarshaller.format(t),o=n.byteLength+r.byteLength+16,s=new Uint8Array(o),i=new DataView(s.buffer,s.byteOffset,s.byteLength),a=new Vm.Crc32;return i.setUint32(0,o,!1),i.setUint32(4,n.byteLength,!1),i.setUint32(8,a.update(s.subarray(0,8)).digest(),!1),s.set(n,12),s.set(r,n.byteLength+12),i.setUint32(o-4,a.update(s.subarray(8,o-4)).digest(),!1),s}decode(t){let{headers:r,body:n}=Hm(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}};var ei=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}};var ti=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}};var ri=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}};var ni=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}};var Pe=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var Yn=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";import{Buffer as Qc}from"buffer";var sr=(e,t=0,r=e.byteLength-t)=>{if(!Yn(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Qc.from(e,t,r)},Xn=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Qc.from(e,t):Qc.from(e)};var Ze=e=>{let t=Xn(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var et=e=>typeof e=="string"?Ze(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var Et=e=>sr(e.buffer,e.byteOffset,e.byteLength).toString("utf8");var Wm="X-Amz-Algorithm",Ym="X-Amz-Credential",Jc="X-Amz-Date",Xm="X-Amz-SignedHeaders",Qm="X-Amz-Expires",Zc="X-Amz-Signature",ed="X-Amz-Security-Token";var td="authorization",rd=Jc.toLowerCase(),O_="date",Jm=[td,rd,O_],Zm=Zc.toLowerCase(),Fo="x-amz-content-sha256",eh=ed.toLowerCase();var th={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},rh=/^proxy-/,nh=/^sec-/;var oi="AWS4-HMAC-SHA256";var oh="AWS4-HMAC-SHA256-PAYLOAD",sh="UNSIGNED-PAYLOAD",ih=50,nd="aws4_request",ah=60*60*24*7;var si={},od=[],ii=(e,t,r)=>`${e}/${t}/${r}/${nd}`,dh=async(e,t,r,n,o)=>{let s=await ch(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${o}:${Ne(s)}:${t.sessionToken}`;if(i in si)return si[i];for(od.push(i);od.length>ih;)delete si[od.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,n,o,nd])a=await ch(e,a,c);return si[i]=a};var ch=(e,t,r)=>{let n=new e(t);return n.update(et(r)),n.digest()};var ai=({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let s=o.toLowerCase();(s in th||t?.has(s)||rh.test(s)||nh.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[o].trim().replace(/\s+/g," "))}return n};var Lt=e=>encodeURIComponent(e).replace(/[!'()*]/g,I_),I_=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var sd=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e).sort()){if(n.toLowerCase()===Zm)continue;t.push(n);let o=e[n];typeof o=="string"?r[n]=`${Lt(n)}=${Lt(o)}`:Array.isArray(o)&&(r[n]=o.slice(0).reduce((s,i)=>s.concat([`${Lt(n)}=${Lt(i)}`]),[]).sort().join("&"))}return t.map(n=>r[n]).filter(n=>n).join("&")};var zo=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===Fo)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||Yn(t)){let n=new r;return n.update(et(t)),Ne(await n.digest())}return sh};var lh=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1};var ci=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?D_(t):void 0}),D_=e=>Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{});var id=(e,t={})=>{let{headers:r,query:n={}}=typeof e.clone=="function"?e.clone():ci(e);for(let o of Object.keys(r)){let s=o.toLowerCase();s.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(s)&&(n[o]=r[o],delete r[o])}return{...e,headers:r,query:n}};var di=e=>{e=typeof e.clone=="function"?e.clone():ci(e);for(let t of Object.keys(e.headers))Jm.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};var fh=e=>B_(e).toISOString().replace(/\.\d{3}Z$/,"Z"),B_=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var _n=class{constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){this.headerMarshaller=new Wn(Et,Ze),this.service=o,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=Pe(n),this.credentialProvider=Pe(r)}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:a,signingRegion:c,signingService:d}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);let f=c??await this.regionProvider(),{longDate:u,shortDate:y}=li(n);if(o>ah)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let x=ii(y,f,d??this.service),w=id(di(t),{unhoistableHeaders:i});l.sessionToken&&(w.query[ed]=l.sessionToken),w.query[Wm]=oi,w.query[Ym]=`${l.accessKeyId}/${x}`,w.query[Jc]=u,w.query[Qm]=o.toString(10);let A=ai(w,s,a);return w.query[Xm]=uh(A),w.query[Zc]=await this.getSignature(u,x,this.getSigningKey(l,f,y,d),this.createCanonicalRequest(w,A,await zo(t,this.sha256))),w}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:s,signingService:i}){let a=s??await this.regionProvider(),{shortDate:c,longDate:d}=li(n),l=ii(c,a,i??this.service),f=await zo({headers:{},body:r},this.sha256),u=new this.sha256;u.update(t);let y=Ne(await u.digest()),x=[oh,d,l,o,y,f].join(`
`);return this.signString(x,{signingDate:n,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerMarshaller.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let i=n??await this.regionProvider(),{shortDate:a}=li(r),c=new this.sha256(await this.getSigningKey(s,i,a,o));return c.update(et(t)),Ne(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:s,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=s??await this.regionProvider(),d=di(t),{longDate:l,shortDate:f}=li(r),u=ii(f,c,i??this.service);d.headers[rd]=l,a.sessionToken&&(d.headers[eh]=a.sessionToken);let y=await zo(d,this.sha256);!lh(Fo,d.headers)&&this.applyChecksum&&(d.headers[Fo]=y);let x=ai(d,o,n),w=await this.getSignature(l,u,this.getSigningKey(a,c,f,i),this.createCanonicalRequest(d,x,y));return d.headers[td]=`${oi} Credential=${a.accessKeyId}/${u}, SignedHeaders=${uh(x)}, Signature=${w}`,d}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${sd(t)}
${o.map(s=>`${s}:${r[s]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n){let o=new this.sha256;o.update(et(n));let s=await o.digest();return`${oi}
${t}
${r}
${Ne(s)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))s?.length!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,o){let s=await this.createStringToSign(t,r,o),i=new this.sha256(await n);return i.update(et(s)),Ne(await i.digest())}getSigningKey(t,r,n,o){return dh(this.sha256,t,n,r,o||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},li=e=>{let t=fh(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},uh=e=>Object.keys(e).sort().join(";");var M_=3e5,fi=e=>{let t=e.credentials?L_(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:r=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:o}=e,s;return e.signer?s=Pe(e.signer):e.regionInfoProvider?s=()=>Pe(e.region)().then(async i=>[await e.regionInfoProvider(i,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},i]).then(([i,a])=>{let{signingRegion:c,signingService:d}=i;e.signingRegion=e.signingRegion||c||a,e.signingName=e.signingName||d||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},f=e.signerConstructor||_n;return new f(l)}):s=async i=>{i=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Pe(e.region)(),properties:{}},i);let a=i.signingRegion,c=i.signingName;e.signingRegion=e.signingRegion||a,e.signingName=e.signingName||c||e.serviceId;let d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},l=e.signerConstructor||_n;return new l(d)},{...e,systemClockOffset:n,signingEscapePath:r,credentials:t,signer:s}};var L_=e=>typeof e=="function"?Mr(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<M_,t=>t.expiration!==void 0):Pe(e);var ui=e=>new Date(Date.now()+e);var mh=(e,t)=>Math.abs(ui(t).getTime()-e)>=3e5;var ad=(e,t)=>{let r=Date.parse(e);return mh(r,t)?r-Date.now():t};var F_=e=>(t,r)=>async function(n){if(!K.isInstance(n.request))return t(n);let o=r.endpointV2?.properties?.authSchemes?.[0],s=o?.name==="sigv4a"?o?.signingRegionSet?.join(","):void 0,i=await e.signer(o),a=await t({...n,request:await i.sign(n.request,{signingDate:ui(e.systemClockOffset),signingRegion:s||r.signing_region,signingService:r.signing_service})}).catch(d=>{let l=d.ServerTime??hh(d.$response);throw l&&(e.systemClockOffset=ad(l,e.systemClockOffset)),d}),c=hh(a.response);return c&&(e.systemClockOffset=ad(c,e.systemClockOffset)),a},hh=e=>vt.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,z_={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},mi=e=>({applyToStack:t=>{t.addRelativeTo(F_(e),z_)}});function zr(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}var cd={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"};var ph=cd,yh="",U_=e=>{let{partitions:t}=ph;for(let n of t){let{regions:o,outputs:s}=n;for(let[i,a]of Object.entries(o))if(i===e)return{...s,...a}}for(let n of t){let{regionRegex:o,outputs:s}=n;if(new RegExp(o).test(e))return{...s}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},gh=(e,t="")=>{ph=e,yh=t},j_=()=>{gh(cd,"")},dd=()=>yh;var q_=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),hi=e=>q_.test(e)||e.startsWith("[")&&e.endsWith("]");var ir="endpoints";function Ct(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Ct(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Ct).join(", ")})`:JSON.stringify(e,null,2)}var ie=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var md={};yo(md,{aws:()=>ld,booleanEquals:()=>H_,getAttr:()=>fd,isSet:()=>V_,isValidHostLabel:()=>pi,not:()=>W_,parseURL:()=>Y_,stringEquals:()=>X_,substring:()=>Q_,uriEncode:()=>J_});var ld={};yo(ld,{getUserAgentPrefix:()=>dd,isVirtualHostableS3Bucket:()=>Eh,parseArn:()=>K_,partition:()=>U_,setPartitionInfo:()=>gh,useDefaultPartitionInfo:()=>j_});var G_=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),pi=(e,t=!1)=>{if(!t)return G_.test(e);let r=e.split(".");for(let n of r)if(!pi(n))return!1;return!0};var Eh=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!Eh(r))return!1;return!0}return!(!pi(e)||e.length<3||e.length>63||e!==e.toLowerCase()||hi(e))};var K_=e=>{let t=e.split(":");if(t.length<6)return null;let[r,n,o,s,i,...a]=t;return r!=="arn"||n===""||o===""||a[0]===""?null:{partition:n,service:o,region:s,accountId:i,resourceId:a[0].includes("/")?a[0].split("/"):a}};var H_=(e,t)=>e===t;var Ch=e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new ie(`Path: '${e}' does not end with ']'`);let s=n.slice(o+1,-1);if(Number.isNaN(parseInt(s)))throw new ie(`Invalid array index: '${s}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(s)}else r.push(n)}return r};var fd=(e,t)=>Ch(t).reduce((r,n)=>{if(typeof r!="object")throw new ie(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e);var V_=e=>e!=null;var W_=e=>!e;var xh;(function(e){e.AAAA="AAAA",e.A="A"})(xh||(xh={}));var ud={[Sn.HTTP]:80,[Sn.HTTPS]:443},Y_=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:u,port:y,protocol:x="",path:w="",query:A={}}=e,G=new URL(`${x}//${u}${y?`:${y}`:""}${w}`);return G.search=Object.entries(A).map(([le,Ke])=>`${le}=${Ke}`).join("&"),G}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:o,pathname:s,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(Sn).includes(c))return null;let d=hi(o),l=r.includes(`${n}:${ud[c]}`)||typeof e=="string"&&e.includes(`${n}:${ud[c]}`),f=`${n}${l?`:${ud[c]}`:""}`;return{scheme:c,authority:f,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:d}};var X_=(e,t)=>e===t;var Q_=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r);var J_=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var yi=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let s=e.indexOf("{",o);if(s===-1){r.push(e.slice(o));break}r.push(e.slice(o,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),o=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[c,d]=a.split("#");r.push(fd(n[c],d))}else r.push(n[a]);o=i+1}return r.join("")};var wh=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var $r=(e,t,r)=>{if(typeof e=="string")return yi(e,r);if(e.fn)return gi(e,r);if(e.ref)return wh(e,r);throw new ie(`'${t}': ${String(e)} is not a string, function or reference.`)};var gi=({fn:e,argv:t},r)=>{let n=t.map(o=>["boolean","number"].includes(typeof o)?o:$r(o,"arg",r));return e.split(".").reduce((o,s)=>o[s],md)(...n)};var bh=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new ie(`'${e}' is already defined in Reference Record.`);let n=gi(t,r);return r.logger?.debug?.(ir,`evaluateCondition: ${Ct(t)} = ${Ct(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}};var Qn=(e=[],t)=>{let r={};for(let n of e){let{result:o,toAssign:s}=bh(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!o)return{result:o};s&&(r[s.name]=s.value,t.logger?.debug?.(ir,`assign: ${s.name} := ${Ct(s.value)}`))}return{result:!0,referenceRecord:r}};var Sh=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(s=>{let i=$r(s,"Header value entry",t);if(typeof i!="string")throw new ie(`Header '${n}' value '${i}' is not a string`);return i})}),{});var hd=(e,t)=>{if(Array.isArray(e))return e.map(r=>hd(r,t));switch(typeof e){case"string":return yi(e,t);case"object":if(e===null)throw new ie(`Unexpected endpoint property: ${e}`);return Ei(e,t);case"boolean":return e;default:throw new ie(`Unexpected endpoint property type: ${typeof e}`)}};var Ei=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:hd(o,t)}),{});var Ah=(e,t)=>{let r=$r(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new ie(`Endpoint URL must be a string, got ${typeof r}`)};var _h=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:s}=Qn(r,t);if(!o)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:c,headers:d}=n;return t.logger?.debug?.(ir,`Resolving endpoint from template: ${Ct(n)}`),{...d!=null&&{headers:Sh(d,i)},...c!=null&&{properties:Ei(c,i)},url:Ah(a,i)}};var Rh=(e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:s}=Qn(r,t);if(o)throw new ie($r(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))};var vh=(e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:s}=Qn(r,t);if(o)return Ci(n,{...t,referenceRecord:{...t.referenceRecord,...s}})};var Ci=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=_h(r,t);if(n)return n}else if(r.type==="error")Rh(r,t);else if(r.type==="tree"){let n=vh(r,t);if(n)return n}else throw new ie(`Unknown endpoint rule: ${r}`);throw new ie("Rules evaluation failed")};var Ur=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:o,rules:s}=e;t.logger?.debug?.(`${ir} Initial EndpointParams: ${Ct(r)}`);let i=Object.entries(o).filter(([,d])=>d.default!=null).map(([d,l])=>[d,l.default]);if(i.length>0)for(let[d,l]of i)r[d]=r[d]??l;let a=Object.entries(o).filter(([,d])=>d.required).map(([d])=>d);for(let d of a)if(r[d]==null)throw new ie(`Missing required parameter: '${d}'`);let c=Ci(s,{endpointParams:r,logger:n,referenceRecord:{}});if(t.endpointParams?.Endpoint)try{let d=new URL(t.endpointParams.Endpoint),{protocol:l,port:f}=d;c.url.protocol=l,c.url.port=f}catch{}return t.logger?.debug?.(`${ir} Resolved endpoint: ${Ct(c)}`),c};var pd="user-agent",xi="x-amz-user-agent",yd=" ",wi="/",Th=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,kh=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,gd="-";var Z_=e=>(t,r)=>async n=>{let{request:o}=n;if(!K.isInstance(o))return t(n);let{headers:s}=o,i=r?.userAgent?.map(Ed)||[],a=(await e.defaultUserAgentProvider()).map(Ed),c=e?.customUserAgent?.map(Ed)||[],d=dd(),l=(d?[d]:[]).concat([...a,...i,...c]).join(yd),f=[...a.filter(u=>u.startsWith("aws-sdk-")),...c].join(yd);return e.runtime!=="browser"?(f&&(s[xi]=s[xi]?`${s[pd]} ${f}`:f),s[pd]=l):s[xi]=l,t({...n,request:o})},Ed=e=>{let t=e[0].split(wi).map(i=>i.replace(Th,gd)).join(wi),r=e[1]?.replace(kh,gd),n=t.indexOf(wi),o=t.substring(0,n),s=t.substring(n+1);return o==="api"&&(s=s.toLowerCase()),[o,s,r].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},eR={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},jr=e=>({applyToStack:t=>{t.add(Z_(e),eR)}});var xt;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(xt||(xt={}));var Ft=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var tR="AWS_USE_DUALSTACK_ENDPOINT",rR="use_dualstack_endpoint";var qr={environmentVariableSelector:e=>Ft(e,tR,xt.ENV),configFileSelector:e=>Ft(e,rR,xt.CONFIG),default:!1};var nR="AWS_USE_FIPS_ENDPOINT",oR="use_fips_endpoint";var Gr={environmentVariableSelector:e=>Ft(e,nR,xt.ENV),configFileSelector:e=>Ft(e,oR,xt.CONFIG),default:!1};var sR="AWS_REGION",iR="region",zt={environmentVariableSelector:e=>e[sR],configFileSelector:e=>e[iR],default:()=>{throw new Error("Region is missing")}},Kr={preferredFile:"credentials"};var bi=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var Cd=e=>bi(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var Hr=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Cd(t);let n=await t();return Cd(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return bi(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};var Nh=e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)});var Ph="content-length";function aR(e){return t=>async r=>{let n=r.request;if(K.isInstance(n)){let{body:o,headers:s}=n;if(o&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(Ph)===-1)try{let i=e(o);n.headers={...n.headers,[Ph]:String(i)}}catch{}}return t({...r,request:n})}}var cR={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Vr=e=>({applyToStack:t=>{t.add(aR(e.bodyLengthChecker),cR)}});var Oh=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),mR(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!uR(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},dR=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,lR=/(\d+\.){3}\d+/,fR=/\.\./;var uR=e=>dR.test(e)&&!lR.test(e)&&!fR.test(e),mR=e=>{let[t,r,n,o,s,i]=e.split(":"),a=t==="arn"&&e.split(":").length>=6,c=[t,r,n,s,i].filter(Boolean).length===5;if(a&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!r&&!!n&&!!s&&!!i};var Ih=(e,t,r)=>{let n=async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o};return e==="endpoint"||t==="endpoint"?async()=>{let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:s,hostname:i,port:a,path:c}=o;return`${s}//${i}${a?":"+a:""}${c}`}}return o}:n};var Dh=async(e,t,r,n)=>{let o=await hR(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},hR=async(e,t,r)=>{let n={},o=t?.getEndpointParameterInstructions?.()||{};for(let[s,i]of Object.entries(o))switch(i.type){case"staticContextParams":n[s]=i.value;break;case"contextParams":n[s]=e[i.name];break;case"clientContextParams":case"builtInParams":n[s]=await Ih(i.name,s,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await Oh(n),n};function Bh(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}var tt=e=>{if(typeof e=="string")return tt(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:s}=e,i;return s&&(i=Bh(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:i}};var Mh=e=>typeof e=="object"?"url"in e?tt(e.url):e:tt(e);var Lh=({config:e,instructions:t})=>(r,n)=>async o=>{let s=await Dh(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=s.properties?.authSchemes;let i=n.authSchemes?.[0];return i&&(n.signing_region=i.signingRegion,n.signing_service=i.signingName),r({...o})};var Fh=(e,t)=>(r,n)=>async o=>{let{response:s}=await r(o);try{let i=await t(s,e);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+a}throw i}};var zh=(e,t)=>(r,n)=>async o=>{let s=n.endpointV2?.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let i=await t(o.input,{...e,endpoint:s});return r({...o,request:i})};var pR={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},xd={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function rt(e,t,r){return{applyToStack:n=>{n.add(Fh(e,r),pR),n.add(zh(e,t),xd)}}}var yR={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:xd.name},nt=(e,t)=>({applyToStack:r=>{r.addRelativeTo(Lh({config:e,instructions:t}),yR)}});var Wr=e=>{let t=e.tls??!0,{endpoint:r}=e,n=r!=null?async()=>Mh(await Pe(r)()):void 0;return{...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:Pe(e.useDualstackEndpoint??!1),useFipsEndpoint:Pe(e.useFipsEndpoint??!1)}};var Tt;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(Tt||(Tt={}));var Rn=3,$t=Tt.STANDARD;var $h=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Uh=["TimeoutError","RequestTimeout","RequestTimeoutException"],jh=[500,502,503,504],qh=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"];var Jn=e=>e.$metadata?.httpStatusCode===429||$h.includes(e.name)||e.$retryable?.throttling==!0,Si=e=>Uh.includes(e.name)||qh.includes(e?.code||"")||jh.includes(e.$metadata?.httpStatusCode||0),Gh=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Si(e)}return!1};var $o=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),Jn(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};var Ai="amz-sdk-invocation-id",_i="amz-sdk-request";var Kh=()=>{let e=100;return{computeNextBackoffDelay:n=>Math.floor(Math.min(2e4,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}};var wd=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r});var vn=class{constructor(t){this.maxAttempts=t,this.mode=Tt.STANDARD,this.capacity=500,this.retryBackoffStrategy=Kh(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return wd({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?500:100);let s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,a=this.getCapacityCost(o);return this.capacity-=a,wd({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(500,this.capacity+(t.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Rn}`),Rn}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?10:5}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var vi=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=Tt.ADAPTIVE;let{rateLimiter:n}=r??{};this.rateLimiter=n??new $o,this.standardRetryStrategy=new vn(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var Sd=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var Xh="AWS_MAX_ATTEMPTS",Qh="max_attempts",Yr={environmentVariableSelector:e=>{let t=e[Xh];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${Xh} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[Qh];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${Qh} mast be a number, got "${t}"`);return r},default:Rn},Xr=e=>{let{retryStrategy:t}=e,r=Pe(e.maxAttempts??Rn);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await Pe(e.retryMode)()===Tt.ADAPTIVE?new vi(r):new vn(r))}},gR="AWS_RETRY_MODE",ER="retry_mode",Qr={environmentVariableSelector:e=>e[gR],configFileSelector:e=>e[ER],default:$t};La();var CR=e=>(t,r)=>async n=>{let o=await e.retryStrategy(),s=await e.maxAttempts();if(xR(o)){o=o;let i=await o.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,d=0,{request:l}=n;for(K.isInstance(l)&&(l.headers[Ai]=bs());;)try{K.isInstance(l)&&(l.headers[_i]=`attempt=${c+1}; max=${s}`);let{response:f,output:u}=await t(n);return o.recordSuccess(i),u.$metadata.attempts=c+1,u.$metadata.totalRetryDelay=d,{response:f,output:u}}catch(f){let u=wR(f);a=Sd(f);try{i=await o.refreshRetryTokenForRetry(i,u)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=d,a}c=i.getRetryCount();let y=i.getRetryDelay();d+=y,await new Promise(x=>setTimeout(x,y))}}else return o=o,o?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},xR=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",wR=e=>{let t={errorType:bR(e)},r=AR(e.$response);return r&&(t.retryAfterHint=r),t},bR=e=>Jn(e)?"THROTTLING":Si(e)?"TRANSIENT":Gh(e)?"SERVER_ERROR":"CLIENT_ERROR",SR={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Jr=e=>({applyToStack:t=>{t.add(CR(e),SR)}}),AR=e=>{if(!vt.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};var Ut=class{trace(){}debug(){}info(){}warn(){}error(){}};var eo=()=>{let e=[],t=[],r=new Set,n=l=>l.sort((f,u)=>Jh[u.step]-Jh[f.step]||Zh[u.priority||"normal"]-Zh[f.priority||"normal"]),o=l=>{let f=!1,u=y=>y.name&&y.name===l?(f=!0,r.delete(l),!1):!0;return e=e.filter(u),t=t.filter(u),f},s=l=>{let f=!1,u=y=>y.middleware===l?(f=!0,y.name&&r.delete(y.name),!1):!0;return e=e.filter(u),t=t.filter(u),f},i=l=>(e.forEach(f=>{l.add(f.middleware,{...f})}),t.forEach(f=>{l.addRelativeTo(f.middleware,{...f})}),l),a=l=>{let f=[];return l.before.forEach(u=>{u.before.length===0&&u.after.length===0?f.push(u):f.push(...a(u))}),f.push(l),l.after.reverse().forEach(u=>{u.before.length===0&&u.after.length===0?f.push(u):f.push(...a(u))}),f},c=(l=!1)=>{let f=[],u=[],y={};return e.forEach(w=>{let A={...w,before:[],after:[]};A.name&&(y[A.name]=A),f.push(A)}),t.forEach(w=>{let A={...w,before:[],after:[]};A.name&&(y[A.name]=A),u.push(A)}),u.forEach(w=>{if(w.toMiddleware){let A=y[w.toMiddleware];if(A===void 0){if(l)return;throw new Error(`${w.toMiddleware} is not found when adding ${w.name||"anonymous"} middleware ${w.relation} ${w.toMiddleware}`)}w.relation==="after"&&A.after.push(w),w.relation==="before"&&A.before.push(w)}}),n(f).map(a).reduce((w,A)=>(w.push(...A),w),[])},d={add:(l,f={})=>{let{name:u,override:y}=f,x={step:"initialize",priority:"normal",middleware:l,...f};if(u){if(r.has(u)){if(!y)throw new Error(`Duplicate middleware name '${u}'`);let w=e.findIndex(G=>G.name===u),A=e[w];if(A.step!==x.step||A.priority!==x.priority)throw new Error(`"${u}" middleware with ${A.priority} priority in ${A.step} step cannot be overridden by same-name middleware with ${x.priority} priority in ${x.step} step.`);e.splice(w,1)}r.add(u)}e.push(x)},addRelativeTo:(l,f)=>{let{name:u,override:y}=f,x={middleware:l,...f};if(u){if(r.has(u)){if(!y)throw new Error(`Duplicate middleware name '${u}'`);let w=t.findIndex(G=>G.name===u),A=t[w];if(A.toMiddleware!==x.toMiddleware||A.relation!==x.relation)throw new Error(`"${u}" middleware ${A.relation} "${A.toMiddleware}" middleware cannot be overridden by same-name middleware ${x.relation} "${x.toMiddleware}" middleware.`);t.splice(w,1)}r.add(u)}t.push(x)},clone:()=>i(eo()),use:l=>{l.applyToStack(d)},remove:l=>typeof l=="string"?o(l):s(l),removeByTag:l=>{let f=!1,u=y=>{let{tags:x,name:w}=y;return x&&x.includes(l)?(w&&r.delete(w),f=!0,!1):!0};return e=e.filter(u),t=t.filter(u),f},concat:l=>{let f=i(eo());return f.use(l),f},applyToStack:i,identify:()=>c(!0).map(l=>l.name+": "+(l.tags||[]).join(",")),resolve:(l,f)=>{for(let u of c().map(y=>y.middleware).reverse())l=u(l,f);return l}};return d},Jh={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Zh={high:3,normal:2,low:1};var jt=class{constructor(t){this.middlewareStack=eo(),this.config=t}send(t,r,n){let o=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,i=t.resolveMiddleware(this.middlewareStack,this.config,o);if(s)i(t).then(a=>s(null,a.output),a=>s(a)).catch(()=>{});else return i(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var _R=/^[A-Za-z0-9+/]*={0,2}$/,qt=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!_R.exec(e))throw new TypeError("Invalid base64 string.");let t=Xn(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var Gt=e=>sr(e.buffer,e.byteOffset,e.byteLength).toString("base64");function ep(e,t="utf-8"){return t==="base64"?Gt(e):Et(e)}function tp(e,t){return t==="base64"?ar.mutate(qt(e)):ar.mutate(Ze(e))}var ar=class e extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return tp(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return ep(this,t)}};import{Readable as RR}from"stream";var rp=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:o,checksumLocationName:s,streamHasher:i}=t,a=r!==void 0&&o!==void 0&&s!==void 0&&i!==void 0,c=a?i(o,e):void 0,d=new RR({read:()=>{}});return e.on("data",l=>{let f=n(l)||0;d.push(`${f.toString(16)}\r
`),d.push(l),d.push(`\r
`)}),e.on("end",async()=>{if(d.push(`0\r
`),a){let l=r(await c);d.push(`${s}:${l}\r
`),d.push(`\r
`)}d.push(null)}),d};function Ad(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=Lt(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${Lt(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${Lt(n)}`),t.push(o)}}return t.join("&")}import{Agent as kR,request as NR}from"http";import{Agent as PR,request as OR}from"https";var np=["ECONNRESET","EPIPE","ETIMEDOUT"];var _d=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t};var op=(e,t,r=0)=>{if(!r)return;let n=setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);e.on("socket",o=>{o.connecting?o.on("connect",()=>{clearTimeout(n)}):clearTimeout(n)})};var sp=(e,{keepAlive:t,keepAliveMsecs:r})=>{t===!0&&e.on("socket",n=>{n.setKeepAlive(t,r||0)})};var ip=(e,t,r=0)=>{e.setTimeout(r,()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})};import{Readable as vR}from"stream";var ap=1e3;async function Rd(e,t,r=ap){let n=t.headers??{},o=n.Expect||n.expect,s=-1,i=!1;o==="100-continue"&&await Promise.race([new Promise(a=>{s=Number(setTimeout(a,Math.max(ap,r)))}),new Promise(a=>{e.on("continue",()=>{clearTimeout(s),a()}),e.on("error",()=>{i=!0,clearTimeout(s),a()})})]),i||TR(e,t.body)}function TR(e,t){t instanceof vR?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}var Kt=class{constructor(t){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:o,httpAgent:s,httpsAgent:i}=t||{},a=!0,c=50;return{connectionTimeout:n,requestTimeout:r??o,httpAgent:s||new kR({keepAlive:a,maxSockets:c}),httpsAgent:i||new PR({keepAlive:a,maxSockets:c})}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((n,o)=>{let s,i=async A=>{await s,n(A)},a=async A=>{await s,o(A)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r?.aborted){let A=new Error("Request aborted");A.name="AbortError",a(A);return}let c=t.protocol==="https:",d=Ad(t.query||{}),l;if(t.username!=null||t.password!=null){let A=t.username??"",G=t.password??"";l=`${A}:${G}`}let f=t.path;d&&(f+=`?${d}`),t.fragment&&(f+=`#${t.fragment}`);let u={headers:t.headers,host:t.hostname,method:t.method,path:f,port:t.port,agent:c?this.config.httpsAgent:this.config.httpAgent,auth:l},x=(c?OR:NR)(u,A=>{let G=new vt({statusCode:A.statusCode||-1,reason:A.statusMessage,headers:_d(A.headers),body:A});i({response:G})});x.on("error",A=>{np.includes(A.code)?a(Object.assign(A,{name:"TimeoutError"})):a(A)}),op(x,a,this.config.connectionTimeout),ip(x,a,this.config.requestTimeout),r&&(r.onabort=()=>{x.abort();let A=new Error("Request aborted");A.name="AbortError",a(A)});let w=u.agent;typeof w=="object"&&"keepAlive"in w&&sp(x,{keepAlive:w.keepAlive,keepAliveMsecs:w.keepAliveMsecs}),s=Rd(x,t,this.config.requestTimeout).catch(o)})}};var vd=class{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}};import{Writable as IR}from"stream";var Ti=class extends IR{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,r,n){this.bufferedBytes.push(t),n()}};var Ht=e=>new Promise((t,r)=>{let n=new Ti;e.pipe(n),e.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.bufferedBytes));t(o)})});import{Readable as Td}from"stream";import{TextDecoder as DR}from"util";var cp="The stream has already been transformed.",dp=e=>{if(!(e instanceof Td)){let n=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${n}`)}let t=!1,r=async()=>{if(t)throw new Error(cp);return t=!0,await Ht(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{let o=await r();return n===void 0||Buffer.isEncoding(n)?sr(o.buffer,o.byteOffset,o.byteLength).toString(n):new DR(n).decode(o)},transformToWebStream:()=>{if(t)throw new Error(cp);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Td.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return t=!0,Td.toWeb(e)}})};var cr=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return ar.mutate(e);if(!e)return ar.mutate(new Uint8Array);let r=t.streamCollector(e);return ar.mutate(await r)};var Le=class{constructor(){this.middlewareStack=eo()}};var at="***SensitiveInformation***";var lp=(e,t)=>{for(let r of Object.keys(e)){let n=e[r],o=async function(i,a,c){let d=new n(i);if(typeof a=="function")this.send(d,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(d,a||{},c)}else return this.send(d,a)},s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=o}};var hp=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}};var BR=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Cp.warn(Ep(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},MR=Math.ceil(34028234663852886e22),fp=e=>{let t=BR(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>MR)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},ki=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var to=e=>kd(e,32),up=e=>kd(e,16),mp=e=>kd(e,8),kd=(e,t)=>{let r=ki(e);if(r!==void 0&&LR(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},LR=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},kt=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},Tn=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},R=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Cp.warn(Ep(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var pp=e=>fp(typeof e=="string"?Ni(e):e),FR=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Ni=e=>{let t=e.match(FR);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var Pi=e=>to(typeof e=="string"?Ni(e):e),yp=e=>up(typeof e=="string"?Ni(e):e),gp=e=>mp(typeof e=="string"?Ni(e):e),Ep=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Cp={warn:console.warn};var zR=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],xp=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function wp(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),s=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),c=o<10?`0${o}`:`${o}`,d=s<10?`0${s}`:`${s}`,l=i<10?`0${i}`:`${i}`,f=a<10?`0${a}`:`${a}`;return`${zR[n]}, ${c} ${xp[r]} ${t} ${d}:${l}:${f} GMT`}var KU=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var $R=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Nd=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=$R.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,c,d,l]=t,f=yp(bp(n)),u=Uo(o,"month",1,12),y=Uo(s,"day",1,31),x=UR(f,u,y,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d});return l.toUpperCase()!="Z"&&x.setTime(x.getTime()-HR(l)),x},HU=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),VU=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),WU=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var UR=(e,t,r,n)=>{let o=t-1;return qR(e,o,r),new Date(Date.UTC(e,o,r,Uo(n.hours,"hour",0,23),Uo(n.minutes,"minute",0,59),Uo(n.seconds,"seconds",0,60),KR(n.fractionalMilliseconds)))};var YU=50*365*24*60*60*1e3;var jR=[31,28,31,30,31,30,31,31,30,31,30,31],qR=(e,t,r)=>{let n=jR[t];if(t===1&&GR(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${xp[t]} in ${e}: ${r}`)},GR=e=>e%4===0&&(e%100!==0||e%400===0),Uo=(e,t,r,n)=>{let o=gp(bp(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},KR=e=>e==null?0:pp("0."+e)*1e3,HR=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},bp=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var Vt=class e extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,e.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},te=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};var VR=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=WR(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,i=new r({name:t?.code||t?.Code||n||s||"UnknownError",$fault:"client",$metadata:o});throw te(i,t)},Zr=e=>({output:t,parsedBody:r,errorCode:n})=>{VR({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},WR=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var en=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var Sp=!1,tn=e=>{e&&!Sp&&parseInt(e.substring(1,e.indexOf(".")))<14&&(Sp=!0)};var Ap=e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>Hn.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>Hn.MD5,checksumConstructor:()=>e.md5}),{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},_p=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t};var ro=e=>({...Ap(e)});var no=e=>({..._p(e)});function oo(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var jo=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=jo(e[r]));return e};var Pd=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};Pd.prototype=Object.create(String.prototype,{constructor:{value:Pd,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Pd,String);function re(e,t,r){let n,o,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return o=t,s=r,YR(n,o,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){n[i]=s[i];continue}Rp(n,null,s,i)}return n}var ae=(e,t)=>{let r={};for(let n in t)Rp(r,e,t,n);return r},YR=(e,t,r)=>re(e,Object.entries(r).reduce((n,[o,s])=>(Array.isArray(s)?n[o]=s:typeof s=="function"?n[o]=[t,s()]:n[o]=[t,s],n),{})),Rp=(e,t,r,n)=>{if(t!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=XR,c=QR,d=n]=i;(typeof a=="function"&&a(t[d])||typeof a!="function"&&a)&&(e[n]=c(t[d]));return}let[o,s]=r[n];if(typeof s=="function"){let i,a=o===void 0&&(i=s())!=null,c=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?e[n]=i:c&&(e[n]=s())}else{let i=o===void 0&&s!=null,a=typeof o=="function"&&!!o(s)||typeof o!="function"&&!!o;(i||a)&&(e[n]=s)}},XR=e=>e!=null,QR=e=>e;var Od=(e,t,r,n,o,s)=>{if(t!=null&&t[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(o,s?i.split("/").map(a=>oo(a)).join("/"):oo(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e};var so=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=so(e[r]));return t}return e};var vp=e=>({...e,useFipsEndpoint:e.useFipsEndpoint??!1,useDualstackEndpoint:e.useDualstackEndpoint??!1,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"});var Tp={name:"@aws-sdk/client-s3",description:"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version:"3.400.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn test:unit","test:e2e":"ts-mocha test/**/*.ispec.ts && karma start karma.conf.js","test:unit":"ts-mocha test/**/*.spec.ts"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha1-browser":"3.0.0","@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.398.0","@aws-sdk/credential-provider-node":"3.398.0","@aws-sdk/middleware-bucket-endpoint":"3.398.0","@aws-sdk/middleware-expect-continue":"3.398.0","@aws-sdk/middleware-flexible-checksums":"3.400.0","@aws-sdk/middleware-host-header":"3.398.0","@aws-sdk/middleware-location-constraint":"3.398.0","@aws-sdk/middleware-logger":"3.398.0","@aws-sdk/middleware-recursion-detection":"3.398.0","@aws-sdk/middleware-sdk-s3":"3.398.0","@aws-sdk/middleware-signing":"3.398.0","@aws-sdk/middleware-ssec":"3.398.0","@aws-sdk/middleware-user-agent":"3.398.0","@aws-sdk/signature-v4-multi-region":"3.398.0","@aws-sdk/types":"3.398.0","@aws-sdk/util-endpoints":"3.398.0","@aws-sdk/util-user-agent-browser":"3.398.0","@aws-sdk/util-user-agent-node":"3.398.0","@aws-sdk/xml-builder":"3.310.0","@smithy/config-resolver":"^2.0.5","@smithy/eventstream-serde-browser":"^2.0.5","@smithy/eventstream-serde-config-resolver":"^2.0.5","@smithy/eventstream-serde-node":"^2.0.5","@smithy/fetch-http-handler":"^2.0.5","@smithy/hash-blob-browser":"^2.0.5","@smithy/hash-node":"^2.0.5","@smithy/hash-stream-node":"^2.0.5","@smithy/invalid-dependency":"^2.0.5","@smithy/md5-js":"^2.0.5","@smithy/middleware-content-length":"^2.0.5","@smithy/middleware-endpoint":"^2.0.5","@smithy/middleware-retry":"^2.0.5","@smithy/middleware-serde":"^2.0.5","@smithy/middleware-stack":"^2.0.0","@smithy/node-config-provider":"^2.0.5","@smithy/node-http-handler":"^2.0.5","@smithy/protocol-http":"^2.0.5","@smithy/smithy-client":"^2.0.5","@smithy/types":"^2.2.2","@smithy/url-parser":"^2.0.5","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.5","@smithy/util-defaults-mode-node":"^2.0.5","@smithy/util-retry":"^2.0.0","@smithy/util-stream":"^2.0.5","@smithy/util-utf8":"^2.0.0","@smithy/util-waiter":"^2.0.5","fast-xml-parser":"4.2.5",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"}};var kp=(e,{stsClientCtor:t})=>fi({...e,stsClientCtor:t});var Np=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"});var Pp={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.398.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/credential-provider-node":"3.398.0","@aws-sdk/middleware-host-header":"3.398.0","@aws-sdk/middleware-logger":"3.398.0","@aws-sdk/middleware-recursion-detection":"3.398.0","@aws-sdk/middleware-sdk-sts":"3.398.0","@aws-sdk/middleware-signing":"3.398.0","@aws-sdk/middleware-user-agent":"3.398.0","@aws-sdk/types":"3.398.0","@aws-sdk/util-endpoints":"3.398.0","@aws-sdk/util-user-agent-browser":"3.398.0","@aws-sdk/util-user-agent-node":"3.398.0","@smithy/config-resolver":"^2.0.5","@smithy/fetch-http-handler":"^2.0.5","@smithy/hash-node":"^2.0.5","@smithy/invalid-dependency":"^2.0.5","@smithy/middleware-content-length":"^2.0.5","@smithy/middleware-endpoint":"^2.0.5","@smithy/middleware-retry":"^2.0.5","@smithy/middleware-serde":"^2.0.5","@smithy/middleware-stack":"^2.0.0","@smithy/node-config-provider":"^2.0.5","@smithy/node-http-handler":"^2.0.5","@smithy/protocol-http":"^2.0.5","@smithy/smithy-client":"^2.0.5","@smithy/types":"^2.2.2","@smithy/url-parser":"^2.0.5","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.5","@smithy/util-defaults-mode-node":"^2.0.5","@smithy/util-retry":"^2.0.0","@smithy/util-utf8":"^2.0.0","fast-xml-parser":"4.2.5",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var wt=class e extends Vt{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var Oi=class e extends wt{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Ii=class e extends wt{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Di=class e extends wt{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Bi=class e extends wt{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Mi=class e extends wt{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Li=class e extends wt{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Fi=class e extends wt{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var Op=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:at}}),Ip=e=>({...e,...e.Credentials&&{Credentials:Op(e.Credentials)}});var Dp=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:at}}),Bp=e=>({...e,...e.Credentials&&{Credentials:Op(e.Credentials)}});var uy=er(jd());var my=async(e,t)=>{let r=Ry,n;return n=Ty({...mT(e,t),Action:"AssumeRole",Version:"2011-06-15"}),_y(t,r,"/",void 0,n)};var hy=async(e,t)=>{let r=Ry,n;return n=Ty({...hT(e,t),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),_y(t,r,"/",void 0,n)};var py=async(e,t)=>{if(e.statusCode>=300)return cT(e,t);let r=await qd(e.body,t),n={};return n=wT(r.AssumeRoleResult,t),{$metadata:lr(e),...n}},cT=async(e,t)=>{let r={...e,body:await vy(e.body,t)},n=ky(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await gy(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Ey(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Cy(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await xy(r,t);default:let o=r.body;return Ay({output:e,parsedBody:o.Error,errorCode:n})}};var yy=async(e,t)=>{if(e.statusCode>=300)return dT(e,t);let r=await qd(e.body,t),n={};return n=bT(r.AssumeRoleWithWebIdentityResult,t),{$metadata:lr(e),...n}},dT=async(e,t)=>{let r={...e,body:await vy(e.body,t)},n=ky(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await gy(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await lT(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await fT(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await uT(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Ey(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Cy(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await xy(r,t);default:let o=r.body;return Ay({output:e,parsedBody:o.Error,errorCode:n})}};var gy=async(e,t)=>{let r=e.body,n=ST(r.Error,t),o=new Oi({$metadata:lr(e),...n});return te(o,r)},lT=async(e,t)=>{let r=e.body,n=AT(r.Error,t),o=new Fi({$metadata:lr(e),...n});return te(o,r)},fT=async(e,t)=>{let r=e.body,n=_T(r.Error,t),o=new Mi({$metadata:lr(e),...n});return te(o,r)};var uT=async(e,t)=>{let r=e.body,n=RT(r.Error,t),o=new Li({$metadata:lr(e),...n});return te(o,r)},Ey=async(e,t)=>{let r=e.body,n=vT(r.Error,t),o=new Ii({$metadata:lr(e),...n});return te(o,r)},Cy=async(e,t)=>{let r=e.body,n=TT(r.Error,t),o=new Di({$metadata:lr(e),...n});return te(o,r)},xy=async(e,t)=>{let r=e.body,n=kT(r.Error,t),o=new Bi({$metadata:lr(e),...n});return te(o,r)},mT=(e,t)=>{let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.PolicyArns!=null){let n=wy(e.PolicyArns,t);e.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}if(e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),e.Tags!=null){let n=xT(e.Tags,t);e.Tags?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([o,s])=>{let i=`Tags.${o}`;r[i]=s})}if(e.TransitiveTagKeys!=null){let n=CT(e.TransitiveTagKeys,t);e.TransitiveTagKeys?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([o,s])=>{let i=`TransitiveTagKeys.${o}`;r[i]=s})}if(e.ExternalId!=null&&(r.ExternalId=e.ExternalId),e.SerialNumber!=null&&(r.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(r.TokenCode=e.TokenCode),e.SourceIdentity!=null&&(r.SourceIdentity=e.SourceIdentity),e.ProvidedContexts!=null){let n=gT(e.ProvidedContexts,t);e.ProvidedContexts?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([o,s])=>{let i=`ProvidedContexts.${o}`;r[i]=s})}return r};var hT=(e,t)=>{let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.WebIdentityToken!=null&&(r.WebIdentityToken=e.WebIdentityToken),e.ProviderId!=null&&(r.ProviderId=e.ProviderId),e.PolicyArns!=null){let n=wy(e.PolicyArns,t);e.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}return e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),r};var wy=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=pT(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},pT=(e,t)=>{let r={};return e.arn!=null&&(r.arn=e.arn),r},yT=(e,t)=>{let r={};return e.ProviderArn!=null&&(r.ProviderArn=e.ProviderArn),e.ContextAssertion!=null&&(r.ContextAssertion=e.ContextAssertion),r},gT=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=yT(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},ET=(e,t)=>{let r={};return e.Key!=null&&(r.Key=e.Key),e.Value!=null&&(r.Value=e.Value),r},CT=(e,t)=>{let r={},n=1;for(let o of e)o!==null&&(r[`member.${n}`]=o,n++);return r},xT=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=ET(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},by=(e,t)=>{let r={};return e.AssumedRoleId!==void 0&&(r.AssumedRoleId=R(e.AssumedRoleId)),e.Arn!==void 0&&(r.Arn=R(e.Arn)),r},wT=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=Sy(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=by(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=Pi(e.PackedPolicySize)),e.SourceIdentity!==void 0&&(r.SourceIdentity=R(e.SourceIdentity)),r};var bT=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=Sy(e.Credentials,t)),e.SubjectFromWebIdentityToken!==void 0&&(r.SubjectFromWebIdentityToken=R(e.SubjectFromWebIdentityToken)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=by(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=Pi(e.PackedPolicySize)),e.Provider!==void 0&&(r.Provider=R(e.Provider)),e.Audience!==void 0&&(r.Audience=R(e.Audience)),e.SourceIdentity!==void 0&&(r.SourceIdentity=R(e.SourceIdentity)),r},Sy=(e,t)=>{let r={};return e.AccessKeyId!==void 0&&(r.AccessKeyId=R(e.AccessKeyId)),e.SecretAccessKey!==void 0&&(r.SecretAccessKey=R(e.SecretAccessKey)),e.SessionToken!==void 0&&(r.SessionToken=R(e.SessionToken)),e.Expiration!==void 0&&(r.Expiration=kt(Nd(e.Expiration))),r};var ST=(e,t)=>{let r={};return e.message!==void 0&&(r.message=R(e.message)),r};var AT=(e,t)=>{let r={};return e.message!==void 0&&(r.message=R(e.message)),r},_T=(e,t)=>{let r={};return e.message!==void 0&&(r.message=R(e.message)),r};var RT=(e,t)=>{let r={};return e.message!==void 0&&(r.message=R(e.message)),r},vT=(e,t)=>{let r={};return e.message!==void 0&&(r.message=R(e.message)),r},TT=(e,t)=>{let r={};return e.message!==void 0&&(r.message=R(e.message)),r},kT=(e,t)=>{let r={};return e.message!==void 0&&(r.message=R(e.message)),r},lr=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),NT=(e,t)=>cr(e,t).then(r=>t.utf8Encoder(r)),Ay=Zr(wt),_y=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:s,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new K(d)},Ry={"content-type":"application/x-www-form-urlencoded"},qd=(e,t)=>NT(e,t).then(r=>{if(r.length){let n=new uy.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o=n.parse(r),s="#text",i=Object.keys(o)[0],a=o[i];return a[s]&&(a[i]=a[s],delete a[s]),jo(a)}return{}}),vy=async(e,t)=>{let r=await qd(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Ty=e=>Object.entries(e).map(([t,r])=>oo(t)+"="+oo(r)).join("&"),ky=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};var $i=class e extends Le{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(rt(r,this.serialize,this.deserialize)),this.middlewareStack.use(nt(r,e.getEndpointParameterInstructions())),this.middlewareStack.use(mi(r));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:Ip},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return my(t,r)}deserialize(t,r){return py(t,r)}};var Ui=class e extends Le{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(rt(r,this.serialize,this.deserialize)),this.middlewareStack.use(nt(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:Dp,outputFilterSensitiveLog:Bp},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return hy(t,r)}deserialize(t,r){return yy(t,r)}};var Ny="us-east-1",Py=e=>typeof e!="function"?e===void 0?Ny:e:async()=>{try{return await e()}catch{return Ny}},Gd=(e,t)=>{let r,n;return async(o,s)=>{if(n=o,!r){let{logger:a,region:c,requestHandler:d}=e;r=new t({logger:a,credentialDefaultProvider:()=>async()=>n,region:Py(c||e.region),...d?{requestHandler:d}:{}})}let{Credentials:i}=await r.send(new $i(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration}}},Kd=(e,t)=>{let r;return async n=>{if(!r){let{logger:s,region:i,requestHandler:a}=e;r=new t({logger:s,region:Py(i||e.region),...a?{requestHandler:a}:{}})}let{Credentials:o}=await r.send(new Ui(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration}}},Oy=e=>t=>e({roleAssumer:Gd(t,t.stsClientCtor),roleAssumerWithWebIdentity:Kd(t,t.stsClientCtor),...t});var PT="AWS_ACCESS_KEY_ID",OT="AWS_SECRET_ACCESS_KEY",IT="AWS_SESSION_TOKEN",DT="AWS_CREDENTIAL_EXPIRATION",ji=()=>async()=>{let e=process.env[PT],t=process.env[OT],r=process.env[IT],n=process.env[DT];if(e&&t)return{accessKeyId:e,secretAccessKey:t,...r&&{sessionToken:r},...n&&{expiration:new Date(n)}};throw new D("Unable to find environment variable credentials.")};import{homedir as BT}from"os";import{sep as MT}from"path";var io=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${MT}`}=process.env;return e||t||(r?`${n}${r}`:BT())};var Hd="AWS_PROFILE",LT="default",bt=e=>e.profile||process.env[Hd]||LT;import{createHash as FT}from"crypto";import{join as zT}from"path";var qi=e=>{let r=FT("sha1").update(e).digest("hex");return zT(io(),".aws","sso","cache",`${r}.json`)};import{promises as $T}from"fs";var{readFile:UT}=$T,Gi=async e=>{let t=qi(e),r=await UT(t,"utf8");return JSON.parse(r)};import{join as jT}from"path";var qT="AWS_CONFIG_FILE",Ki=()=>process.env[qT]||jT(io(),".aws","config");import{join as GT}from"path";var KT="AWS_SHARED_CREDENTIALS_FILE",Iy=()=>process.env[KT]||GT(io(),".aws","credentials");var Dy=/^profile\s(["'])?([^\1]+)\1$/,By=e=>Object.entries(e).filter(([t])=>Dy.test(t)).reduce((t,[r,n])=>({...t,[Dy.exec(r)[2]]:n}),{...e.default&&{default:e.default}});var HT=["__proto__","profile __proto__"],Ko=e=>{let t={},r;for(let n of e.split(/\r?\n/))if(n=n.split(/(^|\s)[;#]/)[0].trim(),n[0]==="["&&n[n.length-1]==="]"){if(r=n.substring(1,n.length-1),HT.includes(r))throw new Error(`Found invalid profile name "${r}"`)}else if(r){let s=n.indexOf("="),i=0,a=n.length-1;if(s!==-1&&s!==i&&s!==a){let[d,l]=[n.substring(0,s).trim(),n.substring(s+1).trim()];t[r]=t[r]||{},t[r][d]=l}}return t};import{promises as VT}from"fs";var{readFile:WT}=VT,Vd={},Ho=(e,t)=>((!Vd[e]||t?.ignoreCache)&&(Vd[e]=WT(e,"utf8")),Vd[e]);var My=()=>({}),Hi=async(e={})=>{let{filepath:t=Iy(),configFilepath:r=Ki()}=e,n=await Promise.all([Ho(r,{ignoreCache:e.ignoreCache}).then(Ko).then(By).catch(My),Ho(t,{ignoreCache:e.ignoreCache}).then(Ko).catch(My)]);return{configFile:n[0],credentialsFile:n[1]}};var Ly=/^sso-session\s(["'])?([^\1]+)\1$/,Fy=e=>Object.entries(e).filter(([t])=>Ly.test(t)).reduce((t,[r,n])=>({...t,[Ly.exec(r)[2]]:n}),{});var YT=()=>({}),Vi=async(e={})=>Ho(e.configFilepath??Ki()).then(Ko).then(Fy).catch(YT);var zy=(...e)=>{let t={};for(let r of e)for(let[n,o]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],o):t[n]=o;return t};var nn=async e=>{let t=await Hi(e);return zy(t.configFile,t.credentialsFile)};import{parse as JT}from"url";import{Buffer as XT}from"buffer";import{request as QT}from"http";function fr(e){return new Promise((t,r)=>{let n=QT({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",o=>{r(Object.assign(new yt("Unable to connect to instance metadata service"),o)),n.destroy()}),n.on("timeout",()=>{r(new yt("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",o=>{let{statusCode:s=400}=o;(s<200||300<=s)&&(r(Object.assign(new yt("Error response received from instance metadata service"),{statusCode:s})),n.destroy());let i=[];o.on("data",a=>{i.push(a)}),o.on("end",()=>{t(XT.concat(i)),n.destroy()})}),n.end()})}var Wi=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",Yi=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)});var Xi=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t});var Vo=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r};var Wo="AWS_CONTAINER_CREDENTIALS_FULL_URI",Yo="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",$y="AWS_CONTAINER_AUTHORIZATION_TOKEN",Qi=(e={})=>{let{timeout:t,maxRetries:r}=Xi(e);return()=>Vo(async()=>{let n=await nk(),o=JSON.parse(await ZT(t,n));if(!Wi(o))throw new D("Invalid response received from instance metadata service.");return Yi(o)},r)},ZT=async(e,t)=>(process.env[$y]&&(t.headers={...t.headers,Authorization:process.env[$y]}),(await fr({...t,timeout:e})).toString()),ek="169.254.170.2",tk={localhost:!0,"127.0.0.1":!0},rk={"http:":!0,"https:":!0},nk=async()=>{if(process.env[Yo])return{hostname:ek,path:process.env[Yo]};if(process.env[Wo]){let e=JT(process.env[Wo]);if(!e.hostname||!(e.hostname in tk))throw new D(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in rk))throw new D(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new D(`The container metadata credential provider cannot be used unless the ${Yo} or ${Wo} environment variable is set`,!1)};var Uy=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new D(t.message||`Cannot load config from environment variables with getter: ${e}`)}};var jy=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=bt(r),{configFile:o,credentialsFile:s}=await Hi(r),i=s[n]||{},a=o[n]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let d=e(c);if(d===void 0)throw new Error;return d}catch(d){throw new D(d.message||`Cannot load config for profile ${n} in SDK configuration files with getter: ${e}`)}};var ok=e=>typeof e=="function",qy=e=>ok(e)?async()=>await e():wm(e);var V=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>Mr(Vs(Uy(e),jy(t,n),qy(r)));var Xo;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(Xo||(Xo={}));var sk="AWS_EC2_METADATA_SERVICE_ENDPOINT",ik="ec2_metadata_service_endpoint",Gy={environmentVariableSelector:e=>e[sk],configFileSelector:e=>e[ik],default:void 0};var on;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(on||(on={}));var ak="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",ck="ec2_metadata_service_endpoint_mode",Ky={environmentVariableSelector:e=>e[ak],configFileSelector:e=>e[ck],default:on.IPv4};var Qo=async()=>tt(await dk()||await lk()),dk=async()=>V(Gy)(),lk=async()=>{let e=await V(Ky)();switch(e){case on.IPv4:return Xo.IPv4;case on.IPv6:return Xo.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(on)}`)}};var fk="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",Wd=(e,t)=>{let r=300+Math.floor(Math.random()*300),n=new Date(Date.now()+r*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+fk);let o=e.originalExpiration??e.expiration;return{...e,...o?{originalExpiration:o}:{},expiration:n}};var Hy=(e,t={})=>{let r=t?.logger||console,n;return async()=>{let o;try{o=await e(),o.expiration&&o.expiration.getTime()<Date.now()&&(o=Wd(o,r))}catch(s){if(n)r.warn("Credential renew failed: ",s),o=Wd(n,r);else throw s}return n=o,o}};var Vy="/latest/meta-data/iam/security-credentials/",uk="/latest/api/token",Ji=(e={})=>Hy(mk(e),{logger:e.logger}),mk=e=>{let t=!1,{timeout:r,maxRetries:n}=Xi(e),o=async(s,i)=>{let a=(await Vo(async()=>{let c;try{c=await pk(i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)).trim();return Vo(async()=>{let c;try{c=await yk(a,i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)};return async()=>{let s=await Qo();if(t)return o(n,{...s,timeout:r});{let i;try{i=(await hk({...s,timeout:r})).toString()}catch(a){if(a?.statusCode===400)throw Object.assign(a,{message:"EC2 Metadata token request returned error"});return(a.message==="TimeoutError"||[403,404,405].includes(a.statusCode))&&(t=!0),o(n,{...s,timeout:r})}return o(n,{...s,headers:{"x-aws-ec2-metadata-token":i},timeout:r})}}},hk=async e=>fr({...e,path:uk,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),pk=async e=>(await fr({...e,path:Vy})).toString(),yk=async(e,t)=>{let r=JSON.parse((await fr({...t,path:Vy+e})).toString());if(!Wi(r))throw new D("Invalid response received from instance metadata service.");return Yi(r)};var Wy=(e,t)=>{let r={EcsContainer:Qi,Ec2InstanceMetadata:Ji,Environment:ji};if(e in r)return r[e]();throw new D(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};var Yy=e=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(gk(e)||Ek(e)),gk=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",Ek=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",Xy=async(e,t,r,n={})=>{let o=t[e];if(!r.roleAssumer)throw new D(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:s}=o;if(s&&s in n)throw new D(`Detected a cycle attempting to resolve credentials for profile ${bt(r)}. Profiles visited: `+Object.keys(n).join(", "),!1);let i=s?Zi(s,t,r,{...n,[s]:!0}):Wy(o.credential_source,e)(),a={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id},{mfa_serial:c}=o;if(c){if(!r.mfaCodeProvider)throw new D(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);a.SerialNumber=c,a.TokenCode=await r.mfaCodeProvider(c)}let d=await i;return r.roleAssumer(d,a)};import{exec as Ck}from"child_process";import{promisify as xk}from"util";var Qy=(e,t)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let r=new Date;if(new Date(t.Expiration)<r)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)}}};var Jy=async(e,t)=>{let r=t[e];if(t[e]){let n=r.credential_process;if(n!==void 0){let o=xk(Ck);try{let{stdout:s}=await o(n),i;try{i=JSON.parse(s.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return Qy(e,i)}catch(s){throw new D(s.message)}}else throw new D(`Profile ${e} did not contain credential_process.`)}else throw new D(`Profile ${e} could not be found in shared credentials file.`)};var ea=(e={})=>async()=>{let t=await nn(e);return Jy(bt(e),t)};var Zy=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",eg=async(e,t)=>ea({...e,profile:t})();var Jo=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");var tg=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});var rg={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.398.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/middleware-host-header":"3.398.0","@aws-sdk/middleware-logger":"3.398.0","@aws-sdk/middleware-recursion-detection":"3.398.0","@aws-sdk/middleware-user-agent":"3.398.0","@aws-sdk/types":"3.398.0","@aws-sdk/util-endpoints":"3.398.0","@aws-sdk/util-user-agent-browser":"3.398.0","@aws-sdk/util-user-agent-node":"3.398.0","@smithy/config-resolver":"^2.0.5","@smithy/fetch-http-handler":"^2.0.5","@smithy/hash-node":"^2.0.5","@smithy/invalid-dependency":"^2.0.5","@smithy/middleware-content-length":"^2.0.5","@smithy/middleware-endpoint":"^2.0.5","@smithy/middleware-retry":"^2.0.5","@smithy/middleware-serde":"^2.0.5","@smithy/middleware-stack":"^2.0.0","@smithy/node-config-provider":"^2.0.5","@smithy/node-http-handler":"^2.0.5","@smithy/protocol-http":"^2.0.5","@smithy/smithy-client":"^2.0.5","@smithy/types":"^2.2.2","@smithy/url-parser":"^2.0.5","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.5","@smithy/util-defaults-mode-node":"^2.0.5","@smithy/util-retry":"^2.0.0","@smithy/util-utf8":"^2.0.0",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};import{platform as bk,release as Sk}from"os";import{env as og,versions as Ak}from"process";var ng=()=>{try{return typeof I=="function"&&typeof module<"u"&&I("aws-crt")?["md/crt-avail"]:null}catch{return null}};var _k="AWS_SDK_UA_APP_ID",Rk="sdk-ua-app-id",sn=({serviceId:e,clientVersion:t})=>{let r=[["aws-sdk-js",t],["ua","2.0"],[`os/${bk()}`,Sk()],["lang/js"],["md/nodejs",`${Ak.node}`]],n=ng();n&&r.push(n),e&&r.push([`api/${e}`,t]),og.AWS_EXECUTION_ENV&&r.push([`exec-env/${og.AWS_EXECUTION_ENV}`]);let o=V({environmentVariableSelector:i=>i[_k],configFileSelector:i=>i[Rk],default:void 0})(),s;return async()=>{if(!s){let i=await o;s=i?[...r,[`app/${i}`]]:[...r]}return s}};import{Buffer as vk}from"buffer";import{createHash as Tk,createHmac as kk}from"crypto";var St=class{constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(et(sg(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?kk(this.algorithmIdentifier,sg(this.secret)):Tk(this.algorithmIdentifier)}};function sg(e,t){return vk.isBuffer(e)?e:typeof e=="string"?Xn(e,t):ArrayBuffer.isView(e)?sr(e.buffer,e.byteOffset,e.byteLength):sr(e)}import{fstatSync as Nk,lstatSync as Pk}from"fs";var an=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return Pk(e.path).size;if(typeof e.fd=="number")return Nk(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};var mg="required",ur="fn",mr="argv",ao="ref",Yd="PartitionResult",Wt="tree",Zo="error",es="endpoint",ig={[mg]:!1,type:"String"},ag={[mg]:!0,default:!1,type:"Boolean"},hg={[ao]:"Endpoint"},pg={[ur]:"booleanEquals",[mr]:[{[ao]:"UseFIPS"},!0]},yg={[ur]:"booleanEquals",[mr]:[{[ao]:"UseDualStack"},!0]},Yt={},cg={[ur]:"booleanEquals",[mr]:[!0,{[ur]:"getAttr",[mr]:[{[ao]:Yd},"supportsFIPS"]}]},dg={[ur]:"booleanEquals",[mr]:[!0,{[ur]:"getAttr",[mr]:[{[ao]:Yd},"supportsDualStack"]}]},lg=[hg],fg=[pg],ug=[yg],Ok={version:"1.0",parameters:{Region:ig,UseDualStack:ag,UseFIPS:ag,Endpoint:ig},rules:[{conditions:[{[ur]:"aws.partition",[mr]:[{[ao]:"Region"}],assign:Yd}],type:Wt,rules:[{conditions:[{[ur]:"isSet",[mr]:lg},{[ur]:"parseURL",[mr]:lg,assign:"url"}],type:Wt,rules:[{conditions:fg,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Zo},{type:Wt,rules:[{conditions:ug,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Zo},{endpoint:{url:hg,properties:Yt,headers:Yt},type:es}]}]},{conditions:[pg,yg],type:Wt,rules:[{conditions:[cg,dg],type:Wt,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Yt,headers:Yt},type:es}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Zo}]},{conditions:fg,type:Wt,rules:[{conditions:[cg],type:Wt,rules:[{type:Wt,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Yt,headers:Yt},type:es}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Zo}]},{conditions:ug,type:Wt,rules:[{conditions:[dg],type:Wt,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Yt,headers:Yt},type:es}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Zo}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Yt,headers:Yt},type:es}]}]},gg=Ok;var Eg=(e,t={})=>Ur(gg,{endpointParams:e,logger:t.logger});var Cg=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??qt,base64Encoder:e?.base64Encoder??Gt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Eg,extensions:e?.extensions??[],logger:e?.logger??new Ut,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??tt,utf8Decoder:e?.utf8Decoder??Ze,utf8Encoder:e?.utf8Encoder??Et});var xg="AWS_EXECUTION_ENV",Xd="AWS_REGION",Qd="AWS_DEFAULT_REGION",wg="AWS_EC2_METADATA_DISABLED",bg=["in-region","cross-region","mobile","standard","legacy"],Sg="/latest/meta-data/placement/region";var Ik="AWS_DEFAULTS_MODE",Dk="defaults_mode",Ag={environmentVariableSelector:e=>e[Ik],configFileSelector:e=>e[Dk],default:"legacy"};var cn=({region:e=V(zt),defaultsMode:t=V(Ag)}={})=>Mr(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return Bk(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${bg.join(", ")}, got ${r}`)}}),Bk=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await Mk();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},Mk=async()=>{if(process.env[xg]&&(process.env[Xd]||process.env[Qd]))return process.env[Xd]??process.env[Qd];if(!process.env[wg])try{let e=await Qo();return(await fr({...e,path:Sg})).toString()}catch{}};var _g=e=>{tn(process.version);let t=cn(e),r=()=>t().then(en),n=Cg(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??an,defaultUserAgentProvider:e?.defaultUserAgentProvider??sn({serviceId:n.serviceId,clientVersion:rg.version}),maxAttempts:e?.maxAttempts??V(Yr),region:e?.region??V(zt,Kr),requestHandler:e?.requestHandler??new Kt(r),retryMode:e?.retryMode??V({...Qr,default:async()=>(await r()).retryMode||$t}),sha256:e?.sha256??St.bind(null,"sha256"),streamCollector:e?.streamCollector??Ht,useDualstackEndpoint:e?.useDualstackEndpoint??V(qr),useFipsEndpoint:e?.useFipsEndpoint??V(Gr)}};var Lk=e=>e,Rg=(e,t)=>{let r={...Lk(ro(e))};return t.forEach(n=>n.configure(r)),{...e,...no(r)}};var ta=class extends jt{constructor(...[t]){let r=_g(t||{}),n=tg(r),o=Hr(n),s=Wr(o),i=Xr(s),a=i,c=zr(a),d=Rg(c,t?.extensions||[]);super(d),this.config=d,this.middlewareStack.use(Jr(this.config)),this.middlewareStack.use(Vr(this.config)),this.middlewareStack.use(Ir(this.config)),this.middlewareStack.use(Dr(this.config)),this.middlewareStack.use(Br(this.config)),this.middlewareStack.use(jr(this.config))}destroy(){super.destroy()}};var hr=class e extends Vt{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var ra=class e extends hr{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},na=class e extends hr{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},oa=class e extends hr{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},sa=class e extends hr{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},vg=e=>({...e,...e.accessToken&&{accessToken:at}}),Fk=e=>({...e,...e.secretAccessKey&&{secretAccessKey:at},...e.sessionToken&&{sessionToken:at}}),Tg=e=>({...e,...e.roleCredentials&&{roleCredentials:Fk(e.roleCredentials)}});var kg=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i=re({},Hk,{"x-amz-sso_bearer_token":e.accessToken}),a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/federation/credentials`,c=re({role_name:[,kt(e.roleName,"roleName")],account_id:[,kt(e.accountId,"accountId")]}),d;return new K({protocol:n,hostname:r,port:o,method:"GET",headers:i,path:a,query:c,body:d})};var Ng=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return zk(e,t);let r=re({$metadata:ts(e)}),n=kt(Tn(await Pg(e.body,t)),"body"),o=ae(n,{roleCredentials:so});return Object.assign(r,o),r},zk=async(e,t)=>{let r={...e,body:await Vk(e.body,t)},n=Wk(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Uk(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await jk(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await qk(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Gk(r,t);default:let o=r.body;return $k({output:e,parsedBody:o,errorCode:n})}};var $k=Zr(hr),Uk=async(e,t)=>{let r=re({}),n=e.body,o=ae(n,{message:R});Object.assign(r,o);let s=new ra({$metadata:ts(e),...r});return te(s,e.body)},jk=async(e,t)=>{let r=re({}),n=e.body,o=ae(n,{message:R});Object.assign(r,o);let s=new na({$metadata:ts(e),...r});return te(s,e.body)},qk=async(e,t)=>{let r=re({}),n=e.body,o=ae(n,{message:R});Object.assign(r,o);let s=new oa({$metadata:ts(e),...r});return te(s,e.body)},Gk=async(e,t)=>{let r=re({}),n=e.body,o=ae(n,{message:R});Object.assign(r,o);let s=new sa({$metadata:ts(e),...r});return te(s,e.body)},ts=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Kk=(e,t)=>cr(e,t).then(r=>t.utf8Encoder(r)),Hk=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),Pg=(e,t)=>Kk(e,t).then(r=>r.length?JSON.parse(r):{}),Vk=async(e,t)=>{let r=await Pg(e,t);return r.message=r.message??r.Message,r},Wk=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var ia=class e extends Le{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(rt(r,this.serialize,this.deserialize)),this.middlewareStack.use(nt(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:vg,outputFilterSensitiveLog:Tg},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return kg(t,r)}deserialize(t,r){return Ng(t,r)}};var Yk=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"}),Xk={version:"3.387.0"},zg="required",pr="fn",yr="argv",co="ref",Zd="PartitionResult",Xt="tree",rs="error",ns="endpoint",Og={[zg]:!1,type:"String"},Ig={[zg]:!0,default:!1,type:"Boolean"},$g={[co]:"Endpoint"},Ug={[pr]:"booleanEquals",[yr]:[{[co]:"UseFIPS"},!0]},jg={[pr]:"booleanEquals",[yr]:[{[co]:"UseDualStack"},!0]},Qt={},Dg={[pr]:"booleanEquals",[yr]:[!0,{[pr]:"getAttr",[yr]:[{[co]:Zd},"supportsFIPS"]}]},Bg={[pr]:"booleanEquals",[yr]:[!0,{[pr]:"getAttr",[yr]:[{[co]:Zd},"supportsDualStack"]}]},Mg=[$g],Lg=[Ug],Fg=[jg],Qk={version:"1.0",parameters:{Region:Og,UseDualStack:Ig,UseFIPS:Ig,Endpoint:Og},rules:[{conditions:[{[pr]:"aws.partition",[yr]:[{[co]:"Region"}],assign:Zd}],type:Xt,rules:[{conditions:[{[pr]:"isSet",[yr]:Mg},{[pr]:"parseURL",[yr]:Mg,assign:"url"}],type:Xt,rules:[{conditions:Lg,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:rs},{type:Xt,rules:[{conditions:Fg,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:rs},{endpoint:{url:$g,properties:Qt,headers:Qt},type:ns}]}]},{conditions:[Ug,jg],type:Xt,rules:[{conditions:[Dg,Bg],type:Xt,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Qt,headers:Qt},type:ns}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:rs}]},{conditions:Lg,type:Xt,rules:[{conditions:[Dg],type:Xt,rules:[{type:Xt,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Qt,headers:Qt},type:ns}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:rs}]},{conditions:Fg,type:Xt,rules:[{conditions:[Bg],type:Xt,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Qt,headers:Qt},type:ns}]},{error:"DualStack is enabled but this partition does not support DualStack",type:rs}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Qt,headers:Qt},type:ns}]}]},Jk=Qk,Zk=(e,t={})=>Ur(Jk,{endpointParams:e,logger:t.logger}),eN=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??qt,base64Encoder:e?.base64Encoder??Gt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Zk,logger:e?.logger??new Ut,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??tt,utf8Decoder:e?.utf8Decoder??Ze,utf8Encoder:e?.utf8Encoder??Et}),tN=e=>{tn(process.version);let t=cn(e),r=()=>t().then(en),n=eN(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??an,defaultUserAgentProvider:e?.defaultUserAgentProvider??sn({serviceId:n.serviceId,clientVersion:Xk.version}),maxAttempts:e?.maxAttempts??V(Yr),region:e?.region??V(zt,Kr),requestHandler:e?.requestHandler??new Kt(r),retryMode:e?.retryMode??V({...Qr,default:async()=>(await r()).retryMode||$t}),sha256:e?.sha256??St.bind(null,"sha256"),streamCollector:e?.streamCollector??Ht,useDualstackEndpoint:e?.useDualstackEndpoint??V(qr),useFipsEndpoint:e?.useFipsEndpoint??V(Gr)}},el=class extends jt{constructor(...[e]){let t=tN(e||{}),r=Yk(t),n=Hr(r),o=Wr(n),s=Xr(o),i=s,a=zr(i);super(a),this.config=a,this.middlewareStack.use(Jr(this.config)),this.middlewareStack.use(Vr(this.config)),this.middlewareStack.use(Ir(this.config)),this.middlewareStack.use(Dr(this.config)),this.middlewareStack.use(Br(this.config)),this.middlewareStack.use(jr(this.config))}destroy(){super.destroy()}},ct=class qg extends Vt{constructor(t){super(t),Object.setPrototypeOf(this,qg.prototype)}},rN=class Gg extends ct{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,Gg.prototype),this.error=t.error,this.error_description=t.error_description}},nN=class Kg extends ct{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,Kg.prototype),this.error=t.error,this.error_description=t.error_description}},oN=class Hg extends ct{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Hg.prototype),this.error=t.error,this.error_description=t.error_description}},sN=class Vg extends ct{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,Vg.prototype),this.error=t.error,this.error_description=t.error_description}},iN=class Wg extends ct{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,Wg.prototype),this.error=t.error,this.error_description=t.error_description}},aN=class Yg extends ct{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,Yg.prototype),this.error=t.error,this.error_description=t.error_description}},cN=class Xg extends ct{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Xg.prototype),this.error=t.error,this.error_description=t.error_description}},dN=class Qg extends ct{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,Qg.prototype),this.error=t.error,this.error_description=t.error_description}},lN=class Jg extends ct{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,Jg.prototype),this.error=t.error,this.error_description=t.error_description}},fN=class Zg extends ct{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,Zg.prototype),this.error=t.error,this.error_description=t.error_description}},uN=class eE extends ct{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,eE.prototype),this.error=t.error,this.error_description=t.error_description}},mN=class tE extends ct{constructor(t){super({name:"InvalidClientMetadataException",$fault:"client",...t}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,tE.prototype),this.error=t.error,this.error_description=t.error_description}},hN=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/token`,c;return c=JSON.stringify(ae(e,{clientId:[],clientSecret:[],code:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:d=>so(d)})),new K({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},pN=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/client/register`,c;return c=JSON.stringify(ae(e,{clientName:[],clientType:[],scopes:d=>so(d)})),new K({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},yN=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/device_authorization`,c;return c=JSON.stringify(ae(e,{clientId:[],clientSecret:[],startUrl:[]})),new K({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},gN=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return EN(e,t);let r=re({$metadata:qe(e)}),n=kt(Tn(await aa(e.body,t)),"body"),o=ae(n,{accessToken:R,expiresIn:to,idToken:R,refreshToken:R,tokenType:R});return Object.assign(r,o),r},EN=async(e,t)=>{let r={...e,body:await ol(e.body,t)},n=sl(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await SN(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await AN(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await _N(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await rl(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await rE(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await vN(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await nl(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await nE(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await oE(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await sE(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await TN(r,t);default:let o=r.body;return tl({output:e,parsedBody:o,errorCode:n})}},CN=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return xN(e,t);let r=re({$metadata:qe(e)}),n=kt(Tn(await aa(e.body,t)),"body"),o=ae(n,{authorizationEndpoint:R,clientId:R,clientIdIssuedAt:ki,clientSecret:R,clientSecretExpiresAt:ki,tokenEndpoint:R});return Object.assign(r,o),r},xN=async(e,t)=>{let r={...e,body:await ol(e.body,t)},n=sl(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await rl(r,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await RN(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await nl(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await nE(r,t);default:let o=r.body;return tl({output:e,parsedBody:o,errorCode:n})}},wN=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return bN(e,t);let r=re({$metadata:qe(e)}),n=kt(Tn(await aa(e.body,t)),"body"),o=ae(n,{deviceCode:R,expiresIn:to,interval:to,userCode:R,verificationUri:R,verificationUriComplete:R});return Object.assign(r,o),r},bN=async(e,t)=>{let r={...e,body:await ol(e.body,t)},n=sl(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await rl(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await rE(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await nl(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await oE(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await sE(r,t);default:let o=r.body;return tl({output:e,parsedBody:o,errorCode:n})}},tl=Zr(ct),SN=async(e,t)=>{let r=re({}),n=e.body,o=ae(n,{error:R,error_description:R});Object.assign(r,o);let s=new rN({$metadata:qe(e),...r});return te(s,e.body)},AN=async(e,t)=>{let r=re({}),n=e.body,o=ae(n,{error:R,error_description:R});Object.assign(r,o);let s=new nN({$metadata:qe(e),...r});return te(s,e.body)},_N=async(e,t)=>{let r=re({}),n=e.body,o=ae(n,{error:R,error_description:R});Object.assign(r,o);let s=new oN({$metadata:qe(e),...r});return te(s,e.body)},rl=async(e,t)=>{let r=re({}),n=e.body,o=ae(n,{error:R,error_description:R});Object.assign(r,o);let s=new sN({$metadata:qe(e),...r});return te(s,e.body)},rE=async(e,t)=>{let r=re({}),n=e.body,o=ae(n,{error:R,error_description:R});Object.assign(r,o);let s=new iN({$metadata:qe(e),...r});return te(s,e.body)},RN=async(e,t)=>{let r=re({}),n=e.body,o=ae(n,{error:R,error_description:R});Object.assign(r,o);let s=new mN({$metadata:qe(e),...r});return te(s,e.body)},vN=async(e,t)=>{let r=re({}),n=e.body,o=ae(n,{error:R,error_description:R});Object.assign(r,o);let s=new aN({$metadata:qe(e),...r});return te(s,e.body)},nl=async(e,t)=>{let r=re({}),n=e.body,o=ae(n,{error:R,error_description:R});Object.assign(r,o);let s=new cN({$metadata:qe(e),...r});return te(s,e.body)},nE=async(e,t)=>{let r=re({}),n=e.body,o=ae(n,{error:R,error_description:R});Object.assign(r,o);let s=new dN({$metadata:qe(e),...r});return te(s,e.body)},oE=async(e,t)=>{let r=re({}),n=e.body,o=ae(n,{error:R,error_description:R});Object.assign(r,o);let s=new lN({$metadata:qe(e),...r});return te(s,e.body)},sE=async(e,t)=>{let r=re({}),n=e.body,o=ae(n,{error:R,error_description:R});Object.assign(r,o);let s=new fN({$metadata:qe(e),...r});return te(s,e.body)},TN=async(e,t)=>{let r=re({}),n=e.body,o=ae(n,{error:R,error_description:R});Object.assign(r,o);let s=new uN({$metadata:qe(e),...r});return te(s,e.body)},qe=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),kN=(e,t)=>cr(e,t).then(r=>t.utf8Encoder(r)),aa=(e,t)=>kN(e,t).then(r=>r.length?JSON.parse(r):{}),ol=async(e,t)=>{let r=await aa(e,t);return r.message=r.message??r.Message,r},sl=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)},il=class iE extends Le{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(rt(r,this.serialize,this.deserialize)),this.middlewareStack.use(nt(r,iE.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return hN(t,r)}deserialize(t,r){return gN(t,r)}},NN=class aE extends Le{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(rt(r,this.serialize,this.deserialize)),this.middlewareStack.use(nt(r,aE.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"RegisterClientCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return pN(t,r)}deserialize(t,r){return CN(t,r)}},PN=class cE extends Le{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(rt(r,this.serialize,this.deserialize)),this.middlewareStack.use(nt(r,cE.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"StartDeviceAuthorizationCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return yN(t,r)}deserialize(t,r){return wN(t,r)}},ON={CreateTokenCommand:il,RegisterClientCommand:NN,StartDeviceAuthorizationCommand:PN},IN=class extends el{};lp(ON,IN);var lo="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var al={},dE=e=>{if(al[e])return al[e];let t=new el({region:e});return al[e]=t,t};var lE=(e,t)=>dE(t).send(new il({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));var cl=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new gt(`Token is expired. ${lo}`,!1)};var dn=(e,t,r=!1)=>{if(typeof t>"u")throw new gt(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${lo}`,!1)};import{promises as DN}from"fs";var{writeFile:BN}=DN,fE=(e,t)=>{let r=qi(e),n=JSON.stringify(t,null,2);return BN(r,n)};var uE=new Date(0),mE=(e={})=>async()=>{let t=await nn(e),r=bt(e),n=t[r];if(n){if(!n.sso_session)throw new gt(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new gt(`Profile '${r}' could not be found in shared credentials file.`,!1);let o=n.sso_session,i=(await Vi(e))[o];if(!i)throw new gt(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let y of["sso_start_url","sso_region"])if(!i[y])throw new gt(`Sso session '${o}' is missing required property '${y}'.`,!1);let a=i.sso_start_url,c=i.sso_region,d;try{d=await Gi(o)}catch{throw new gt(`The SSO session token associated with profile=${r} was not found or is invalid. ${lo}`,!1)}dn("accessToken",d.accessToken),dn("expiresAt",d.expiresAt);let{accessToken:l,expiresAt:f}=d,u={token:l,expiration:new Date(f)};if(u.expiration.getTime()-Date.now()>3e5)return u;if(Date.now()-uE.getTime()<30*1e3)return cl(u),u;dn("clientId",d.clientId,!0),dn("clientSecret",d.clientSecret,!0),dn("refreshToken",d.refreshToken,!0);try{uE.setTime(Date.now());let y=await lE(d,c);dn("accessToken",y.accessToken),dn("expiresIn",y.expiresIn);let x=new Date(Date.now()+y.expiresIn*1e3);try{await fE(o,{...d,accessToken:y.accessToken,expiresAt:x.toISOString(),refreshToken:y.refreshToken})}catch{}return{token:y.accessToken,expiration:x}}catch{return cl(u),u}};var os=!1,dl=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:i})=>{let a,c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let A=await mE({profile:i})();a={accessToken:A.token,expiresAt:new Date(A.expiration).toISOString()}}catch(A){throw new D(A.message,os)}else try{a=await Gi(e)}catch{throw new D(`The SSO session associated with this profile is invalid. ${c}`,os)}if(new Date(a.expiresAt).getTime()-Date.now()<=0)throw new D(`The SSO session associated with this profile has expired. ${c}`,os);let{accessToken:d}=a,l=s||new ta({region:n}),f;try{f=await l.send(new ia({accountId:r,roleName:o,accessToken:d}))}catch(A){throw D.from(A,os)}let{roleCredentials:{accessKeyId:u,secretAccessKey:y,sessionToken:x,expiration:w}={}}=f;if(!u||!y||!x||!w)throw new D("SSO returns an invalid temporary credential.",os);return{accessKeyId:u,secretAccessKey:y,sessionToken:x,expiration:new Date(w)}};var ca=e=>{let{sso_start_url:t,sso_account_id:r,sso_region:n,sso_role_name:o}=e;if(!t||!r||!n||!o)throw new D(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};var da=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,ssoSession:i}=e,a=bt(e);if(!t&&!r&&!n&&!o&&!i){let d=(await nn(e))[a];if(!d)throw new D(`Profile ${a} was not found.`);if(!Jo(d))throw new D(`Profile ${a} is not configured with SSO credentials.`);if(d?.sso_session){let A=(await Vi(e))[d.sso_session],G=` configurations in profile ${a} and sso-session ${d.sso_session}`;if(n&&n!==A.sso_region)throw new D("Conflicting SSO region"+G,!1);if(t&&t!==A.sso_start_url)throw new D("Conflicting SSO start_url"+G,!1);d.sso_region=A.sso_region,d.sso_start_url=A.sso_start_url}let{sso_start_url:l,sso_account_id:f,sso_region:u,sso_role_name:y,sso_session:x}=ca(d);return dl({ssoStartUrl:l,ssoSession:x,ssoAccountId:f,ssoRegion:u,ssoRoleName:y,ssoClient:s,profile:a})}else{if(!t||!r||!n||!o)throw new D('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return dl({ssoStartUrl:t,ssoSession:i,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:a})}};var hE=e=>{let{sso_start_url:t,sso_account_id:r,sso_session:n,sso_region:o,sso_role_name:s}=ca(e);return da({ssoStartUrl:t,ssoAccountId:r,ssoSession:n,ssoRegion:o,ssoRoleName:s})()};var ll=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1,fl=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token});import{readFileSync as LN}from"fs";var pE=e=>()=>{let{roleArn:t,roleSessionName:r,webIdentityToken:n,providerId:o,policyArns:s,policy:i,durationSeconds:a,roleAssumerWithWebIdentity:c}=e;if(!c)throw new D(`Role Arn '${t}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return c({RoleArn:t,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:s,Policy:i,DurationSeconds:a})};var FN="AWS_WEB_IDENTITY_TOKEN_FILE",zN="AWS_ROLE_ARN",$N="AWS_ROLE_SESSION_NAME",la=(e={})=>async()=>{let t=e?.webIdentityTokenFile??process.env[FN],r=e?.roleArn??process.env[zN],n=e?.roleSessionName??process.env[$N];if(!t||!r)throw new D("Web identity configuration not specified");return pE({...e,webIdentityToken:LN(t,{encoding:"ascii"}),roleArn:r,roleSessionName:n})()};var yE=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,gE=async(e,t)=>la({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})();var Zi=async(e,t,r,n={})=>{let o=t[e];if(Object.keys(n).length>0&&ll(o))return fl(o);if(Yy(o))return Xy(e,t,r,n);if(ll(o))return fl(o);if(yE(o))return gE(o,r);if(Zy(o))return eg(r,e);if(Jo(o))return hE(o);throw new D(`Profile ${e} could not be found or parsed in shared credentials file.`)};var EE=(e={})=>async()=>{let t=await nn(e);return Zi(bt(e),t,e)};var UN="AWS_EC2_METADATA_DISABLED",CE=e=>process.env[Yo]||process.env[Wo]?Qi(e):process.env[UN]?async()=>{throw new D("EC2 Instance Metadata Service access disabled")}:Ji(e);var fa=(e={})=>Mr(Vs(...e.profile||process.env[Hd]?[]:[ji()],da(e),EE(e),ea(e),la(e),CE(e),async()=>{throw new D("Could not load credentials from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);var NE="required",M="type",W="fn",Y="argv",ln="ref";var Nn="booleanEquals",Fe="tree",Oe="stringEquals",PE="sigv4",OE="sts",IE="us-east-1",ce="endpoint",xE="https://sts.{Region}.{PartitionResult#dnsSuffix}",fo="error",ml="getAttr",wE={[NE]:!1,[M]:"String"},ul={[NE]:!0,default:!1,[M]:"Boolean"},DE={[ln]:"Endpoint"},bE={[W]:"isSet",[Y]:[{[ln]:"Region"}]},Ie={[ln]:"Region"},SE={[W]:"aws.partition",[Y]:[Ie],assign:"PartitionResult"},BE={[ln]:"UseFIPS"},ME={[ln]:"UseDualStack"},ze={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:PE,signingName:OE,signingRegion:IE}]},headers:{}},dt={},AE={conditions:[{[W]:Oe,[Y]:[Ie,"aws-global"]}],[ce]:ze,[M]:ce},LE={[W]:Nn,[Y]:[BE,!0]},FE={[W]:Nn,[Y]:[ME,!0]},_E={[W]:Nn,[Y]:[!0,{[W]:ml,[Y]:[{[ln]:"PartitionResult"},"supportsFIPS"]}]},zE={[ln]:"PartitionResult"},RE={[W]:Nn,[Y]:[!0,{[W]:ml,[Y]:[zE,"supportsDualStack"]}]},vE=[{[W]:"isSet",[Y]:[DE]}],TE=[LE],kE=[FE],jN={version:"1.0",parameters:{Region:wE,UseDualStack:ul,UseFIPS:ul,Endpoint:wE,UseGlobalEndpoint:ul},rules:[{conditions:[{[W]:Nn,[Y]:[{[ln]:"UseGlobalEndpoint"},!0]},{[W]:"not",[Y]:vE},bE,SE,{[W]:Nn,[Y]:[BE,!1]},{[W]:Nn,[Y]:[ME,!1]}],[M]:Fe,rules:[{conditions:[{[W]:Oe,[Y]:[Ie,"ap-northeast-1"]}],endpoint:ze,[M]:ce},{conditions:[{[W]:Oe,[Y]:[Ie,"ap-south-1"]}],endpoint:ze,[M]:ce},{conditions:[{[W]:Oe,[Y]:[Ie,"ap-southeast-1"]}],endpoint:ze,[M]:ce},{conditions:[{[W]:Oe,[Y]:[Ie,"ap-southeast-2"]}],endpoint:ze,[M]:ce},AE,{conditions:[{[W]:Oe,[Y]:[Ie,"ca-central-1"]}],endpoint:ze,[M]:ce},{conditions:[{[W]:Oe,[Y]:[Ie,"eu-central-1"]}],endpoint:ze,[M]:ce},{conditions:[{[W]:Oe,[Y]:[Ie,"eu-north-1"]}],endpoint:ze,[M]:ce},{conditions:[{[W]:Oe,[Y]:[Ie,"eu-west-1"]}],endpoint:ze,[M]:ce},{conditions:[{[W]:Oe,[Y]:[Ie,"eu-west-2"]}],endpoint:ze,[M]:ce},{conditions:[{[W]:Oe,[Y]:[Ie,"eu-west-3"]}],endpoint:ze,[M]:ce},{conditions:[{[W]:Oe,[Y]:[Ie,"sa-east-1"]}],endpoint:ze,[M]:ce},{conditions:[{[W]:Oe,[Y]:[Ie,IE]}],endpoint:ze,[M]:ce},{conditions:[{[W]:Oe,[Y]:[Ie,"us-east-2"]}],endpoint:ze,[M]:ce},{conditions:[{[W]:Oe,[Y]:[Ie,"us-west-1"]}],endpoint:ze,[M]:ce},{conditions:[{[W]:Oe,[Y]:[Ie,"us-west-2"]}],endpoint:ze,[M]:ce},{endpoint:{url:xE,properties:{authSchemes:[{name:PE,signingName:OE,signingRegion:"{Region}"}]},headers:dt},[M]:ce}]},{conditions:vE,[M]:Fe,rules:[{conditions:TE,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[M]:fo},{[M]:Fe,rules:[{conditions:kE,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[M]:fo},{endpoint:{url:DE,properties:dt,headers:dt},[M]:ce}]}]},{[M]:Fe,rules:[{conditions:[bE],[M]:Fe,rules:[{conditions:[SE],[M]:Fe,rules:[{conditions:[LE,FE],[M]:Fe,rules:[{conditions:[_E,RE],[M]:Fe,rules:[{[M]:Fe,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:dt,headers:dt},[M]:ce}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[M]:fo}]},{conditions:TE,[M]:Fe,rules:[{conditions:[_E],[M]:Fe,rules:[{[M]:Fe,rules:[{conditions:[{[W]:Oe,[Y]:["aws-us-gov",{[W]:ml,[Y]:[zE,"name"]}]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:dt,headers:dt},[M]:ce},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:dt,headers:dt},[M]:ce}]}]},{error:"FIPS is enabled but this partition does not support FIPS",[M]:fo}]},{conditions:kE,[M]:Fe,rules:[{conditions:[RE],[M]:Fe,rules:[{[M]:Fe,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:dt,headers:dt},[M]:ce}]}]},{error:"DualStack is enabled but this partition does not support DualStack",[M]:fo}]},{[M]:Fe,rules:[AE,{endpoint:{url:xE,properties:dt,headers:dt},[M]:ce}]}]}]},{error:"Invalid Configuration: Missing Region",[M]:fo}]}]},$E=jN;var UE=(e,t={})=>Ur($E,{endpointParams:e,logger:t.logger});var jE=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??qt,base64Encoder:e?.base64Encoder??Gt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??UE,extensions:e?.extensions??[],logger:e?.logger??new Ut,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??tt,utf8Decoder:e?.utf8Decoder??Ze,utf8Encoder:e?.utf8Encoder??Et});var qE=e=>{tn(process.version);let t=cn(e),r=()=>t().then(en),n=jE(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??an,credentialDefaultProvider:e?.credentialDefaultProvider??Oy(fa),defaultUserAgentProvider:e?.defaultUserAgentProvider??sn({serviceId:n.serviceId,clientVersion:Pp.version}),maxAttempts:e?.maxAttempts??V(Yr),region:e?.region??V(zt,Kr),requestHandler:e?.requestHandler??new Kt(r),retryMode:e?.retryMode??V({...Qr,default:async()=>(await r()).retryMode||$t}),sha256:e?.sha256??St.bind(null,"sha256"),streamCollector:e?.streamCollector??Ht,useDualstackEndpoint:e?.useDualstackEndpoint??V(qr),useFipsEndpoint:e?.useFipsEndpoint??V(Gr)}};var qN=e=>e,GE=(e,t)=>{let r={...qN(ro(e))};return t.forEach(n=>n.configure(r)),{...e,...no(r)}};var ss=class e extends jt{constructor(...[t]){let r=qE(t||{}),n=Np(r),o=Hr(n),s=Wr(o),i=Xr(s),a=i,c=kp(a,{stsClientCtor:e}),d=zr(c),l=GE(d,t?.extensions||[]);super(l),this.config=l,this.middlewareStack.use(Jr(this.config)),this.middlewareStack.use(Vr(this.config)),this.middlewareStack.use(Ir(this.config)),this.middlewareStack.use(Dr(this.config)),this.middlewareStack.use(Br(this.config)),this.middlewareStack.use(jr(this.config))}destroy(){super.destroy()}};var KE=(e,t)=>t?class extends e{constructor(n){super(n);for(let o of t)this.middlewareStack.use(o)}}:e,GN=(e={},t)=>Gd(e,KE(ss,t)),KN=(e={},t)=>Kd(e,KE(ss,t)),HE=e=>t=>e({roleAssumer:GN(t),roleAssumerWithWebIdentity:KN(t),...t});var HN="AWS_S3_USE_ARN_REGION",VN="s3_use_arn_region",VE={environmentVariableSelector:e=>Ft(e,HN,xt.ENV),configFileSelector:e=>Ft(e,VN,xt.CONFIG),default:!1};function WE(e){let t=0,r=0,n=null,o=null,s=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},i=async function*(){let a=e[Symbol.asyncIterator]();for(;;){let{value:c,done:d}=await a.next();if(d){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}let l=c.length,f=0;for(;f<l;){if(!n){let y=l-f;o||(o=new Uint8Array(4));let x=Math.min(4-r,y);if(o.set(c.slice(f,f+x),r),r+=x,f+=x,r<4)break;s(new DataView(o.buffer).getUint32(0,!1)),o=null}let u=Math.min(t-r,l-f);n.set(c.slice(f,f+u),r),r+=u,f+=u,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:i}}function YE(e,t){return async function(r){let{value:n}=r.headers[":message-type"];if(n==="error"){let o=new Error(r.headers[":error-message"].value||"UnknownError");throw o.name=r.headers[":error-code"].value,o}else if(n==="exception"){let o=r.headers[":exception-type"].value,s={[o]:r},i=await e(s);if(i.$unknown){let a=new Error(t(r.body));throw a.name=o,a}throw i[o]}else if(n==="event"){let o={[r.headers[":event-type"].value]:r},s=await e(o);return s.$unknown?void 0:s}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}var is=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new Zs(t,r),this.utfEncoder=t}deserialize(t,r){let n=WE(t);return new ri({messageStream:new ei({inputStream:n,decoder:this.eventStreamCodec}),deserializer:YE(r,this.utfEncoder)})}serialize(t,r){return new ti({messageStream:new ni({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};import{Readable as nP}from"stream";async function*XE(e){let t=!1,r=!1,n=new Array;for(e.on("error",o=>{if(t||(t=!0),o)throw o}),e.on("data",o=>{n.push(o)}),e.on("end",()=>{t=!0});!r;){let o=await new Promise(s=>setTimeout(()=>s(n.shift()),0));o&&(yield o),r=t&&n.length===0}}var ua=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new is({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=typeof t[Symbol.asyncIterator]=="function"?t:XE(t);return this.universalMarshaller.deserialize(n,r)}serialize(t,r){return nP.from(this.universalMarshaller.serialize(t,r))}};var QE=e=>new ua(e);import{Writable as oP}from"stream";var as=class extends oP{constructor(t,r){super(r),this.hash=t}_write(t,r,n){try{this.hash.update(et(t))}catch(o){return n(o)}n()}};var JE=(e,t)=>{if(t.readableFlowing!==null)throw new Error("Unable to calculate hash for flowing readable stream");let r=new e,n=new as(r);return t.pipe(n),new Promise((o,s)=>{t.on("error",i=>{n.end(),s(i)}),n.on("error",s),n.on("finish",()=>{r.digest().then(o).catch(s)})})};var ma=class{constructor(t){this.sigv4Signer=new _n(t),this.signerOptions=t}async sign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(t,r)}return this.sigv4Signer.sign(t,r)}async presign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(t,r)}return this.sigv4Signer.presign(t,r)}getSigv4aSigner(){if(!this.sigv4aSigner){let t;try{if(t=typeof I=="function"&&I("@aws-sdk/signature-v4-crt").CrtSignerV4,typeof t!="function")throw new Error}catch(r){throw r.message=`${r.message}
Please check if you have installed "@aws-sdk/signature-v4-crt" package explicitly. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,r}this.sigv4aSigner=new t({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}};var $l="required",m="type",h="conditions",E="fn",C="argv",F="ref",De="assign",N="url",P="properties",Er="authSchemes",Cr="disableDoubleEncoding",xr="signingName",mn="signingRegion",O="headers";var Jt="isSet",b="tree",$e="booleanEquals",k="error",ga="aws.partition",he="stringEquals",ge="getAttr",At="name",cs="substring",KC="hardwareType",HC="regionPrefix",ZE="bucketAliasSuffix",Ll="outpostId",Pn="isValidHostLabel",Pt="not",VC="parseURL",Ul="s3-outposts",S="endpoint",eC="aws.isVirtualHostableS3Bucket",mo="s3",WC="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",YC="{url#scheme}://{Bucket}.{url#authority}{url#path}",XC="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",tC="https://{Bucket}.s3.{partitionResult#dnsSuffix}",QC="aws.parseArn",JC="bucketArn",ZC="arnType",Ea="",jl="s3-object-lambda",ex="accesspoint",ql="accessPointName",rC="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",nC="mrapPartition",oC="outpostType",sC="arnPrefix",tx="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",iC="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",Fl="{url#scheme}://{url#authority}{url#path}",aC="https://s3.{partitionResult#dnsSuffix}",hl={[$l]:!1,[m]:"String"},uo={[$l]:!0,default:!1,[m]:"Boolean"},pl={[$l]:!1,[m]:"Boolean"},Nt={[E]:$e,[C]:[{[F]:"Accelerate"},!0]},de={[E]:$e,[C]:[{[F]:"UseFIPS"},!0]},ne={[E]:$e,[C]:[{[F]:"UseDualStack"},!0]},ye={[E]:Jt,[C]:[{[F]:"Endpoint"}]},rx={[E]:ga,[C]:[{[F]:"Region"}],[De]:"partitionResult"},cC={[E]:he,[C]:[{[E]:ge,[C]:[{[F]:"partitionResult"},At]},"aws-cn"]},nx={[E]:Jt,[C]:[{[F]:"Bucket"}]},gr={[F]:"Bucket"},dC={[F]:KC},lC={[h]:[{[E]:Pt,[C]:[ye]}],[k]:"Expected a endpoint to be specified but no endpoint was found",[m]:k},L={[E]:Pt,[C]:[ye]},Ge={[E]:VC,[C]:[{[F]:"Endpoint"}],[De]:"url"},ha={[Er]:[{[Cr]:!0,[At]:"sigv4",[xr]:Ul,[mn]:"{Region}"}]},U={},yl={[E]:$e,[C]:[{[F]:"ForcePathStyle"},!1]},sP={[F]:"ForcePathStyle"},xe={[E]:$e,[C]:[{[F]:"Accelerate"},!1]},Se={[E]:he,[C]:[{[F]:"Region"},"aws-global"]},_e={[Er]:[{[Cr]:!0,[At]:"sigv4",[xr]:mo,[mn]:"us-east-1"}]},H={[E]:Pt,[C]:[Se]},Re={[E]:$e,[C]:[{[F]:"UseGlobalEndpoint"},!0]},fC={[N]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[P]:{[Er]:[{[Cr]:!0,[At]:"sigv4",[xr]:mo,[mn]:"{Region}"}]},[O]:{}},we={[Er]:[{[Cr]:!0,[At]:"sigv4",[xr]:mo,[mn]:"{Region}"}]},ve={[E]:$e,[C]:[{[F]:"UseGlobalEndpoint"},!1]},q={[E]:$e,[C]:[{[F]:"UseDualStack"},!1]},uC={[N]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[P]:we,[O]:{}},$={[E]:$e,[C]:[{[F]:"UseFIPS"},!1]},mC={[N]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[P]:we,[O]:{}},hC={[N]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[P]:we,[O]:{}},gl={[E]:$e,[C]:[{[E]:ge,[C]:[{[F]:"url"},"isIp"]},!0]},ox={[F]:"url"},El={[E]:$e,[C]:[{[E]:ge,[C]:[ox,"isIp"]},!1]},Cl={[N]:WC,[P]:we,[O]:{}},zl={[N]:YC,[P]:we,[O]:{}},pC={[S]:zl,[m]:S},xl={[N]:XC,[P]:we,[O]:{}},yC={[N]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[P]:we,[O]:{}},pa={[k]:"Invalid region: region was not a valid DNS name.",[m]:k},st={[F]:JC},sx={[F]:ZC},wl={[E]:ge,[C]:[st,"service"]},Gl={[F]:ql},gC={[h]:[ne],[k]:"S3 Object Lambda does not support Dual-stack",[m]:k},EC={[h]:[Nt],[k]:"S3 Object Lambda does not support S3 Accelerate",[m]:k},CC={[h]:[{[E]:Jt,[C]:[{[F]:"DisableAccessPoints"}]},{[E]:$e,[C]:[{[F]:"DisableAccessPoints"},!0]}],[k]:"Access points are not supported for this operation",[m]:k},bl={[h]:[{[E]:Jt,[C]:[{[F]:"UseArnRegion"}]},{[E]:$e,[C]:[{[F]:"UseArnRegion"},!1]},{[E]:Pt,[C]:[{[E]:he,[C]:[{[E]:ge,[C]:[st,"region"]},"{Region}"]}]}],[k]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[m]:k},ix={[E]:ge,[C]:[{[F]:"bucketPartition"},At]},ax={[E]:ge,[C]:[st,"accountId"]},Sl={[Er]:[{[Cr]:!0,[At]:"sigv4",[xr]:jl,[mn]:"{bucketArn#region}"}]},xC={[k]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[m]:k},Al={[k]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[m]:k},_l={[k]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[m]:k},Rl={[k]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[m]:k},wC={[k]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[m]:k},bC={[k]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[m]:k},ds={[Er]:[{[Cr]:!0,[At]:"sigv4",[xr]:mo,[mn]:"{bucketArn#region}"}]},SC={[Er]:[{[Cr]:!0,[At]:"sigv4",[xr]:Ul,[mn]:"{bucketArn#region}"}]},AC={[E]:QC,[C]:[gr]},_C={[N]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:we,[O]:{}},RC={[N]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:we,[O]:{}},vC={[N]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:we,[O]:{}},vl={[N]:tx,[P]:we,[O]:{}},TC={[N]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:we,[O]:{}},kC={[F]:"UseObjectLambdaEndpoint"},Tl={[Er]:[{[Cr]:!0,[At]:"sigv4",[xr]:jl,[mn]:"{Region}"}]},NC={[N]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[P]:we,[O]:{}},PC={[N]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[P]:we,[O]:{}},OC={[N]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[P]:we,[O]:{}},kl={[N]:Fl,[P]:we,[O]:{}},IC={[N]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[P]:we,[O]:{}},Nl=[{[F]:"Region"}],iP=[{[F]:"Endpoint"}],DC=[gr],BC=[{[E]:Pn,[C]:[{[F]:Ll},!1]}],MC=[{[E]:he,[C]:[{[F]:HC},"beta"]}],ls=[ye,Ge],LC=[nx],fn=[rx],FC=[{[E]:Pn,[C]:[{[F]:"Region"},!1]}],un=[{[E]:he,[C]:[{[F]:"Region"},"us-east-1"]}],Pl=[{[E]:he,[C]:[sx,ex]}],zC=[{[E]:ge,[C]:[st,"resourceId[1]"],[De]:ql},{[E]:Pt,[C]:[{[E]:he,[C]:[Gl,Ea]}]}],aP=[st,"resourceId[1]"],$C=[ne],Ol=[Nt],Il=[{[E]:Pt,[C]:[{[E]:he,[C]:[{[E]:ge,[C]:[st,"region"]},Ea]}]}],UC=[{[E]:Pt,[C]:[{[E]:Jt,[C]:[{[E]:ge,[C]:[st,"resourceId[2]"]}]}]}],cP=[st,"resourceId[2]"],Dl=[{[E]:ga,[C]:[{[E]:ge,[C]:[st,"region"]}],[De]:"bucketPartition"}],jC=[{[E]:he,[C]:[ix,{[E]:ge,[C]:[{[F]:"partitionResult"},At]}]}],Bl=[{[E]:Pn,[C]:[{[E]:ge,[C]:[st,"region"]},!0]}],Ml=[{[E]:Pn,[C]:[ax,!1]}],qC=[{[E]:Pn,[C]:[Gl,!1]}],ya=[de],GC=[{[E]:Pn,[C]:[{[F]:"Region"},!0]}],dP={version:"1.0",parameters:{Bucket:hl,Region:hl,UseFIPS:uo,UseDualStack:uo,Endpoint:hl,ForcePathStyle:uo,Accelerate:uo,UseGlobalEndpoint:uo,UseObjectLambdaEndpoint:pl,DisableAccessPoints:pl,DisableMultiRegionAccessPoints:uo,UseArnRegion:pl},rules:[{[h]:[{[E]:Jt,[C]:Nl}],[m]:b,rules:[{[h]:[Nt,de],error:"Accelerate cannot be used with FIPS",[m]:k},{[h]:[ne,ye],error:"Cannot set dual-stack in combination with a custom endpoint.",[m]:k},{[h]:[ye,de],error:"A custom endpoint cannot be combined with FIPS",[m]:k},{[h]:[ye,Nt],error:"A custom endpoint cannot be combined with S3 Accelerate",[m]:k},{[h]:[de,rx,cC],error:"Partition does not support FIPS",[m]:k},{[h]:[nx,{[E]:cs,[C]:[gr,49,50,!0],[De]:KC},{[E]:cs,[C]:[gr,8,12,!0],[De]:HC},{[E]:cs,[C]:[gr,0,7,!0],[De]:ZE},{[E]:cs,[C]:[gr,32,49,!0],[De]:Ll},{[E]:ga,[C]:Nl,[De]:"regionPartition"},{[E]:he,[C]:[{[F]:ZE},"--op-s3"]}],[m]:b,rules:[{[h]:BC,[m]:b,rules:[{[h]:[{[E]:he,[C]:[dC,"e"]}],[m]:b,rules:[{[h]:MC,[m]:b,rules:[lC,{[h]:ls,endpoint:{[N]:"https://{Bucket}.ec2.{url#authority}",[P]:ha,[O]:U},[m]:S}]},{endpoint:{[N]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[P]:ha,[O]:U},[m]:S}]},{[h]:[{[E]:he,[C]:[dC,"o"]}],[m]:b,rules:[{[h]:MC,[m]:b,rules:[lC,{[h]:ls,endpoint:{[N]:"https://{Bucket}.op-{outpostId}.{url#authority}",[P]:ha,[O]:U},[m]:S}]},{endpoint:{[N]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[P]:ha,[O]:U},[m]:S}]},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[m]:k}]},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[m]:k}]},{[h]:LC,[m]:b,rules:[{[h]:[ye,{[E]:Pt,[C]:[{[E]:Jt,[C]:[{[E]:VC,[C]:iP}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[m]:k},{[h]:[yl,{[E]:eC,[C]:[gr,!1]}],[m]:b,rules:[{[h]:fn,[m]:b,rules:[{[h]:FC,[m]:b,rules:[{[h]:[Nt,cC],error:"S3 Accelerate cannot be used in this region",[m]:k},{[h]:[ne,de,xe,L,Se],endpoint:{[N]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:_e,[O]:U},[m]:S},{[h]:[ne,de,xe,L,H,Re],[m]:b,rules:[{endpoint:fC,[m]:S}]},{[h]:[ne,de,xe,L,H,ve],endpoint:fC,[m]:S},{[h]:[q,de,xe,L,Se],endpoint:{[N]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[P]:_e,[O]:U},[m]:S},{[h]:[q,de,xe,L,H,Re],[m]:b,rules:[{endpoint:uC,[m]:S}]},{[h]:[q,de,xe,L,H,ve],endpoint:uC,[m]:S},{[h]:[ne,$,Nt,L,Se],endpoint:{[N]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:_e,[O]:U},[m]:S},{[h]:[ne,$,Nt,L,H,Re],[m]:b,rules:[{endpoint:mC,[m]:S}]},{[h]:[ne,$,Nt,L,H,ve],endpoint:mC,[m]:S},{[h]:[ne,$,xe,L,Se],endpoint:{[N]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:_e,[O]:U},[m]:S},{[h]:[ne,$,xe,L,H,Re],[m]:b,rules:[{endpoint:hC,[m]:S}]},{[h]:[ne,$,xe,L,H,ve],endpoint:hC,[m]:S},{[h]:[q,$,xe,ye,Ge,gl,Se],endpoint:{[N]:WC,[P]:_e,[O]:U},[m]:S},{[h]:[q,$,xe,ye,Ge,El,Se],endpoint:{[N]:YC,[P]:_e,[O]:U},[m]:S},{[h]:[q,$,xe,ye,Ge,gl,H,Re],[m]:b,rules:[{[h]:un,endpoint:Cl,[m]:S},{endpoint:Cl,[m]:S}]},{[h]:[q,$,xe,ye,Ge,El,H,Re],[m]:b,rules:[{[h]:un,endpoint:zl,[m]:S},pC]},{[h]:[q,$,xe,ye,Ge,gl,H,ve],endpoint:Cl,[m]:S},{[h]:[q,$,xe,ye,Ge,El,H,ve],endpoint:zl,[m]:S},{[h]:[q,$,Nt,L,Se],endpoint:{[N]:XC,[P]:_e,[O]:U},[m]:S},{[h]:[q,$,Nt,L,H,Re],[m]:b,rules:[{[h]:un,endpoint:xl,[m]:S},{endpoint:xl,[m]:S}]},{[h]:[q,$,Nt,L,H,ve],endpoint:xl,[m]:S},{[h]:[q,$,xe,L,Se],endpoint:{[N]:tC,[P]:_e,[O]:U},[m]:S},{[h]:[q,$,xe,L,H,Re],[m]:b,rules:[{[h]:un,endpoint:{[N]:tC,[P]:we,[O]:U},[m]:S},{endpoint:yC,[m]:S}]},{[h]:[q,$,xe,L,H,ve],endpoint:yC,[m]:S}]},pa]}]},{[h]:[ye,Ge,{[E]:he,[C]:[{[E]:ge,[C]:[ox,"scheme"]},"http"]},{[E]:eC,[C]:[gr,!0]},yl,$,q,xe],[m]:b,rules:[{[h]:fn,[m]:b,rules:[{[h]:FC,[m]:b,rules:[pC]},pa]}]},{[h]:[yl,{[E]:QC,[C]:DC,[De]:JC}],[m]:b,rules:[{[h]:[{[E]:ge,[C]:[st,"resourceId[0]"],[De]:ZC},{[E]:Pt,[C]:[{[E]:he,[C]:[sx,Ea]}]}],[m]:b,rules:[{[h]:[{[E]:he,[C]:[wl,jl]}],[m]:b,rules:[{[h]:Pl,[m]:b,rules:[{[h]:zC,[m]:b,rules:[gC,EC,{[h]:Il,[m]:b,rules:[CC,{[h]:UC,[m]:b,rules:[bl,{[h]:Dl,[m]:b,rules:[{[h]:fn,[m]:b,rules:[{[h]:jC,[m]:b,rules:[{[h]:Bl,[m]:b,rules:[{[h]:[{[E]:he,[C]:[ax,Ea]}],error:"Invalid ARN: Missing account id",[m]:k},{[h]:Ml,[m]:b,rules:[{[h]:qC,[m]:b,rules:[{[h]:ls,endpoint:{[N]:rC,[P]:Sl,[O]:U},[m]:S},{[h]:ya,endpoint:{[N]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:Sl,[O]:U},[m]:S},{endpoint:{[N]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:Sl,[O]:U},[m]:S}]},xC]},Al]},_l]},Rl]}]}]},wC]},{error:"Invalid ARN: bucket ARN is missing a region",[m]:k}]},bC]},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[m]:k}]},{[h]:Pl,[m]:b,rules:[{[h]:zC,[m]:b,rules:[{[h]:Il,[m]:b,rules:[{[h]:Pl,[m]:b,rules:[{[h]:Il,[m]:b,rules:[CC,{[h]:UC,[m]:b,rules:[bl,{[h]:Dl,[m]:b,rules:[{[h]:fn,[m]:b,rules:[{[h]:[{[E]:he,[C]:[ix,"{partitionResult#name}"]}],[m]:b,rules:[{[h]:Bl,[m]:b,rules:[{[h]:[{[E]:he,[C]:[wl,mo]}],[m]:b,rules:[{[h]:Ml,[m]:b,rules:[{[h]:qC,[m]:b,rules:[{[h]:Ol,error:"Access Points do not support S3 Accelerate",[m]:k},{[h]:[de,ne],endpoint:{[N]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:ds,[O]:U},[m]:S},{[h]:[de,q],endpoint:{[N]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:ds,[O]:U},[m]:S},{[h]:[$,ne],endpoint:{[N]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:ds,[O]:U},[m]:S},{[h]:[$,q,ye,Ge],endpoint:{[N]:rC,[P]:ds,[O]:U},[m]:S},{[h]:[$,q],endpoint:{[N]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:ds,[O]:U},[m]:S}]},xC]},Al]},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[m]:k}]},_l]},Rl]}]}]},wC]}]}]},{[h]:[{[E]:Pn,[C]:[Gl,!0]}],[m]:b,rules:[{[h]:$C,error:"S3 MRAP does not support dual-stack",[m]:k},{[h]:ya,error:"S3 MRAP does not support FIPS",[m]:k},{[h]:Ol,error:"S3 MRAP does not support S3 Accelerate",[m]:k},{[h]:[{[E]:$e,[C]:[{[F]:"DisableMultiRegionAccessPoints"},!0]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[m]:k},{[h]:[{[E]:ga,[C]:Nl,[De]:nC}],[m]:b,rules:[{[h]:[{[E]:he,[C]:[{[E]:ge,[C]:[{[F]:nC},At]},{[E]:ge,[C]:[st,"partition"]}]}],[m]:b,rules:[{endpoint:{[N]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[P]:{[Er]:[{[Cr]:!0,name:"sigv4a",[xr]:mo,signingRegionSet:["*"]}]},[O]:U},[m]:S}]},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[m]:k}]}]},{error:"Invalid Access Point Name",[m]:k}]},bC]},{[h]:[{[E]:he,[C]:[wl,Ul]}],[m]:b,rules:[{[h]:$C,error:"S3 Outposts does not support Dual-stack",[m]:k},{[h]:ya,error:"S3 Outposts does not support FIPS",[m]:k},{[h]:Ol,error:"S3 Outposts does not support S3 Accelerate",[m]:k},{[h]:[{[E]:Jt,[C]:[{[E]:ge,[C]:[st,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[m]:k},{[h]:[{[E]:ge,[C]:aP,[De]:Ll}],[m]:b,rules:[{[h]:BC,[m]:b,rules:[bl,{[h]:Dl,[m]:b,rules:[{[h]:fn,[m]:b,rules:[{[h]:jC,[m]:b,rules:[{[h]:Bl,[m]:b,rules:[{[h]:Ml,[m]:b,rules:[{[h]:[{[E]:ge,[C]:cP,[De]:oC}],[m]:b,rules:[{[h]:[{[E]:ge,[C]:[st,"resourceId[3]"],[De]:ql}],[m]:b,rules:[{[h]:[{[E]:he,[C]:[{[F]:oC},ex]}],[m]:b,rules:[{[h]:ls,endpoint:{[N]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[P]:SC,[O]:U},[m]:S},{endpoint:{[N]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:SC,[O]:U},[m]:S}]},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[m]:k}]},{error:"Invalid ARN: expected an access point name",[m]:k}]},{error:"Invalid ARN: Expected a 4-component resource",[m]:k}]},Al]},_l]},Rl]}]}]},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[m]:k}]},{error:"Invalid ARN: The Outpost Id was not set",[m]:k}]},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[m]:k}]},{error:"Invalid ARN: No ARN type specified",[m]:k}]},{[h]:[{[E]:cs,[C]:[gr,0,4,!1],[De]:sC},{[E]:he,[C]:[{[F]:sC},"arn:"]},{[E]:Pt,[C]:[{[E]:Jt,[C]:[AC]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[m]:k},{[h]:[{[E]:$e,[C]:[sP,!0]},AC],error:"Path-style addressing cannot be used with ARN buckets",[m]:k},{[h]:[{[E]:"uriEncode",[C]:DC,[De]:"uri_encoded_bucket"}],[m]:b,rules:[{[h]:fn,[m]:b,rules:[{[h]:[xe],[m]:b,rules:[{[h]:[ne,L,de,Se],endpoint:{[N]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:_e,[O]:U},[m]:S},{[h]:[ne,L,de,H,Re],[m]:b,rules:[{endpoint:_C,[m]:S}]},{[h]:[ne,L,de,H,ve],endpoint:_C,[m]:S},{[h]:[q,L,de,Se],endpoint:{[N]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:_e,[O]:U},[m]:S},{[h]:[q,L,de,H,Re],[m]:b,rules:[{endpoint:RC,[m]:S}]},{[h]:[q,L,de,H,ve],endpoint:RC,[m]:S},{[h]:[ne,L,$,Se],endpoint:{[N]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:_e,[O]:U},[m]:S},{[h]:[ne,L,$,H,Re],[m]:b,rules:[{endpoint:vC,[m]:S}]},{[h]:[ne,L,$,H,ve],endpoint:vC,[m]:S},{[h]:[q,ye,Ge,$,Se],endpoint:{[N]:tx,[P]:_e,[O]:U},[m]:S},{[h]:[q,ye,Ge,$,H,Re],[m]:b,rules:[{[h]:un,endpoint:vl,[m]:S},{endpoint:vl,[m]:S}]},{[h]:[q,ye,Ge,$,H,ve],endpoint:vl,[m]:S},{[h]:[q,L,$,Se],endpoint:{[N]:iC,[P]:_e,[O]:U},[m]:S},{[h]:[q,L,$,H,Re],[m]:b,rules:[{[h]:un,endpoint:{[N]:iC,[P]:we,[O]:U},[m]:S},{endpoint:TC,[m]:S}]},{[h]:[q,L,$,H,ve],endpoint:TC,[m]:S}]},{error:"Path-style addressing cannot be used with S3 Accelerate",[m]:k}]}]}]},{[h]:[{[E]:Jt,[C]:[kC]},{[E]:$e,[C]:[kC,!0]}],[m]:b,rules:[{[h]:fn,[m]:b,rules:[{[h]:GC,[m]:b,rules:[gC,EC,{[h]:ls,endpoint:{[N]:Fl,[P]:Tl,[O]:U},[m]:S},{[h]:ya,endpoint:{[N]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[P]:Tl,[O]:U},[m]:S},{endpoint:{[N]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[P]:Tl,[O]:U},[m]:S}]},pa]}]},{[h]:[{[E]:Pt,[C]:LC}],[m]:b,rules:[{[h]:fn,[m]:b,rules:[{[h]:GC,[m]:b,rules:[{[h]:[de,ne,L,Se],endpoint:{[N]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:_e,[O]:U},[m]:S},{[h]:[de,ne,L,H,Re],[m]:b,rules:[{endpoint:NC,[m]:S}]},{[h]:[de,ne,L,H,ve],endpoint:NC,[m]:S},{[h]:[de,q,L,Se],endpoint:{[N]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[P]:_e,[O]:U},[m]:S},{[h]:[de,q,L,H,Re],[m]:b,rules:[{endpoint:PC,[m]:S}]},{[h]:[de,q,L,H,ve],endpoint:PC,[m]:S},{[h]:[$,ne,L,Se],endpoint:{[N]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:_e,[O]:U},[m]:S},{[h]:[$,ne,L,H,Re],[m]:b,rules:[{endpoint:OC,[m]:S}]},{[h]:[$,ne,L,H,ve],endpoint:OC,[m]:S},{[h]:[$,q,ye,Ge,Se],endpoint:{[N]:Fl,[P]:_e,[O]:U},[m]:S},{[h]:[$,q,ye,Ge,H,Re],[m]:b,rules:[{[h]:un,endpoint:kl,[m]:S},{endpoint:kl,[m]:S}]},{[h]:[$,q,ye,Ge,H,ve],endpoint:kl,[m]:S},{[h]:[$,q,L,Se],endpoint:{[N]:aC,[P]:_e,[O]:U},[m]:S},{[h]:[$,q,L,H,Re],[m]:b,rules:[{[h]:un,endpoint:{[N]:aC,[P]:we,[O]:U},[m]:S},{endpoint:IC,[m]:S}]},{[h]:[$,q,L,H,ve],endpoint:IC,[m]:S}]},pa]}]}]},{error:"A region must be set when sending requests to S3.",[m]:k}]},cx=dP;var dx=(e,t={})=>Ur(cx,{endpointParams:e,logger:t.logger});var lx=e=>({apiVersion:"2006-03-01",base64Decoder:e?.base64Decoder??qt,base64Encoder:e?.base64Encoder??Gt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??dx,extensions:e?.extensions??[],getAwsChunkedEncodingStream:e?.getAwsChunkedEncodingStream??rp,logger:e?.logger??new Ut,sdkStreamMixin:e?.sdkStreamMixin??dp,serviceId:e?.serviceId??"S3",signerConstructor:e?.signerConstructor??ma,signingEscapePath:e?.signingEscapePath??!1,urlParser:e?.urlParser??tt,useArnRegion:e?.useArnRegion??!1,utf8Decoder:e?.utf8Decoder??Ze,utf8Encoder:e?.utf8Encoder??Et});var fx=e=>{tn(process.version);let t=cn(e),r=()=>t().then(en),n=lx(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??an,credentialDefaultProvider:e?.credentialDefaultProvider??HE(fa),defaultUserAgentProvider:e?.defaultUserAgentProvider??sn({serviceId:n.serviceId,clientVersion:Tp.version}),eventStreamSerdeProvider:e?.eventStreamSerdeProvider??QE,maxAttempts:e?.maxAttempts??V(Yr),md5:e?.md5??St.bind(null,"md5"),region:e?.region??V(zt,Kr),requestHandler:e?.requestHandler??new Kt(r),retryMode:e?.retryMode??V({...Qr,default:async()=>(await r()).retryMode||$t}),sha1:e?.sha1??St.bind(null,"sha1"),sha256:e?.sha256??St.bind(null,"sha256"),streamCollector:e?.streamCollector??Ht,streamHasher:e?.streamHasher??JE,useArnRegion:e?.useArnRegion??V(VE),useDualstackEndpoint:e?.useDualstackEndpoint??V(qr),useFipsEndpoint:e?.useFipsEndpoint??V(Gr)}};var lP=e=>e,ux=(e,t)=>{let r={...lP(ro(e))};return t.forEach(n=>n.configure(r)),{...e,...no(r)}};var Ca=class extends jt{constructor(...[t]){let r=fx(t||{}),n=vp(r),o=Hr(n),s=Wr(o),i=Xr(s),a=i,c=fi(a),d=Cm(c),l=zr(d),f=Nh(l),u=ux(f,t?.extensions||[]);super(u),this.config=u,this.middlewareStack.use(Jr(this.config)),this.middlewareStack.use(Vr(this.config)),this.middlewareStack.use(Ir(this.config)),this.middlewareStack.use(Dr(this.config)),this.middlewareStack.use(Br(this.config)),this.middlewareStack.use(mi(this.config)),this.middlewareStack.use(xm(this.config)),this.middlewareStack.use(ym(this.config)),this.middlewareStack.use(jr(this.config))}destroy(){super.destroy()}};var Cx=er(jd());var xa=class e extends Vt{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var mx;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(mx||(mx={}));var hx;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.ObjectSizeGreaterThan!==void 0?r.ObjectSizeGreaterThan(t.ObjectSizeGreaterThan):t.ObjectSizeLessThan!==void 0?r.ObjectSizeLessThan(t.ObjectSizeLessThan):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(hx||(hx={}));var px;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.AccessPointArn!==void 0?r.AccessPointArn(t.AccessPointArn):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(px||(px={}));var yx;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(yx||(yx={}));var gx=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:at},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:at}}),Ex=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:at},...e.SSEKMSKeyId&&{SSEKMSKeyId:at},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:at}});var xx=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i=re({},fs,{"content-type":e.ContentType||"application/octet-stream","x-amz-acl":e.ACL,"cache-control":e.CacheControl,"content-disposition":e.ContentDisposition,"content-encoding":e.ContentEncoding,"content-language":e.ContentLanguage,"content-length":[()=>fs(e.ContentLength),()=>e.ContentLength.toString()],"content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-checksum-crc32":e.ChecksumCRC32,"x-amz-checksum-crc32c":e.ChecksumCRC32C,"x-amz-checksum-sha1":e.ChecksumSHA1,"x-amz-checksum-sha256":e.ChecksumSHA256,expires:[()=>fs(e.Expires),()=>wp(e.Expires).toString()],"x-amz-grant-full-control":e.GrantFullControl,"x-amz-grant-read":e.GrantRead,"x-amz-grant-read-acp":e.GrantReadACP,"x-amz-grant-write-acp":e.GrantWriteACP,"x-amz-server-side-encryption":e.ServerSideEncryption,"x-amz-storage-class":e.StorageClass,"x-amz-website-redirect-location":e.WebsiteRedirectLocation,"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5,"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId,"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext,"x-amz-server-side-encryption-bucket-key-enabled":[()=>fs(e.BucketKeyEnabled),()=>e.BucketKeyEnabled.toString()],"x-amz-request-payer":e.RequestPayer,"x-amz-tagging":e.Tagging,"x-amz-object-lock-mode":e.ObjectLockMode,"x-amz-object-lock-retain-until-date":[()=>fs(e.ObjectLockRetainUntilDate),()=>(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()],"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((f,u)=>(f[`x-amz-meta-${u.toLowerCase()}`]=e.Metadata[u],f),{})}),a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/{Key+}`;a=Od(a,e,"Bucket",()=>e.Bucket,"{Bucket}",!1),a=Od(a,e,"Key",()=>e.Key,"{Key+}",!0);let c=re({"x-id":[,"PutObject"]}),d;e.Body!==void 0&&(d=e.Body);let l;return e.Body!==void 0&&(l=e.Body,d=l),new K({protocol:n,hostname:r,port:o,method:"PUT",headers:i,path:a,query:c,body:d})};var wx=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return uP(e,t);let r=re({$metadata:hP(e),Expiration:[,e.headers["x-amz-expiration"]],ETag:[,e.headers.etag],ChecksumCRC32:[,e.headers["x-amz-checksum-crc32"]],ChecksumCRC32C:[,e.headers["x-amz-checksum-crc32c"]],ChecksumSHA1:[,e.headers["x-amz-checksum-sha1"]],ChecksumSHA256:[,e.headers["x-amz-checksum-sha256"]],ServerSideEncryption:[,e.headers["x-amz-server-side-encryption"]],VersionId:[,e.headers["x-amz-version-id"]],SSECustomerAlgorithm:[,e.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,e.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,e.headers["x-amz-server-side-encryption-aws-kms-key-id"]],SSEKMSEncryptionContext:[,e.headers["x-amz-server-side-encryption-context"]],BucketKeyEnabled:[()=>e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0,()=>hp(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])],RequestCharged:[,e.headers["x-amz-request-charged"]]});return await cr(e.body,t),r},uP=async(e,t)=>{let r={...e,body:await gP(e.body,t)},n=EP(e,r.body),o=r.body;return mP({output:e,parsedBody:o,errorCode:n})};var mP=Zr(xa);var hP=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),pP=(e,t)=>cr(e,t).then(r=>t.utf8Encoder(r)),fs=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),yP=(e,t)=>pP(e,t).then(r=>{if(r.length){let n=new Cx.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o=n.parse(r),s="#text",i=Object.keys(o)[0],a=o[i];return a[s]&&(a[i]=a[s],delete a[s]),jo(a)}return{}}),gP=async(e,t)=>{let r=await yP(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},EP=(e,t)=>{if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"};function CP(e){return t=>async r=>{let n={...r.input},o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(let s of o){let i=n[s.target];if(i){let a=ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):typeof i=="string"?e.utf8Decoder(i):new Uint8Array(i),c=e.base64Encoder(a),d=new e.md5;d.update(a),n={...n,[s.target]:c,[s.hash]:e.base64Encoder(await d.digest())}}}return t({...r,input:n})}}var xP={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},bx=e=>({applyToStack:t=>{t.add(CP(e),xP)}});var Ee;(function(e){e.MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.SHA1="SHA1",e.SHA256="SHA256"})(Ee||(Ee={}));var Sx;(function(e){e.HEADER="header",e.TRAILER="trailer"})(Sx||(Sx={}));var us=[Ee.CRC32,Ee.CRC32C,Ee.SHA1,Ee.SHA256],Ax=[Ee.CRC32,Ee.CRC32C,Ee.SHA1,Ee.SHA256];var _x=(e,{requestChecksumRequired:t,requestAlgorithmMember:r})=>{if(!r||!e[r])return t?Ee.MD5:void 0;let n=e[r];if(!us.includes(n))throw new Error(`The checksum algorithm "${n}" is not supported by the client. Select one of ${us}.`);return n};var wa=e=>e===Ee.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`;var Rx=(e,t)=>{let r=e.toLowerCase();for(let n of Object.keys(t))if(r===n.toLowerCase())return!0;return!1};var ho=e=>e!==void 0&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!Yn(e);var Px=er(Lo()),Ox=er(Hl());var Sa=(e,t)=>({[Ee.MD5]:t.md5,[Ee.CRC32]:Px.AwsCrc32,[Ee.CRC32C]:Ox.AwsCrc32c,[Ee.SHA1]:t.sha1,[Ee.SHA256]:t.sha256})[e];var Aa=(e,t)=>{let r=new e;return r.update(et(t||"")),r.digest()};var Ix=(e,t)=>r=>async n=>{if(!K.isInstance(n.request))return r(n);let{request:o}=n,{body:s,headers:i}=o,{base64Encoder:a,streamHasher:c}=e,{input:d,requestChecksumRequired:l,requestAlgorithmMember:f}=t,u=_x(d,{requestChecksumRequired:l,requestAlgorithmMember:f}),y=s,x=i;if(u){let A=wa(u),G=Sa(u,e);if(ho(s)){let{getAwsChunkedEncodingStream:le,bodyLengthChecker:Ke}=e;y=le(s,{base64Encoder:a,bodyLengthChecker:Ke,checksumLocationName:A,checksumAlgorithmFn:G,streamHasher:c}),x={...i,"content-encoding":i["content-encoding"]?`${i["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":i["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":A},delete x["content-length"]}else if(!Rx(A,i)){let le=await Aa(G,s);x={...i,[A]:a(le)}}}return await r({...n,request:{...o,headers:x,body:y}})};import{Transform as TP}from"stream";function Vl(e){let t=new TP;return t.push(e),t.push(null),t}var Dx=async(e,{streamHasher:t,checksumAlgorithmFn:r,base64Encoder:n})=>{let o=ho(e)?t(r,e):Aa(r,e);return n(await o)};var Bx=(e=[])=>{let t=[];for(let r of Ax)!e.includes(r)||!us.includes(r)||t.push(r);return t};var Mx=async(e,{config:t,responseAlgorithms:r})=>{let n=Bx(r),{body:o,headers:s}=e;for(let i of n){let a=wa(i),c=s[a];if(c){let d=Sa(i,t),{streamHasher:l,base64Encoder:f}=t,u=await Dx(o,{streamHasher:l,checksumAlgorithmFn:d,base64Encoder:f});if(u===c)break;throw new Error(`Checksum mismatch: expected "${u}" but received "${c}" in response header "${a}".`)}}};var Lx={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},Fx=(e,t)=>r=>async n=>{if(!K.isInstance(n.request))return r(n);let o=n.input,s=await r(n),i=s.response,a,{requestValidationModeMember:c,responseAlgorithms:d}=t;if(c&&o[c]==="ENABLED"){let l=ho(i.body);l&&(a=await e.streamCollector(i.body),i.body=Vl(a)),await Mx(s.response,{config:e,responseAlgorithms:d}),l&&a&&(i.body=Vl(a))}return s};var kP={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},zx=(e,t)=>({applyToStack:r=>{r.add(Ix(e,t),kP),r.addRelativeTo(Fx(e,t),Lx)}});var _a=class e extends Le{static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(rt(r,this.serialize,this.deserialize)),this.middlewareStack.use(nt(r,e.getEndpointParameterInstructions())),this.middlewareStack.use(Em(r)),this.middlewareStack.use(bx(r)),this.middlewareStack.use(zx(r,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:Ex,outputFilterSensitiveLog:gx},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return xx(t,r)}deserialize(t,r){return wx(t,r)}};var OP=new Ca,IP=async()=>{let e=pn.default.getState("key"),t=pn.default.getInput("path").split(`
`).map(c=>c.trim()).filter(c=>!!c);if(pn.default.getState("exact-matched")==="true"){pn.default.info("Cache already exists. Skipping...");return}let n=await ms.default.getCompressionMethod(),o=await ms.default.resolvePaths(t),s=await ms.default.createTempDirectory(),i=ms.default.getCacheFileName(n),a=PP.join(s,i);pn.default.info("Archiving cache..."),await(0,$x.createTar)(s,o,n),pn.default.info("Uploading cache..."),await OP.send(new _a({Bucket:"penxle-artifacts",Key:`actions-cache/${e}`,Body:await NP.readFile(a)})),pn.default.info("Cache saved successfully")};await IP();
/*! Bundled license information:

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
